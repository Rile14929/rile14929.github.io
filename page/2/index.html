<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rile14929.github.io","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="FE">
<meta property="og:type" content="website">
<meta property="og:title" content="å³è€³å¬é£">
<meta property="og:url" content="https://rile14929.github.io/page/2/index.html">
<meta property="og:site_name" content="å³è€³å¬é£">
<meta property="og:description" content="FE">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="rile">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://rile14929.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>å³è€³å¬é£</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å³è€³å¬é£</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tag"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%EF%BC%88Update%20the%20rendering%EF%BC%89%E7%9A%84%E6%97%B6%E6%9C%BA.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%EF%BC%88Update%20the%20rendering%EF%BC%89%E7%9A%84%E6%97%B6%E6%9C%BA.html" class="post-title-link" itemprop="url">EventLoopè§„èŒƒ - æ›´æ–°æ¸²æŸ“ï¼ˆUpdate the renderingï¼‰çš„æ—¶æœºéªŒè¯</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-10-18 00:00:00" itemprop="dateCreated datePublished" datetime="2023-10-18T00:00:00+08:00">2023-10-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="event-loop-ä¸­çš„-Update-the-renderingï¼ˆæ›´æ–°æ¸²æŸ“ï¼‰"><a href="#event-loop-ä¸­çš„-Update-the-renderingï¼ˆæ›´æ–°æ¸²æŸ“ï¼‰" class="headerlink" title="event loop ä¸­çš„ Update the renderingï¼ˆæ›´æ–°æ¸²æŸ“ï¼‰"></a>event loop ä¸­çš„ Update the renderingï¼ˆæ›´æ–°æ¸²æŸ“ï¼‰</h2><p>è¿™æ˜¯ event loop ä¸­å¾ˆé‡è¦éƒ¨åˆ†ï¼Œåœ¨<a href="https://rile14929.github.io/zh-CN/eventloop.html">è¿™ç¯‡æ–‡ç« å¤„ç†æµç¨‹ï¼ˆprocessing modelï¼‰ä¸­ç¬¬ 3 æ­¥ä¼šè¿›è¡Œ Update the renderingï¼ˆæ›´æ–°æ¸²æŸ“ï¼‰</a>ï¼Œè§„èŒƒå…è®¸æµè§ˆå™¨è‡ªå·±é€‰æ‹©æ˜¯å¦æ›´æ–°è§†å›¾ã€‚ä¹Ÿå°±æ˜¯è¯´å¯èƒ½ä¸æ˜¯æ¯è½®äº‹ä»¶å¾ªç¯éƒ½å»æ›´æ–°è§†å›¾ï¼Œåªåœ¨æœ‰å¿…è¦çš„æ—¶å€™æ‰æ›´æ–°è§†å›¾ã€‚</p>
<p>æ¸²æŸ“çš„åŸºæœ¬æµç¨‹ï¼š</p>
<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image.png" alt="alt text"></p>
<ol>
<li>å¤„ç† HTML æ ‡è®°å¹¶æ„å»º DOM æ ‘ã€‚</li>
<li>å¤„ç† CSS æ ‡è®°å¹¶æ„å»º CSSOM æ ‘ï¼Œ å°† DOM ä¸ CSSOM åˆå¹¶æˆä¸€ä¸ªæ¸²æŸ“æ ‘ã€‚</li>
<li>æ ¹æ®æ¸²æŸ“æ ‘æ¥å¸ƒå±€ï¼Œä»¥è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯ã€‚</li>
<li>å°†å„ä¸ªèŠ‚ç‚¹ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚</li>
</ol>
<p>Note: å¯ä»¥çœ‹åˆ°æ¸²æŸ“æ ‘çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†æ˜¯ CSSOM æ ‘ï¼Œç»˜åˆ¶ä¼šç­‰å¾… css æ ·å¼å…¨éƒ¨åŠ è½½å®Œæˆæ‰è¿›è¡Œï¼Œæ‰€ä»¥ css æ ·å¼åŠ è½½çš„å¿«æ…¢æ˜¯é¦–å±å‘ˆç°å¿«æ…¢çš„å…³é”®ç‚¹ã€‚</p>
<p>ä¸‹é¢è®¨è®ºä¸€ä¸‹æ¸²æŸ“çš„æ—¶æœºã€‚è§„èŒƒå®šä¹‰åœ¨ä¸€æ¬¡å¾ªç¯ä¸­ï¼ŒUpdate the rendering ä¼šåœ¨ Microtasks: Perform a microtask checkpoint åè¿è¡Œã€‚</p>
<h2 id="æ¸²æŸ“æ—¶æœº"><a href="#æ¸²æŸ“æ—¶æœº" class="headerlink" title="æ¸²æŸ“æ—¶æœº"></a>æ¸²æŸ“æ—¶æœº</h2><blockquote>
<p>ä»¥ä¸‹çš„ä¾‹å­ä¸­ï¼Œç”¨ chrome çš„ Developer tools çš„ Timeline æŸ¥çœ‹å„éƒ¨åˆ†è¿è¡Œçš„æ—¶é—´ç‚¹ã€‚å½“æˆ‘ä»¬ç‚¹å‡»è¿™ä¸ª div çš„æ—¶å€™ï¼Œæˆªå–äº†éƒ¨åˆ†æ—¶é—´çº¿ã€‚</p>
<p>é»„è‰²éƒ¨åˆ†æ˜¯è„šæœ¬è¿è¡Œï¼Œç´«è‰²éƒ¨åˆ†æ˜¯æ›´æ–° render æ ‘ã€è®¡ç®—å¸ƒå±€ï¼Œç»¿è‰²éƒ¨åˆ†æ˜¯ç»˜åˆ¶ã€‚</p>
<p>ç»¿è‰²å’Œç´«è‰²éƒ¨åˆ†å¯ä»¥è®¤ä¸ºæ˜¯ Update the renderingã€‚</p>
</blockquote>
<h3 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­ 1"></a>ä¾‹å­ 1</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> t = <span class="number">0</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = t</span><br><span class="line">    &#125;, 0)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-1.png" alt="alt text"></p>
<p>åœ¨è¿™ä¸€è½®äº‹ä»¶å¾ªç¯ä¸­ï¼ŒsetTimeout1 æ˜¯ä½œä¸º task è¿è¡Œçš„ï¼Œå¯ä»¥çœ‹åˆ° paint ç¡®å®æ˜¯åœ¨ task è¿è¡Œå®Œåæ‰è¿›è¡Œçš„ã€‚</p>
<h3 id="ä¾‹å­-2"><a href="#ä¾‹å­-2" class="headerlink" title="ä¾‹å­ 2"></a>ä¾‹å­ 2</h3><p>ç°åœ¨æ¢æˆä¸€ä¸ª microtask ä»»åŠ¡ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆå˜åŒ–</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> <span class="title">Promise1</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">      con.textContext = 0</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-2.png" alt="alt text"></p>
<p>å’Œä¸Šä¸€ä¸ªä¾‹å­å¾ˆåƒï¼Œä¸åŒçš„æ˜¯è¿™ä¸€è½®äº‹ä»¶å¾ªç¯çš„ task æ˜¯ click çš„å›è°ƒå‡½æ•°ï¼ŒPromise1 åˆ™æ˜¯ microtaskï¼Œpaint åŒæ ·æ˜¯åœ¨ä»–ä»¬ä¹‹åå®Œæˆã€‚</p>
<p>æ ‡å‡†å°±æ˜¯é‚£ä¹ˆå®šä¹‰çš„ï¼Œç­”æ¡ˆä¼¼ä¹æ˜¾è€Œæ˜“è§ï¼Œæˆ‘ä»¬æŠŠä¾‹å­å˜å¾—ç¨å¾®å¤æ‚ä¸€äº›ã€‚</p>
<h3 id="ä¾‹å­-3"><a href="#ä¾‹å­-3" class="headerlink" title="ä¾‹å­ 3"></a>ä¾‹å­ 3</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="title">click1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 0</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout2</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 1</span><br><span class="line">    &#125;, 0)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-3.png" alt="alt text"><br><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-4.png" alt="alt text"></p>
<p>ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œæ‰§è¡Œå’Œæ¸²æŸ“é¡ºåºå¯èƒ½ä¼šå‡ºç°ä¸Šå›¾çš„ä¸¤ç§æƒ…å†µï¼Œæ ¹æ® timeline å¯ä»¥çœ‹å‡ºï¼Œå›¾ 1 ä¸­ setTimeout åˆ†åˆ«æ‰§è¡Œå¹¶ä¸”æµè§ˆå™¨ç»˜åˆ¶äº†ä¸¤æ¬¡ï¼Œå›¾äºŒä¸­ setTimeout1 å’Œ setTimeout2 ä¸­é—´å¹¶æ²¡æœ‰ç»˜åˆ¶, è€Œæ˜¯æœ€åç»˜åˆ¶äº†ä¸€æ¬¡ï¼Œä¹ŸåŸºæœ¬ç¬¦åˆè§„èŒƒï¼Œä½†æ˜¯éœ€è¦éªŒè¯è¿™ä¸¤æ¬¡ setTimeout æ˜¯å¦åœ¨ä¸¤æ¬¡ task ä¸­ã€‚</p>
<h3 id="ä¾‹å­-4"><a href="#ä¾‹å­-4" class="headerlink" title="ä¾‹å­ 4"></a>ä¾‹å­ 4</h3><p>åœ¨ä¸¤ä¸ª setTimeout ä¸­å¢åŠ  microtaskã€‚å†æ¬¡ç¡®è®¤ setTimeout åœ¨ä¸¤ä¸ª task ä¸­</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 0</span><br><span class="line"><span class="javascript">      <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> <span class="title">Promise1</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'Promise1'</span>)</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout2</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 1</span><br><span class="line"><span class="javascript">      <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> <span class="title">Promise2</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'Promise2'</span>)</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;, 0)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-5.png" alt="alt text"><br><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-9.png" alt="alt text"></p>
<p>ä» run microtasks ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼ŒsetTimeout1ã€setTimeout2 æ˜¯è¿è¡Œåœ¨ä¸¤æ¬¡ event loop ä¸­</p>
<h3 id="ä¾‹å­-5"><a href="#ä¾‹å­-5" class="headerlink" title="ä¾‹å­ 5"></a>ä¾‹å­ 5</h3><p>å°†æ—¶é—´é—´éš”åŠ å¤§ä¸€äº›ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="title">click1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 0</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout2</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 1</span><br><span class="line">    &#125;, 17)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“é—´éš”å¢å¤§ï¼Œå¤§éƒ¨åˆ†æ—¶å€™å¯ä»¥è‚‰çœ¼ä»çœ‹åˆ°å…ˆå˜æˆ 0ï¼Œå†å˜æˆ 1 çš„è¿‡ç¨‹ã€‚ä½†æ˜¯æœ‰æ—¶ä¹Ÿæ˜¯ä¼šåˆå¹¶èµ·æ¥ï¼Œåª paint ä¸€æ¬¡</p>
<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-6.png" alt="alt text"></p>
<p>é€šè¿‡ timelineï¼Œå¯ä»¥çœ‹åˆ° setTimeout1 åæ¥ç€ paintï¼Œåæ‰§è¡Œäº† setTimeout2 åä¹Ÿæœ‰ paint</p>
<h3 id="ä¾‹å­-6"><a href="#ä¾‹å­-6" class="headerlink" title="ä¾‹å­ 6"></a>ä¾‹å­ 6</h3><p>æˆ‘ä»¬åœ¨åŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ª setTimeout æ¥æ¨¡æ‹Ÿæ‰§è¡Œé—´éš”å¾ˆçŸ­çš„ taskã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 0</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 1</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 2</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 3</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 4</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 5</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = 6</span><br><span class="line">    &#125;, 0)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-7.png" alt="alt text"><br>å›¾ä¸€ä¸­æ€»å…± paint äº†ä¸€æ¬¡</p>
<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-8.png" alt="alt text"></p>
<p>å›¾äºŒä¸­ä¸€å…± paint äº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥å¤šæ¬¡ task çš„é—´éš”å¾ˆçŸ­ï¼Œä»ä¼šè¿›è¡Œç»˜åˆ¶ã€‚</p>
<h3 id="ä¾‹å­-7"><a href="#ä¾‹å­-7" class="headerlink" title="ä¾‹å­ 7"></a>ä¾‹å­ 7</h3><p>æœ‰è¯´æ³•æ˜¯ä¸€è½® event loop æ‰§è¡Œçš„ microtask æœ‰æ•°é‡é™åˆ¶ï¼Œå¤šä½™çš„ microtask ä¼šæ”¾åˆ°ä¸‹ä¸€è½®æ‰§è¡Œã€‚ä¸‹é¢ä¾‹å­å°† microtask çš„æ•°é‡å¢åŠ åˆ° 25000ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      con.textContent = <span class="string">'task1'</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">250000</span>; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">          con.textContent = i</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 0)</span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout2</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      con.textContent = <span class="string">'task2'</span></span></span><br><span class="line">    &#125;, 0)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-10.png" alt="alt text"></p>
<p>å¯ä»¥çœ‹åˆ°è„šæœ¬çš„è¿è¡Œè€—è´¹å¤§é‡çš„æ—¶é—´ï¼Œå¹¶ä¸”é˜»å¡äº†æ¸²æŸ“ã€‚</p>
<p>æˆ‘ä»¬çœ‹ setTimeout2 çš„è¿è¡Œæƒ…å†µ</p>
<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-11.png" alt="alt text"></p>
<p>å¯ä»¥çœ‹åˆ° setTimeout2 è¿™è½® event loop æ²¡æœ‰ run microtasksï¼Œmicrotasks åœ¨ setTimeout1 è¢«å…¨éƒ¨æ‰§è¡Œå®Œäº†ã€‚</p>
<p>25000 ä¸ª microtasks ä¸èƒ½è¯´æ˜ event loop å¯¹ microtasks æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œæœ‰å¯èƒ½è¿™ä¸ªé™åˆ¶æ•°å¾ˆé«˜ï¼Œè¿œè¶… 25000ï¼Œä½†æ—¥å¸¸ä½¿ç”¨åŸºæœ¬ä¸ä¼šä½¿ç”¨é‚£ä¹ˆå¤šäº†ã€‚</p>
<p>å¯¹ microtasks å¢åŠ æ•°é‡é™åˆ¶ï¼Œä¸€ä¸ªå¾ˆå¤§çš„ä½œç”¨æ˜¯é˜²æ­¢è„šæœ¬è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œé˜»å¡æ¸²æŸ“ã€‚</p>
<h3 id="ä¾‹å­-8"><a href="#ä¾‹å­-8" class="headerlink" title="ä¾‹å­ 8"></a>ä¾‹å­ 8</h3><p>ä½¿ç”¨ requestAnimationFrameã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"con"</span>&gt;</span>this is con<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">'con'</span>)</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> i = <span class="number">0</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> raf = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    requestAnimationFrame(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">      con.textContent = i</span><br><span class="line"><span class="javascript">      <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        i++</span><br><span class="line">        if (i &lt; 3) raf()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="actionscript">  con.onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">    raf()</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çœ‹ä¸‹æ€»ä½“çš„ timeline<br><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-12.png" alt="alt text"></p>
<p>å•çœ‹æŸä¸€ä¸ª requestAnimationFrame<br><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-13.png" alt="alt text"></p>
<ul>
<li>å¯ä»¥çœ‹å‡º requestAnimationFrame æ˜¯åœ¨æ›´æ–°æ¸²æŸ“é˜¶æ®µçš„æ‰§è¡Œçš„ï¼Œå…¶æ‰§è¡Œé¡ºåºæ—©äº paintï¼Œå¹¶ä¸”ä¸ä¼šè¢«åˆå¹¶æ‰§è¡Œï¼Œéå¸¸é€‚åˆåšåŠ¨ç”»</li>
<li>åœ¨ requestAnimationFrame å›è°ƒå†…æœ‰æ–°çš„ microtasks è¿›å…¥æ—¶ï¼Œä¹Ÿä¼šæ‰§è¡Œå®Œæ‰€æœ‰çš„ microtasks æ‰ä¼šè¿›å…¥åˆ°æ¸²æŸ“é˜¶æ®µ</li>
</ul>
<h3 id="ä¾‹å­-9"><a href="#ä¾‹å­-9" class="headerlink" title="ä¾‹å­ 9"></a>ä¾‹å­ 9</h3><p>éªŒè¯ postMessage æ˜¯å¦æ˜¯ task</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'setTimeout1'</span>)</span></span><br><span class="line">  &#125;, 0)</span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> channel = <span class="keyword">new</span> MessageChannel()</span></span><br><span class="line"><span class="actionscript">  channel.port1.onmessage = <span class="function"><span class="keyword">function</span> <span class="title">onmessage1</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'postMessage'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> <span class="title">promise1</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'promise1'</span>)</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  channel.port2.postMessage(0)</span><br><span class="line"><span class="actionscript">  setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout2</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'setTimeout2'</span>)</span></span><br><span class="line">  &#125;, 0)</span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(<span class="string">'sync'</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œé¡ºåºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sync</span><br><span class="line">setTimeout1</span><br><span class="line">postMessage</span><br><span class="line">promise1</span><br><span class="line">setTimeout2</span><br></pre></td></tr></table></figure>

<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-14.png" alt="alt text"></p>
<p>ç¬¬ä¸€ä¸ªé»„å—æ˜¯ setTimeout1ï¼Œç¬¬äºŒä¸ªæ˜¯ onmessage1ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ promise1ï¼Œç¬¬å››ä¸ªæ˜¯ setTimeout2ã€‚æ˜¾è€Œæ˜“è§ï¼ŒpostMessage å±äº taskã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»“åˆè§„èŒƒå’Œä»¥ä¸ŠéªŒè¯æ¡ˆä¾‹å¯ä»¥å¾—å‡ºä¸€äº›ç»“è®ºï¼š</p>
<ul>
<li>event loop çš„å¤§è‡´å¾ªç¯è¿‡ç¨‹ï¼Œå¯ä»¥ç”¨ä¸‹è¾¹çš„å›¾è¡¨ç¤ºï¼š</li>
</ul>
<p><img src="../images/EventLoop%E9%AA%8C%E8%AF%81%E6%9B%B4%E6%96%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E6%97%B6%E6%9C%BA/image-15.png" alt="alt text"></p>
<ul>
<li>åœ¨ä¸€è½® event loop ä¸­å¤šæ¬¡ä¿®æ”¹åŒä¸€ domï¼Œåªæœ‰æœ€åä¸€æ¬¡ä¼šè¿›è¡Œç»˜åˆ¶ã€‚</li>
<li>ä¾‹ 3-ä¾‹ 6 è¿™å‡ ä¸ªç»“æœæ˜¯éå¸¸ä¸å¯æ§çš„ï¼Œå¦‚æœè¿™ä¸¤ä¸ª Task ä¹‹é—´æ­£å¥½é‡åˆ°äº†æµè§ˆå™¨è®¤å®šçš„æ¸²æŸ“æœºä¼šï¼Œé‚£ä¹ˆå®ƒä¼šé‡ç»˜ï¼Œå¦åˆ™å°±ä¸ä¼šã€‚</li>
<li>æ¸²æŸ“æ›´æ–°ï¼ˆUpdate the renderingï¼‰ä¼šåœ¨ event loop ä¸­çš„ tasks å’Œ microtasks å®Œæˆåè¿›è¡Œï¼Œä½†å¹¶ä¸æ˜¯æ¯è½® event loop éƒ½ä¼šæ›´æ–°æ¸²æŸ“ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª rendering opportunity çš„æ¦‚å¿µï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ¸²æŸ“ï¼Œè¿™å–å†³äºæ˜¯å¦ä¿®æ”¹äº† dom å’Œæµè§ˆå™¨è§‰å¾—æ˜¯å¦æœ‰å¿…è¦åœ¨æ­¤æ—¶ç«‹å³å°†æ–°çŠ¶æ€å‘ˆç°ç»™ç”¨æˆ·ï¼Œä¹Ÿè¦è¦æ ¹æ®å±å¹•åˆ·æ–°ç‡ã€é¡µé¢æ€§èƒ½ã€é¡µé¢æ˜¯å¦åœ¨åå°è¿è¡Œæ¥å…±åŒå†³å®šã€‚é€šå¸¸æ¥è¯´è¿™ä¸ªæ¸²æŸ“é—´éš”æ˜¯å›ºå®šçš„ã€‚ï¼ˆæ‰€ä»¥å¤šä¸ª task å¾ˆå¯èƒ½åœ¨ä¸€æ¬¡æ¸²æŸ“ä¹‹é—´æ‰§è¡Œï¼‰</li>
<li>äº‹ä»¶å¾ªç¯ä¸ä¸€å®šæ¯è½®éƒ½ä¼´éšç€é‡æ¸²æŸ“ï¼Œä½†æ˜¯å¦‚æœæœ‰å¾®ä»»åŠ¡ï¼Œä¸€å®šä¼šä¼´éšç€å¾®ä»»åŠ¡æ‰§è¡Œã€‚</li>
<li>å¦‚æœå¸Œæœ›åœ¨æ¯è½® event loop éƒ½å³æ—¶å‘ˆç°å˜åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨ requestAnimationFrameã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/semantic-release.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/semantic-release.html" class="post-title-link" itemprop="url">å›¢é˜Ÿæ•æ·å®è·µ â€”â€” ä½¿ç”¨ semantic-release å®ç°è‡ªåŠ¨åŒ–å‘å¸ƒ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-09-01 00:00:00" itemprop="dateCreated datePublished" datetime="2023-09-01T00:00:00+08:00">2023-09-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¹‹å‰çš„åˆ†äº«ä¸­ï¼Œæˆ‘ä»¬å›¢é˜Ÿå·²ç»æˆåŠŸè¿ç”¨äº† Gitlab CIï¼Œå¹¶ä¸”å·²ç»ç»“æ„åŒ–æäº¤ git commit è®°å½•ï¼Œæˆ‘ä»¬å¸Œæœ›æ›´è¿›ä¸€æ­¥ï¼Œè‡ªåŠ¨ç®¡ç†å‘å¸ƒç‰ˆæœ¬ï¼Œè‡ªåŠ¨ç”Ÿæˆæ›´æ–°æ—¥å¿—ï¼Œè‡ªåŠ¨å‘å¸ƒ NPM åŒ…ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥äº† semantic-release è¿›ä¸€æ­¥è‡ªåŠ¨åŒ–ç®¡ç†æˆ‘ä»¬çš„å‘å¸ƒæµç¨‹ã€‚</p>
<h2 id="semantic-release-æ¦‚è¿°"><a href="#semantic-release-æ¦‚è¿°" class="headerlink" title="semantic-release æ¦‚è¿°"></a>semantic-release æ¦‚è¿°</h2><p>æœ‰å…³<a href="https://semantic-release.gitbook.io/semantic-release/" target="_blank" rel="noopener">semantic-release</a>çš„è¯¦ç»†ä»‹ç»å¯ä»¥é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œåªåšä¸€äº›æ¦‚è¿°æ€§çš„æ€»ç»“ã€‚å’Œ standard-version ç›¸æ¯”ï¼Œsemantic-release æ›´é€‚åˆåœ¨ CI ç¯å¢ƒä¸­è¿è¡Œï¼Œå®ƒè‡ªå¸¦æ”¯æŒå„ç§ git server çš„è®¤è¯æ”¯æŒï¼Œå¦‚ Githubï¼ŒGitlabï¼ŒBitbucket ç­‰ç­‰ï¼Œæ­¤å¤–ï¼Œè¿˜æ”¯æŒæ’ä»¶ï¼Œä»¥ä¾¿å®Œæˆå…¶ä»–åç»­çš„æµç¨‹æ­¥éª¤ï¼Œæ¯”å¦‚è‡ªåŠ¨ç”Ÿæˆ git tag å’Œ release note ä¹‹åå† push å›ä¸­å¤®ä»“åº“ï¼Œè‡ªåŠ¨å‘å¸ƒ npm åŒ…ç­‰ç­‰ã€‚</p>
<p>semantic-release ä¼šæ ¹æ®è§„èŒƒåŒ–çš„ commit ä¿¡æ¯ç”Ÿæˆå‘å¸ƒæ—¥å¿—ï¼Œé»˜è®¤ä½¿ç”¨ angular è§„åˆ™ï¼Œå…¶ä»–è§„åˆ™å¯ä»¥é…ç½®æ’ä»¶å®Œæˆã€‚</p>
<p>semantic-release å¤§è‡´çš„å·¥ä½œæµå¦‚ä¸‹:</p>
<ul>
<li>æäº¤åˆ°ç‰¹å®šçš„åˆ†æ”¯è§¦å‘ release æµç¨‹</li>
<li>éªŒè¯ commit ä¿¡æ¯ï¼Œç”Ÿæˆ release noteï¼Œæ‰“ git tag</li>
<li>å…¶ä»–åç»­æµç¨‹ï¼Œå¦‚ç”Ÿæˆ CHANGELOG.mdï¼Œnpm publish ç­‰ç­‰ï¼ˆé€šè¿‡æ’ä»¶å®Œæˆï¼‰</li>
</ul>
<p><strong>ç”± CI è‡ªåŠ¨æ‰§è¡Œä¹‹åçš„æ•ˆæœå°±åƒè¿™æ ·ï¼Œåœ¨ Git tag é¡µé¢å¯ä»¥çœ‹åˆ° tag ä¿¡æ¯ï¼ŒåŒæ—¶åŒ…å«æ›´æ–°è®°å½•:</strong><br><img src="/images/semantic-release.resources/4AC0ED82-F6DB-47DF-BF40-55D3D102E62E.png" alt="86f880f284d3072ec2179cbc46c32396"></p>
<p><strong>å¦‚æœå¯ç”¨äº†@semantic-release/git æ’ä»¶ï¼Œè¿˜ä¼šå°†ç”Ÿæˆçš„ CHANGELOG.md  åå‘ push å›ä¸­å¤®ä»“åº“:</strong><br><img src="/images/semantic-release.resources/0ECB644A-F473-44BD-B48D-88C694133D7C.png" alt="6cfc655f89c58bc6a2faa5e3aee6eea1"></p>
<p><strong>commit history çš„å®é™…æ•ˆæœå¦‚ä¸‹</strong><br><img src="/images/semantic-release.resources/6FB7CB34-8D1F-46EB-98EA-801CABF7D39F.png" alt="c15015e5517056c98eca17829d479a12"></p>
<h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><p>åœ¨é¡¹ç›®å·¥ç¨‹ä¸­æ·»åŠ  release.config.js é…ç½®å¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">parserOpts = &#123;</span><br><span class="line">  mergePattern: <span class="regexp">/^Merge pull request #(\d+) from (.*)$/</span>,</span><br><span class="line">  mergeCorrespondence: [<span class="string">'id'</span>, <span class="string">'source'</span>],</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Copied from https://github.com/conventional-changelog/conventional-changelog/blob/master/packages/conventional-changelog-angular/writer-opts.js#L27</span></span><br><span class="line"><span class="comment">// and modified to support adding all commit types to the release notes</span></span><br><span class="line">customTransform = <span class="function">(<span class="params">commit, context</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> issues = []</span><br><span class="line">  commit.notes.forEach(<span class="function">(<span class="params">note</span>) =&gt;</span> &#123;</span><br><span class="line">    note.title = <span class="string">`BREAKING CHANGES`</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (commit.type === <span class="string">`feat`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`âœ¨ Features`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`fix`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸ Bug Fixes`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`perf`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸˆ Performance Improvements`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`revert`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`Reverts`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`docs`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸ“ƒ Documentation`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`style`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸŒˆ Styles`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`refactor`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸ¦„ Code Refactoring`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`test`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸ§ª Tests`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`build`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸ”§ Build System`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (commit.type === <span class="string">`ci`</span>) &#123;</span><br><span class="line">    commit.type = <span class="string">`ğŸ Continuous Integration`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (commit.scope === <span class="string">`*`</span>) &#123;</span><br><span class="line">    commit.scope = <span class="string">``</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> commit.hash === <span class="string">`string`</span>) &#123;</span><br><span class="line">    commit.shortHash = commit.hash.substring(<span class="number">0</span>, <span class="number">7</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> commit.subject === <span class="string">`string`</span>) &#123;</span><br><span class="line">    commit.subject = commit.subject.substring(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">let</span> url = context.repository</span><br><span class="line">      ? <span class="string">`<span class="subst">$&#123;context.host&#125;</span>/<span class="subst">$&#123;context.owner&#125;</span>/<span class="subst">$&#123;context.repository&#125;</span>`</span></span><br><span class="line">      : context.repoUrl</span><br><span class="line">    <span class="keyword">if</span> (url) &#123;</span><br><span class="line">      url = <span class="string">`<span class="subst">$&#123;url&#125;</span>/issues/`</span> <span class="comment">// Issue URLs.</span></span><br><span class="line">      commit.subject = commit.subject.replace(<span class="regexp">/#([0-9]+)/g</span>, (_, issue) =&gt; &#123;</span><br><span class="line">        issues.push(issue)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`[#<span class="subst">$&#123;issue&#125;</span>](<span class="subst">$&#123;url&#125;</span><span class="subst">$&#123;issue&#125;</span>)`</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (context.host) &#123;</span><br><span class="line">      <span class="comment">// User URLs.</span></span><br><span class="line">      commit.subject = commit.subject.replace(</span><br><span class="line">        /\B@([a-z0<span class="number">-9</span>](?:-?[a-z0<span class="number">-9</span>/])&#123;<span class="number">0</span>,<span class="number">38</span>&#125;)/g,</span><br><span class="line">        (_, username) =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (username.includes(<span class="string">'/'</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`@<span class="subst">$&#123;username&#125;</span>`</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">`[@<span class="subst">$&#123;username&#125;</span>](<span class="subst">$&#123;context.host&#125;</span>/<span class="subst">$&#123;username&#125;</span>)`</span></span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">    commit.subject = <span class="string">`<span class="subst">$&#123;commit.subject&#125;</span> (by @<span class="subst">$&#123;commit.committer.name&#125;</span>)`</span></span><br><span class="line">  &#125; <span class="comment">// remove references that already appear in the subject</span></span><br><span class="line">  commit.references = commit.references.filter(<span class="function">(<span class="params">reference</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (issues.indexOf(reference.issue) === <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> commit</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  branches: <span class="string">'master'</span>,</span><br><span class="line">  parserOpts,</span><br><span class="line">  writerOpts: &#123; <span class="attr">transform</span>: customTransform &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">'@semantic-release/commit-analyzer'</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        preset: <span class="string">'angular'</span>,</span><br><span class="line">        releaseRules: [</span><br><span class="line">          &#123; <span class="attr">type</span>: <span class="string">'docs'</span>, <span class="attr">scope</span>: <span class="string">'README'</span>, <span class="attr">release</span>: <span class="string">'patch'</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">type</span>: <span class="string">'refactor'</span>, <span class="attr">release</span>: <span class="string">'patch'</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">type</span>: <span class="string">'style'</span>, <span class="attr">release</span>: <span class="string">'patch'</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">type</span>: <span class="string">'test'</span>, <span class="attr">release</span>: <span class="string">'patch'</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">type</span>: <span class="string">'build'</span>, <span class="attr">release</span>: <span class="string">'patch'</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">type</span>: <span class="string">'ci'</span>, <span class="attr">release</span>: <span class="string">'patch'</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'@semantic-release/release-notes-generator'</span>,</span><br><span class="line">    [<span class="string">'@semantic-release/changelog'</span>, &#123; <span class="attr">changelogFile</span>: <span class="string">'CHANGELOG.md'</span> &#125;],</span><br><span class="line">    <span class="string">'@semantic-release/npm'</span>,</span><br><span class="line">    [</span><br><span class="line">      <span class="string">'@semantic-release/git'</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        assets: [<span class="string">'package.json'</span>, <span class="string">'CHANGELOG.md'</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      <span class="string">'@semantic-release/gitlab'</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        gitlabUrl: <span class="string">'http://git.example.com'</span>,</span><br><span class="line">        assets: [],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®Œæˆ  .gitlab-ci.yml  é…ç½®å¦‚ä¸‹ï¼ˆä»…éƒ¨åˆ†å…³é”®çš„é…ç½®ç‰‡æ®µï¼‰:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stages:</span></span><br><span class="line">Â  Â  <span class="bullet">-</span> <span class="string">lint</span></span><br><span class="line">Â  Â  <span class="bullet">-</span> <span class="string">release</span></span><br><span class="line"><span class="attr">commitlint:</span></span><br><span class="line">Â  Â  <span class="attr">stage:</span> <span class="string">lint</span></span><br><span class="line">Â  Â  <span class="attr">rules:</span></span><br><span class="line">Â  Â  Â  Â  <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">'$CI_COMMIT_TITLE =~ /^chore\(release\)/'</span></span><br><span class="line">Â  Â  Â  Â  Â  <span class="attr">when:</span> <span class="string">never</span></span><br><span class="line">Â  Â  Â  Â  <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">'$CI_COMMIT_TITLE =~ /^Merge branch/'</span></span><br><span class="line">Â  Â  Â  Â  Â  <span class="attr">when:</span> <span class="string">never</span></span><br><span class="line">Â  Â  Â  Â  <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">$CI_COMMIT_BRANCH</span> <span class="string">==</span> <span class="string">$CI_DEFAULT_BRANCH</span> <span class="comment"># ä¸€èˆ¬å½“åˆ†æ”¯masteræœ‰ push æˆ– merge æ—¶æ‰ä¼šæ‰§è¡Œè¯¥å·¥ä½œ</span></span><br><span class="line">Â  Â  <span class="attr">script:</span></span><br><span class="line">Â  Â  Â  Â  <span class="bullet">-</span> <span class="string">sh</span> <span class="string">bin/commitlint-gitlab-ci.sh</span></span><br><span class="line"><span class="attr">release:</span></span><br><span class="line">Â  Â  <span class="attr">stage:</span> <span class="string">release</span></span><br><span class="line">Â  Â  <span class="attr">rules:</span></span><br><span class="line">Â  Â  Â  Â  <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">$CI_COMMIT_BRANCH</span> <span class="string">==</span> <span class="string">$CI_DEFAULT_BRANCH</span></span><br><span class="line">Â  Â  <span class="attr">script:</span></span><br><span class="line">Â  Â  Â  Â  <span class="bullet">-</span> <span class="string">semantic-release</span></span><br></pre></td></tr></table></figure>

<p>commitlint è„šæœ¬è¯·å‚è€ƒ<a href="https://gitlab.com/dmoonfire/commitlint-gitlab-ci/-/blob/main/bin/commitlint-gitlab-ci.sh" target="_blank" rel="noopener">commitlint-gitlab-ci.sh</a></p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†é€šè¿‡ CI è‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬å·å’Œå‘å¸ƒæ—¥å¿—çš„éœ€æ±‚ï¼Œå¤§å¤§èŠ‚çœäº†äººåŠ›ï¼ŒåŒæ—¶ï¼Œè¿˜ç•™ä¸‹äº†å‘å¸ƒç—•è¿¹ï¼Œæ–¹ä¾¿è¿½æº¯å†å²ç‰ˆæœ¬ã€‚<br>å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸Šè¿°çš„é…ç½®å¹¶ä¸ä¼šä¿®æ”¹æºç éƒ¨åˆ†çš„ç‰ˆæœ¬å·é…ç½®å†…å®¹ï¼ˆå¦‚ build.gradle æˆ– package.json ç­‰ï¼‰ï¼Œå¦‚æœéœ€è¦è‡ªåŠ¨ç®¡ç†è¿™äº›åœ°æ–¹çš„ç‰ˆæœ¬ï¼Œä¸ git tag ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œå¯ä»¥å¼•å…¥@semantic-release/exec æ’ä»¶ï¼Œè‡ªå·±å†™è„šæœ¬ï¼Œé€šè¿‡è„šæœ¬è‡ªåŠ¨åŒ–ä¿®æ”¹è¿™äº›åœ°æ–¹çš„ç‰ˆæœ¬å·ã€‚<br>è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ semantic-release é»˜è®¤äº§ç”Ÿçš„ commit è®°å½•ä¸ºäº†é¿å…ä¸å¿…è¦çš„ CI æµç¨‹ï¼Œä¼šåœ¨ commit è®°å½•åŠ ä¸Š[skip ci]ï¼ˆè§ä¸Šé¢çš„æˆªå›¾ï¼‰æ¥è·³è¿‡ CIï¼Œå¦‚æœä½ çš„æµæ°´çº¿éœ€è¦ç”± git tag è§¦å‘ï¼Œå¯ä»¥é…ç½®@semantic-release/git æ’ä»¶ï¼Œè‡ªå®šä¹‰ commit è®°å½•ï¼Œå»æ‰[skip ci]ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/eventloop.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/eventloop.html" class="post-title-link" itemprop="url">EventLoopè§„èŒƒ é˜…è¯»å’Œæ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-08-07 00:00:00" itemprop="dateCreated datePublished" datetime="2023-08-07T00:00:00+08:00">2023-08-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å¼‚æ­¥çš„æ€è€ƒ"><a href="#å¼‚æ­¥çš„æ€è€ƒ" class="headerlink" title="å¼‚æ­¥çš„æ€è€ƒ"></a>å¼‚æ­¥çš„æ€è€ƒ</h2><p>æèµ·å¼‚æ­¥ï¼Œç›¸ä¿¡æ¯ä¸ªäººéƒ½çŸ¥é“ã€‚å¼‚æ­¥èƒŒåçš„â€œé å±±â€å°±æ˜¯ event loopsã€‚è¿™é‡Œçš„å¼‚æ­¥å‡†ç¡®çš„è¯´åº”è¯¥å«æµè§ˆå™¨çš„ event loops æˆ–è€…è¯´æ˜¯ javaScript è¿è¡Œç¯å¢ƒçš„ event loopsï¼Œå› ä¸º<a href="https://tc39.es/ecma262/" target="_blank" rel="noopener">ECMAScript</a>ä¸­æ²¡æœ‰ event loopsï¼Œevent loops æ˜¯åœ¨<a href="https://html.spec.whatwg.org/#event-loops" target="_blank" rel="noopener">HTML Standard</a>å®šä¹‰çš„ã€‚</p>
<h4 id="ï¼ˆ1ï¼‰å•çº¿ç¨‹çš„-JavaScript"><a href="#ï¼ˆ1ï¼‰å•çº¿ç¨‹çš„-JavaScript" class="headerlink" title="ï¼ˆ1ï¼‰å•çº¿ç¨‹çš„ JavaScript"></a>ï¼ˆ1ï¼‰å•çº¿ç¨‹çš„ JavaScript</h4><p>æˆ‘ä»¬çŸ¥é“ï¼ŒJavaScript æ˜¯ä¸€ç§å•çº¿ç¨‹è¯­è¨€ï¼Œå®ƒä¸»è¦ç”¨æ¥ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œ DOMã€‚<br>JavaScript æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„æ¦‚å¿µï¼Œè¿™å°±è§£å†³äº†ä»£ç é˜»å¡çš„é—®é¢˜ï¼š</p>
<pre><code>- åŒæ­¥ï¼šå¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è€…å°±èƒ½å¤Ÿå¾—åˆ°é¢„æœŸç»“æœï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯åŒæ­¥çš„ï¼›
- å¼‚æ­¥ï¼šå¦‚æœåœ¨å‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è€…è¿˜ä¸èƒ½å¤Ÿå¾—åˆ°é¢„æœŸç»“æœï¼Œè€Œæ˜¯éœ€è¦åœ¨å°†æ¥é€šè¿‡ä¸€å®šçš„æ‰‹æ®µå¾—åˆ°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯å¼‚æ­¥çš„ã€‚</code></pre><h5 id="é‚£å•çº¿ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ"><a href="#é‚£å•çº¿ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ" class="headerlink" title="é‚£å•çº¿ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ"></a>é‚£å•çº¿ç¨‹æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</h5><pre><code>åœ¨ JS è¿è¡Œçš„æ—¶å€™å¯èƒ½ä¼šé˜»æ­¢ UI æ¸²æŸ“ï¼Œè¿™è¯´æ˜äº†ä¸¤ä¸ªçº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚è¿™æ˜¯å› ä¸º JS å¯ä»¥ä¿®æ”¹ DOMï¼Œå¦‚æœåœ¨ JS æ‰§è¡Œçš„æ—¶å€™ UI çº¿ç¨‹è¿˜åœ¨å·¥ä½œï¼Œå°±å¯èƒ½å¯¼è‡´ä¸èƒ½å®‰å…¨çš„æ¸²æŸ“ UIã€‚
å¾—ç›Šäº JS æ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œå¯ä»¥è¾¾åˆ°èŠ‚çœå†…å­˜ï¼ŒèŠ‚çº¦ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶é—´çš„å¥½å¤„ã€‚</code></pre><h4 id="ï¼ˆ2ï¼‰å¤šçº¿ç¨‹çš„æµè§ˆå™¨"><a href="#ï¼ˆ2ï¼‰å¤šçº¿ç¨‹çš„æµè§ˆå™¨" class="headerlink" title="ï¼ˆ2ï¼‰å¤šçº¿ç¨‹çš„æµè§ˆå™¨"></a>ï¼ˆ2ï¼‰å¤šçº¿ç¨‹çš„æµè§ˆå™¨</h4><p>JS æ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨åŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹æƒ…ï¼Œé‚£ä¸ºä»€ä¹ˆæµè§ˆå™¨å¯ä»¥åŒæ—¶æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡å‘¢ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸ºæµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹çš„ï¼Œå½“ JS éœ€è¦æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œæµè§ˆå™¨ä¼šå¦å¤–å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaScript æ˜¯å•çº¿ç¨‹çš„æŒ‡çš„æ˜¯æ‰§è¡Œ JavaScript ä»£ç çš„çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œæ˜¯æµè§ˆå™¨æä¾›çš„ JavaScript å¼•æ“çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæµè§ˆå™¨ä¸­è¿˜æœ‰å®šæ—¶å™¨çº¿ç¨‹ã€ HTTP è¯·æ±‚çº¿ç¨‹ç­‰çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹ä¸»è¦ä¸æ˜¯æ¥æ‰§è¡Œ JS ä»£ç çš„ã€‚</p>
<p>æ¯”å¦‚ä¸»çº¿ç¨‹ä¸­éœ€è¦å‘é€æ•°æ®è¯·æ±‚ï¼Œå°±ä¼šæŠŠè¿™ä¸ªä»»åŠ¡äº¤ç»™å¼‚æ­¥ HTTP è¯·æ±‚çº¿ç¨‹å»æ‰§è¡Œï¼Œç­‰è¯·æ±‚æ•°æ®è¿”å›ä¹‹åï¼Œå†å°† callback é‡Œéœ€è¦æ‰§è¡Œçš„ JS å›è°ƒäº¤ç»™ JS å¼•æ“çº¿ç¨‹å»æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæµè§ˆå™¨æ‰æ˜¯çœŸæ­£æ‰§è¡Œå‘é€è¯·æ±‚è¿™ä¸ªä»»åŠ¡çš„è§’è‰²ï¼Œè€Œ JS åªæ˜¯è´Ÿè´£æ‰§è¡Œæœ€åçš„å›è°ƒå¤„ç†ã€‚æ‰€ä»¥è¿™é‡Œçš„å¼‚æ­¥ä¸æ˜¯ JS è‡ªèº«å®ç°çš„ï¼Œè€Œæ˜¯æµè§ˆå™¨ä¸ºå…¶æä¾›çš„èƒ½åŠ›ã€‚</p>
<p><img src="../images/eventloop/image.png" alt="alt text"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒChrome ä¸ä»…æ‹¥æœ‰å¤šä¸ªè¿›ç¨‹ï¼Œè¿˜æœ‰å¤šä¸ªçº¿ç¨‹ã€‚ä»¥æ¸²æŸ“è¿›ç¨‹ä¸ºä¾‹ï¼Œå°±åŒ…å« GUI æ¸²æŸ“çº¿ç¨‹ã€JS å¼•æ“çº¿ç¨‹ã€äº‹ä»¶è§¦å‘çº¿ç¨‹ã€å®šæ—¶å™¨è§¦å‘çº¿ç¨‹ã€å¼‚æ­¥ HTTP è¯·æ±‚çº¿ç¨‹ã€‚è¿™äº›çº¿ç¨‹ä¸º JS åœ¨æµè§ˆå™¨ä¸­å®Œæˆå¼‚æ­¥ä»»åŠ¡æä¾›äº†åŸºç¡€ã€‚</p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>æˆ‘ä»¬æ¥çœ‹çœ‹ event loop åœ¨ <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" target="_blank" rel="noopener">HTML Standard</a> ä¸­çš„å®šä¹‰ç« èŠ‚:</p>
<p>ç¬¬ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>ä¸ºäº†åè°ƒäº‹ä»¶ï¼Œç”¨æˆ·äº¤äº’ï¼Œè„šæœ¬ï¼Œæ¸²æŸ“ï¼Œç½‘ç»œç­‰ï¼Œç”¨æˆ·ä»£ç†å¿…é¡»ä½¿ç”¨æœ¬èŠ‚æ‰€è¿°çš„ event loopã€‚</p>
</blockquote>
<p><strong>äº‹ä»¶</strong>ï¼Œ<strong>ç”¨æˆ·äº¤äº’</strong>ï¼Œ<strong>è„šæœ¬</strong>ï¼Œ<strong>æ¸²æŸ“</strong>ï¼Œ<strong>ç½‘ç»œ</strong>è¿™äº›éƒ½æ˜¯æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ä¸œè¥¿ï¼Œä»–ä»¬éƒ½æ˜¯ç”± event loop åè°ƒçš„ã€‚è§¦å‘ä¸€ä¸ª click äº‹ä»¶ï¼Œè¿›è¡Œä¸€æ¬¡ ajax è¯·æ±‚ï¼ŒèƒŒåéƒ½æœ‰ event loop åœ¨è¿ä½œã€‚</p>
<h3 id="task-queues"><a href="#task-queues" class="headerlink" title="task queues"></a>task queues</h3><blockquote>
<p>ä¸€ä¸ª event loop æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª task é˜Ÿåˆ—ã€‚</p>
</blockquote>
<blockquote>
<p>å½“ç”¨æˆ·ä»£ç†å®‰æ’ä¸€ä¸ªä»»åŠ¡ï¼Œå¿…é¡»å°†è¯¥ä»»åŠ¡å¢åŠ åˆ°ç›¸åº”çš„ event loop çš„ä¸€ä¸ª tsak é˜Ÿåˆ—ä¸­ã€‚</p>
</blockquote>
<blockquote>
<p>æ¯ä¸€ä¸ª task éƒ½æ¥æºäºæŒ‡å®šçš„ä»»åŠ¡æºï¼Œæ¯”å¦‚å¯ä»¥ä¸ºé¼ æ ‡ã€é”®ç›˜äº‹ä»¶æä¾›ä¸€ä¸ª task é˜Ÿåˆ—ï¼Œå…¶ä»–äº‹ä»¶åˆæ˜¯ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—ã€‚å¯ä»¥ä¸ºé¼ æ ‡ã€é”®ç›˜äº‹ä»¶åˆ†é…æ›´å¤šçš„æ—¶é—´ï¼Œä¿è¯äº¤äº’çš„æµç•…ã€‚</p>
</blockquote>
<h3 id="å“ªäº›æ˜¯-task-ä»»åŠ¡æºå‘¢ï¼Ÿ"><a href="#å“ªäº›æ˜¯-task-ä»»åŠ¡æºå‘¢ï¼Ÿ" class="headerlink" title="å“ªäº›æ˜¯ task ä»»åŠ¡æºå‘¢ï¼Ÿ"></a>å“ªäº›æ˜¯ task ä»»åŠ¡æºå‘¢ï¼Ÿ</h3><p>è§„èŒƒåœ¨<a href="https://html.spec.whatwg.org/multipage/webappapis.html#generic-task-sources" target="_blank" rel="noopener">Generic task sources</a>ä¸­æœ‰æåŠï¼š</p>
<blockquote>
<p>DOM æ“ä½œä»»åŠ¡æºï¼š<br>æ­¤ä»»åŠ¡æºè¢«ç”¨æ¥ç›¸åº” dom æ“ä½œï¼Œä¾‹å¦‚ä¸€ä¸ªå…ƒç´ ä»¥éé˜»å¡çš„æ–¹å¼æ’å…¥æ–‡æ¡£ã€‚</p>
</blockquote>
<blockquote>
<p>ç”¨æˆ·äº¤äº’ä»»åŠ¡æºï¼š<br>æ­¤ä»»åŠ¡æºç”¨äºå¯¹ç”¨æˆ·äº¤äº’ä½œå‡ºååº”ï¼Œä¾‹å¦‚é”®ç›˜æˆ–é¼ æ ‡è¾“å…¥ã€‚å“åº”ç”¨æˆ·æ“ä½œçš„äº‹ä»¶ï¼ˆä¾‹å¦‚ clickï¼‰å¿…é¡»ä½¿ç”¨ task é˜Ÿåˆ—ã€‚</p>
</blockquote>
<blockquote>
<p>ç½‘ç»œä»»åŠ¡æºï¼š<br>ç½‘ç»œä»»åŠ¡æºè¢«ç”¨æ¥å“åº”ç½‘ç»œæ´»åŠ¨ã€‚</p>
</blockquote>
<blockquote>
<p>history traversal ä»»åŠ¡æºï¼š<br>å½“è°ƒç”¨ history.back()ç­‰ç±»ä¼¼çš„ api æ—¶ï¼Œå°†ä»»åŠ¡æ’è¿› task é˜Ÿåˆ—ã€‚</p>
</blockquote>
<p>task ä»»åŠ¡æºéå¸¸å®½æ³›ï¼Œæ¯”å¦‚ ajax çš„ onloadï¼Œclick äº‹ä»¶ï¼ŒåŸºæœ¬ä¸Šæˆ‘ä»¬ç»å¸¸ç»‘å®šçš„å„ç§äº‹ä»¶éƒ½æ˜¯ task ä»»åŠ¡æºï¼Œè¿˜æœ‰æ•°æ®åº“æ“ä½œï¼ˆIndexedDB ï¼‰ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ setTimeoutã€setIntervalã€setImmediate ä¹Ÿæ˜¯ task ä»»åŠ¡æºã€‚æ€»ç»“æ¥è¯´ task ä»»åŠ¡æºï¼š</p>
<ul>
<li>setTimeout</li>
<li>setInterval</li>
<li>setImmediate</li>
<li>I/O</li>
<li>UI rendering</li>
</ul>
<h3 id="microtask"><a href="#microtask" class="headerlink" title="microtask"></a>microtask</h3><blockquote>
<p>å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸æ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
</blockquote>
<blockquote>
<p>æ¯ä¸ªäº‹ä»¶å¾ªç¯éƒ½æœ‰ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæœ€åˆæ˜¯ç©ºçš„ã€‚å¾®ä»»åŠ¡æ˜¯ä¸€ç§å£è¯­åŒ–çš„æ–¹å¼ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡å¾®ä»»åŠ¡ç®—æ³•é˜Ÿåˆ—åˆ›å»ºçš„ä»»åŠ¡ã€‚</p>
</blockquote>
<blockquote>
<p>å¦‚æœåœ¨åˆæœŸæ‰§è¡Œæ—¶ï¼Œ<a href="https://html.spec.whatwg.org/multipage/webappapis.html#spin-the-event-loop" target="_blank" rel="noopener">spin the event loop</a>ï¼Œmicrotasks æœ‰å¯èƒ½è¢«ç§»åŠ¨åˆ°å¸¸è§„çš„ task é˜Ÿåˆ—ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œmicrotasks ä»»åŠ¡æºä¼šè¢« task ä»»åŠ¡æºæ‰€ç”¨ã€‚é€šå¸¸æƒ…å†µï¼Œtask ä»»åŠ¡æºå’Œ microtasks æ˜¯ä¸ç›¸å…³çš„ã€‚</p>
</blockquote>
<p>microtask é˜Ÿåˆ—å’Œ task é˜Ÿåˆ—æœ‰äº›ç›¸ä¼¼ï¼Œéƒ½æ˜¯å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œç”±æŒ‡å®šçš„ä»»åŠ¡æºå»æä¾›ä»»åŠ¡ï¼Œä¸åŒçš„æ˜¯ä¸€ä¸ª event loop é‡Œåªæœ‰ä¸€ä¸ª microtask é˜Ÿåˆ—ã€‚</p>
<p>HTML Standard æ²¡æœ‰å…·ä½“æŒ‡æ˜å“ªäº›æ˜¯ microtask ä»»åŠ¡æºï¼Œé€šå¸¸è®¤ä¸ºæ˜¯ microtask ä»»åŠ¡æºæœ‰ï¼š</p>
<ul>
<li>process.nextTick</li>
<li>promises</li>
<li>Object.observe</li>
<li>MutationObserver</li>
</ul>
<h2 id="å¤„ç†æµç¨‹ï¼ˆprocessing-modelï¼‰"><a href="#å¤„ç†æµç¨‹ï¼ˆprocessing-modelï¼‰" class="headerlink" title="å¤„ç†æµç¨‹ï¼ˆprocessing modelï¼‰"></a><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model" target="_blank" rel="noopener">å¤„ç†æµç¨‹ï¼ˆprocessing modelï¼‰</a></h2><ol>
<li><p>åœ¨ tasks é˜Ÿåˆ—ä¸­é€‰æ‹©æœ€è€çš„ä¸€ä¸ª taskï¼Œç”¨æˆ·ä»£ç†å¯ä»¥é€‰æ‹©ä»»ä½• task é˜Ÿåˆ—ï¼Œå¦‚æœæ²¡æœ‰å¯é€‰çš„ä»»åŠ¡ï¼Œåˆ™è·³åˆ°ä¸‹è¾¹çš„ microtasks æ­¥éª¤ã€‚(ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå®ä»»åŠ¡å¹¶æ‰§è¡Œ)</p>
<p>1.1 å°†ä¸Šè¾¹é€‰æ‹©çš„ task è®¾ç½®ä¸ºæ­£åœ¨è¿è¡Œçš„ task</p>
<p>1.2 Run: è¿è¡Œè¢«é€‰æ‹©çš„ taskã€‚</p>
<p>1.3 å°† event loop çš„ currently running task å˜ä¸º nullã€‚</p>
<p>1.4 ä» task é˜Ÿåˆ—é‡Œç§»é™¤å‰è¾¹è¿è¡Œçš„ taskã€‚</p>
</li>
<li><p>Microtasks: æ‰§è¡Œ <a href="https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint" target="_blank" rel="noopener">microtasks ä»»åŠ¡æ£€æŸ¥ç‚¹</a>ã€‚ï¼ˆæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œå¹¶æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœåœ¨å¾®ä»»åŠ¡çš„æ‰§è¡Œä¸­åˆåŠ å…¥äº†æ–°çš„å¾®ä»»åŠ¡ï¼Œä¹Ÿä¼šåœ¨è¿™ä¸€æ­¥ä¸€èµ·æ‰§è¡Œã€‚ï¼‰</p>
</li>
<li><p>è¿›å…¥æ›´æ–°æ¸²æŸ“é˜¶æ®µï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ¸²æŸ“ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª rendering opportunity çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¸€å®šæ¯ä¸€è½® event loop éƒ½ä¼šå¯¹åº”ä¸€æ¬¡æµè§ˆ å™¨æ¸²æŸ“ï¼Œè¦æ ¹æ®å±å¹•åˆ·æ–°ç‡ã€é¡µé¢æ€§èƒ½ã€é¡µé¢æ˜¯å¦åœ¨åå°è¿è¡Œæ¥å…±åŒå†³å®šï¼Œé€šå¸¸æ¥è¯´è¿™ä¸ªæ¸²æŸ“é—´éš”æ˜¯å›ºå®šçš„ã€‚ï¼ˆæ‰€ä»¥å¤šä¸ª task å¾ˆå¯èƒ½åœ¨ä¸€æ¬¡æ¸²æŸ“ä¹‹é—´æ‰§è¡Œï¼‰</p>
<ul>
<li>æµè§ˆå™¨ä¼šå°½å¯èƒ½çš„ä¿æŒå¸§ç‡ç¨³å®šï¼Œä¾‹å¦‚é¡µé¢æ€§èƒ½æ— æ³•ç»´æŒ 60fpsï¼ˆæ¯ 16.66ms æ¸²æŸ“ä¸€æ¬¡ï¼‰çš„è¯ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šé€‰æ‹© 30fps çš„æ›´æ–°é€Ÿç‡ï¼Œè€Œä¸æ˜¯å¶å°”ä¸¢å¸§ã€‚</li>
<li>å¦‚æœæµè§ˆå™¨ä¸Šä¸‹æ–‡ä¸å¯è§ï¼Œé‚£ä¹ˆé¡µé¢ä¼šé™ä½åˆ° 4fps å·¦å³ç”šè‡³æ›´ä½ã€‚</li>
<li>å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œä¹Ÿä¼šè·³è¿‡æ¸²æŸ“ï¼š<ul>
<li>æµè§ˆå™¨åˆ¤æ–­æ›´æ–°æ¸²æŸ“ä¸ä¼šå¸¦æ¥è§†è§‰ä¸Šçš„æ”¹å˜ã€‚</li>
<li>map of animation frame callbacks ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯å¸§åŠ¨ç”»å›è°ƒä¸ºç©ºï¼Œå¯ä»¥é€šè¿‡ requestAnimationFrame æ¥è¯·æ±‚å¸§åŠ¨ç”»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>å¦‚æœä¸Šè¿°çš„åˆ¤æ–­å†³å®šæœ¬è½®ä¸éœ€è¦æ¸²æŸ“ï¼Œé‚£ä¹ˆä¸‹é¢çš„å‡ æ­¥ä¹Ÿä¸ä¼šç»§ç»­è¿è¡Œï¼š</p>
</li>
</ol>
<blockquote>
<p>This step enables the user agent to prevent the steps below from running for other reasons, for example, to ensure certain tasks are executed immediately after each other, with only microtask checkpoints interleaved (and without, e.g., animation frame callbacks interleaved). Concretely, a user agent might wish to coalesce timer callbacks together, with no intermediate rendering updates.<br>æœ‰æ—¶å€™æµè§ˆå™¨å¸Œæœ›ä¸¤æ¬¡ã€Œå®šæ—¶å™¨ä»»åŠ¡ã€æ˜¯åˆå¹¶çš„ï¼Œä»–ä»¬ä¹‹é—´åªä¼šç©¿æ’ç€ microTask çš„æ‰§è¡Œï¼Œè€Œä¸ä¼šç©¿æ’å±å¹•æ¸²æŸ“ç›¸å…³çš„æµç¨‹</p>
</blockquote>
<ol start="5">
<li><p>å¯¹äºéœ€è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œå¦‚æœçª—å£çš„å¤§å°å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰§è¡Œç›‘å¬çš„ resize æ–¹æ³•ã€‚</p>
</li>
<li><p>å¯¹äºéœ€è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œå¦‚æœé¡µé¢å‘ç”Ÿäº†æ»šåŠ¨ï¼Œæ‰§è¡Œ scroll æ–¹æ³•ã€‚</p>
</li>
<li><p>å¯¹äºéœ€è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œæ‰§è¡Œå¸§åŠ¨ç”»å›è°ƒï¼Œä¹Ÿå°±æ˜¯ requestAnimationFrame çš„å›è°ƒã€‚ï¼ˆåæ–‡ä¼šè¯¦è§£ï¼‰</p>
</li>
<li><p>å¯¹äºéœ€è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œ æ‰§è¡Œ IntersectionObserver çš„å›è°ƒã€‚</p>
</li>
<li><p>å¯¹äºéœ€è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œé‡æ–°æ¸²æŸ“ç»˜åˆ¶ç”¨æˆ·ç•Œé¢ã€‚</p>
</li>
<li><p>åˆ¤æ–­ task é˜Ÿåˆ—å’Œ microTask é˜Ÿåˆ—æ˜¯å¦éƒ½ä¸ºç©ºï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œåˆ™è¿›è¡Œ Idle ç©ºé—²å‘¨æœŸçš„ç®—æ³•ï¼Œåˆ¤æ–­æ˜¯å¦è¦æ‰§è¡Œ requestIdleCallback çš„å›è°ƒå‡½æ•°ã€‚ï¼ˆåæ–‡ä¼šè¯¦è§£ï¼‰</p>
</li>
</ol>
<p>å¯¹äº resize å’Œ scroll æ¥è¯´ï¼Œå¹¶ä¸æ˜¯åˆ°äº†è¿™ä¸€æ­¥æ‰å»æ‰§è¡Œæ»šåŠ¨å’Œç¼©æ”¾ï¼Œé‚£å²‚ä¸æ˜¯è¦å»¶è¿Ÿå¾ˆå¤šï¼Ÿæµè§ˆå™¨å½“ç„¶ä¼šç«‹åˆ»å¸®ä½ æ»šåŠ¨è§†å›¾ï¼Œæ ¹æ® CSSOM è§„èŒƒæ‰€è®²ï¼Œæµè§ˆå™¨ä¼šä¿å­˜ä¸€ä¸ª pending scroll event targetsï¼Œç­‰åˆ°äº‹ä»¶å¾ªç¯ä¸­çš„ scroll è¿™ä¸€æ­¥ï¼Œå»æ´¾å‘ä¸€ä¸ªäº‹ä»¶åˆ°å¯¹åº”çš„ç›®æ ‡ä¸Šï¼Œé©±åŠ¨å®ƒå»æ‰§è¡Œç›‘å¬çš„å›è°ƒå‡½æ•°è€Œå·²ã€‚resize ä¹Ÿæ˜¯åŒç†ã€‚</p>
<h2 id="microtasks-æ£€æŸ¥ç‚¹ï¼ˆmicrotask-checkpointï¼‰"><a href="#microtasks-æ£€æŸ¥ç‚¹ï¼ˆmicrotask-checkpointï¼‰" class="headerlink" title="microtasks æ£€æŸ¥ç‚¹ï¼ˆmicrotask checkpointï¼‰"></a>microtasks æ£€æŸ¥ç‚¹ï¼ˆmicrotask checkpointï¼‰</h2><p>ä¸Šæ–‡ event loop å¤„ç†æµç¨‹ç¬¬ 2 æ­¥ï¼Œæ‰§è¡Œäº†ä¸€ä¸ª microtask checkpointï¼Œçœ‹çœ‹è§„èŒƒå¦‚ä½•æè¿° microtask checkpointï¼š</p>
<p>å½“ç”¨æˆ·ä»£ç†å»æ‰§è¡Œä¸€ä¸ª microtask checkpointï¼Œå¦‚æœ microtask checkpoint çš„ flagï¼ˆæ ‡è¯†ï¼‰ä¸º falseï¼Œç”¨æˆ·ä»£ç†å¿…é¡»è¿è¡Œä¸‹é¢çš„æ­¥éª¤ï¼š</p>
<ol>
<li>å°† microtask checkpoint çš„ flag è®¾ä¸º trueã€‚</li>
<li>Microtask queue handling: å¦‚æœ event loop çš„ microtask é˜Ÿåˆ—ä¸ºç©ºï¼Œç›´æ¥è·³åˆ°ç¬¬å…«æ­¥ï¼ˆDoneï¼‰ã€‚</li>
<li>åœ¨ microtask é˜Ÿåˆ—ä¸­é€‰æ‹©æœ€è€çš„ä¸€ä¸ªä»»åŠ¡ã€‚</li>
<li>å°†ä¸Šä¸€æ­¥é€‰æ‹©çš„ä»»åŠ¡è®¾ä¸º event loop çš„ currently running taskã€‚</li>
<li>è¿è¡Œé€‰æ‹©çš„ä»»åŠ¡ã€‚</li>
<li>å°† event loop çš„ currently running task å˜ä¸º nullã€‚</li>
<li>å°†å‰é¢è¿è¡Œçš„ microtask ä» microtask é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œç„¶åè¿”å›åˆ°ç¬¬äºŒæ­¥ï¼ˆMicrotask queue handlingï¼‰ã€‚</li>
<li>Done: æ¯ä¸€ä¸ª environment settings object å®ƒä»¬çš„ responsible event loop å°±æ˜¯å½“å‰çš„ event loopï¼Œä¼šç»™ environment settings object å‘ä¸€ä¸ª rejected promises çš„é€šçŸ¥ã€‚</li>
<li>æ¸…ç† IndexedDB çš„äº‹åŠ¡ã€‚</li>
<li>å°† microtask checkpoint çš„ flag è®¾ä¸º flaseã€‚</li>
</ol>
<p>microtask checkpoint æ‰€åšçš„å°±æ˜¯æ‰§è¡Œ microtask é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ã€‚ä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨ microtask checkpoint å‘¢?</p>
<ul>
<li>å½“ä¸Šä¸‹æ–‡æ‰§è¡Œæ ˆä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œä¸€ä¸ª microtask checkpointã€‚</li>
<li>åœ¨ event loop çš„ç¬¬å…­æ­¥ï¼ˆMicrotasks: Perform a microtask checkpointï¼‰æ‰§è¡Œ checkpointï¼Œä¹Ÿå°±æ˜¯åœ¨è¿è¡Œ task ä¹‹åï¼Œæ›´æ–°æ¸²æŸ“ä¹‹å‰ã€‚</li>
</ul>
<h2 id="å¤šä»»åŠ¡é˜Ÿåˆ—"><a href="#å¤šä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="å¤šä»»åŠ¡é˜Ÿåˆ—"></a>å¤šä»»åŠ¡é˜Ÿåˆ—</h2><p>ä¸Šæ–‡ä¹Ÿæåˆ°äº†ï¼Œæ¯ä¸€ä¸ª task éƒ½æ¥æºäºæŒ‡å®šçš„ä»»åŠ¡æºï¼Œ æ‰€ä»¥ task é˜Ÿåˆ—å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è±¡ä¸­çš„é‚£æ ·åªæœ‰ä¸€ä¸ªï¼Œæ ¹æ®è§„èŒƒé‡Œçš„æè¿°ï¼š</p>
<blockquote>
<p>An event loop has one or more task queues. For example, a user agent could have one task queue for mouse and key events (to which the user interaction task source is associated), and another to which all other task sources are associated. Then, using the freedom granted in the initial step of the event loop processing model, it could give keyboard and mouse events preference over other tasks three-quarters of the time, keeping the interface responsive but not starving other task queues. Note that in this setup, the processing model still enforces that the user agent would never process events from any one task source out of order.</p>
</blockquote>
<p>äº‹ä»¶å¾ªç¯ä¸­å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™äº›é˜Ÿåˆ—åˆ†åˆ«ä¸ºäº†å¤„ç†ï¼š</p>
<ol>
<li>é¼ æ ‡å’Œé”®ç›˜äº‹ä»¶</li>
<li>å…¶ä»–çš„ä¸€äº› Task</li>
</ol>
<p>æµè§ˆå™¨ä¼šåœ¨ä¿æŒä»»åŠ¡é¡ºåºçš„å‰æä¸‹ï¼Œå¯èƒ½åˆ†é…å››åˆ†ä¹‹ä¸‰çš„ä¼˜å…ˆæƒç»™é¼ æ ‡å’Œé”®ç›˜äº‹ä»¶ï¼Œä¿è¯ç”¨æˆ·çš„è¾“å…¥å¾—åˆ°æœ€é«˜ä¼˜å…ˆçº§çš„å“åº”ï¼Œè€Œå‰©ä¸‹çš„ä¼˜å…ˆçº§äº¤ç»™å…¶ä»– Taskï¼Œå¹¶ä¸”ä¿è¯ä¸ä¼šâ€œé¥¿æ­»â€å®ƒä»¬ã€‚</p>
<p>è¿™ä¸ªè§„èŒƒä¹Ÿå¯¼è‡´ vue çš„è¿™ä¸ª<a href="https://github.com/vuejs/vue/issues/3771" target="_blank" rel="noopener">Issue</a>ã€‚ç®€å•æè¿°ä¸€ä¸‹å°±æ˜¯é‡‡ç”¨äº† task å®ç°çš„ nextTickï¼Œåœ¨ç”¨æˆ·æŒç»­æ»šåŠ¨çš„æƒ…å†µä¸‹ nextTick ä»»åŠ¡è¢«å»¶åäº†å¾ˆä¹…æ‰å»æ‰§è¡Œï¼Œå¯¼è‡´åŠ¨ç”»è·Ÿä¸ä¸Šæ»šåŠ¨äº†ã€‚</p>
<p>è¿«äºæ— å¥ˆï¼Œå°¤å¤§è¿˜æ˜¯æ”¹å›äº† microTask å»å®ç° nextTickï¼Œç›®å‰æ¥è¯´ promise.then å¾®ä»»åŠ¡å·²ç»å¾ˆç¨³å®šå¹¶ä¸” vue3 å°±æ˜¯è¿™æ ·å®ç°çš„ï¼Œå¹¶ä¸” Chrome ä¹Ÿå·²ç»å®ç°äº† queueMicroTask è¿™ä¸ªå®˜æ–¹ APIã€‚æˆ‘ä»¬æƒ³è¦è°ƒç”¨å¾®ä»»åŠ¡é˜Ÿåˆ—çš„è¯ï¼Œä¹Ÿå¯ä»¥èŠ‚çœæ‰å®ä¾‹åŒ– Promise åœ¨å¼€é”€äº†ã€‚</p>
<p>ä»è¿™ä¸ª Issue çš„ä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç¨å¾®å»æ·±å…¥äº†è§£ä¸€ä¸‹è§„èŒƒè¿˜æ˜¯æ¯”è¾ƒæœ‰å¥½å¤„çš„ï¼Œä»¥å…åœ¨é‡åˆ°è¿™ç§æ¯”è¾ƒå¤æ‚çš„ Bug çš„æ—¶å€™ä¸€è„¸æ‡µé€¼ã€‚</p>
<h2 id="æ‰§è¡Œæ ˆï¼ˆJavaScript-execution-context-stackï¼‰"><a href="#æ‰§è¡Œæ ˆï¼ˆJavaScript-execution-context-stackï¼‰" class="headerlink" title="æ‰§è¡Œæ ˆï¼ˆJavaScript execution context stackï¼‰"></a>æ‰§è¡Œæ ˆï¼ˆJavaScript execution context stackï¼‰</h2><p>task å’Œ microtask éƒ½æ˜¯æ¨å…¥æ ˆä¸­æ‰§è¡Œçš„ï¼Œè¦å®Œæ•´äº†è§£ event loops è¿˜éœ€è¦è®¤è¯† JavaScript execution context stackï¼Œå®ƒçš„è§„èŒƒä½äº<a href="https://tc39.github.io/ecma262/#execution-context-stackã€‚" target="_blank" rel="noopener">https://tc39.github.io/ecma262/#execution-context-stackã€‚</a></p>
<p>javaScript æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹æœ‰ä¸€ä¸ªæ ˆï¼Œæ¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„ execution contextï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä¼šåŒ…å«ä¸€äº›å½“å‰å‡½æ•°çš„å‚æ•°ã€å±€éƒ¨å˜é‡ä¹‹ç±»çš„ä¿¡æ¯ï¼Œå®ƒä¼šè¢«æ¨å…¥æ ˆä¸­ï¼Œ running execution contextï¼ˆæ­£åœ¨æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ï¼‰å§‹ç»ˆå¤„äºæ ˆçš„é¡¶éƒ¨ã€‚å½“å‡½æ•°æ‰§è¡Œå®Œåï¼Œå®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»æ ˆå¼¹å‡ºã€‚</p>
<p><img src="../images/eventloop/image-1.png" alt="alt text"></p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'bar'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>)</span><br><span class="line">  bar()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œè¿‡ç¨‹ä¸­æ ˆçš„å˜åŒ–ï¼š<br><img src="../images/eventloop/image-2.png" alt="alt text"></p>
<h4 id="å®Œæ•´å¼‚æ­¥è¿‡ç¨‹"><a href="#å®Œæ•´å¼‚æ­¥è¿‡ç¨‹" class="headerlink" title="å®Œæ•´å¼‚æ­¥è¿‡ç¨‹"></a>å®Œæ•´å¼‚æ­¥è¿‡ç¨‹</h4><p>ä¸»çº¿ç¨‹ç±»ä¼¼ä¸€ä¸ªåŠ å·¥å‚ï¼Œå®ƒåªæœ‰ä¸€æ¡æµæ°´çº¿ï¼Œå¾…æ‰§è¡Œçš„ä»»åŠ¡å°±æ˜¯æµæ°´çº¿ä¸Šçš„åŸæ–™ï¼Œåªæœ‰å‰ä¸€ä¸ªåŠ å·¥å®Œï¼Œåä¸€ä¸ªæ‰èƒ½è¿›è¡Œã€‚event loops å°±æ˜¯æŠŠåŸæ–™æ”¾ä¸Šæµæ°´çº¿çš„å·¥äººã€‚åªè¦å·²ç»æ”¾åœ¨æµæ°´çº¿ä¸Šçš„ï¼Œå®ƒä»¬ä¼šè¢«ä¾æ¬¡å¤„ç†ï¼Œç§°ä¸ºåŒæ­¥ä»»åŠ¡ã€‚ä¸€äº›å¾…å¤„ç†çš„åŸæ–™ï¼Œå·¥äººä¼šæŒ‰ç…§å®ƒä»¬çš„ç§ç±»æ’åºï¼Œåœ¨é€‚å½“çš„æ—¶æœºæ”¾ä¸Šæµæ°´çº¿ï¼Œè¿™äº›ç§°ä¸ºå¼‚æ­¥ä»»åŠ¡ã€‚</p>
<p><img src="../images/eventloop/image-3.png" alt="alt text"></p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ª script æ ‡ç­¾çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> <span class="title">promise1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise1'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout1'</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span> <span class="title">promise2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise2'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">setTimeout2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout2'</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œè¿‡ç¨‹ï¼š</p>
<p>script é‡Œçš„ä»£ç è¢«åˆ—ä¸ºä¸€ä¸ª taskï¼Œæ”¾å…¥ task é˜Ÿåˆ—ã€‚</p>
<ul>
<li><p><strong>å¾ªç¯ 1</strong>ï¼š</p>
</li>
<li><p>ã€task é˜Ÿåˆ—ï¼šscript ï¼›microtask é˜Ÿåˆ—ï¼šã€‘</p>
<ul>
<li>1.ä» task é˜Ÿåˆ—ä¸­å–å‡º script ä»»åŠ¡ï¼Œæ¨å…¥æ ˆä¸­æ‰§è¡Œã€‚</li>
<li>2.promise1 åˆ—ä¸º microtaskï¼ŒsetTimeout1 åˆ—ä¸º taskï¼ŒsetTimeout2 åˆ—ä¸º taskã€‚</li>
</ul>
</li>
<li><p>task é˜Ÿåˆ—ï¼šsetTimeout1 setTimeout2ï¼›microtask é˜Ÿåˆ—ï¼špromise1ã€‘</p>
<ul>
<li>3.script ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œ microtask checkpointï¼Œå–å‡º microtask é˜Ÿåˆ—çš„ promise1 æ‰§è¡Œã€‚</li>
</ul>
</li>
<li><p><strong>å¾ªç¯ 2</strong>ï¼š</p>
</li>
<li><p>ã€task é˜Ÿåˆ—ï¼šsetTimeout1 setTimeout2ï¼›microtask é˜Ÿåˆ—ï¼šã€‘</p>
<ul>
<li>4.ä» task é˜Ÿåˆ—ä¸­å–å‡º setTimeout1ï¼Œæ¨å…¥æ ˆä¸­æ‰§è¡Œï¼Œå°† promise2 åˆ—ä¸º microtaskã€‚</li>
</ul>
</li>
<li><p>ã€task é˜Ÿåˆ—ï¼šsetTimeout2ï¼›microtask é˜Ÿåˆ—ï¼špromise2ã€‘</p>
<ul>
<li>5.æ‰§è¡Œ microtask checkpointï¼Œå–å‡º microtask é˜Ÿåˆ—çš„ promise2 æ‰§è¡Œã€‚</li>
</ul>
</li>
<li><p><strong>å¾ªç¯ 3</strong>ï¼š</p>
</li>
<li><p>ã€task é˜Ÿåˆ—ï¼šsetTimeout2ï¼›microtask é˜Ÿåˆ—ï¼šã€‘</p>
<ul>
<li>6.ä» task é˜Ÿåˆ—ä¸­å–å‡º setTimeout2ï¼Œæ¨å…¥æ ˆä¸­æ‰§è¡Œã€‚</li>
<li>7.setTimeout2 ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œ microtask checkpointã€‚</li>
</ul>
</li>
<li><p>ã€task é˜Ÿåˆ—ï¼šï¼›microtask é˜Ÿåˆ—ï¼šã€‘</p>
</li>
</ul>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ä»¥ä¸Šå°±æ˜¯å¯¹ event loop è§„èŒƒ å’Œä¸€äº›è¿è¡Œçš„æµç¨‹åšçš„æ€»ç»“ã€‚ä½†æ˜¯åŒ…æ‹¬ requestAnimationFrameï¼ŒrequestIdleCallback å’Œ æµè§ˆå™¨ä¸­ js çš„æ‰§è¡Œæœºåˆ¶ç­‰ç»†èŠ‚çš„æ€»ç»“å°†ä¼šå•ç‹¬å†™æ–‡ç« è¿›è¡Œå½’çº³æ€»ç»“ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/Gitlab%20CI_CD%20%E5%AE%9E%E8%B7%B5.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/Gitlab%20CI_CD%20%E5%AE%9E%E8%B7%B5.html" class="post-title-link" itemprop="url">Gitlab CI/CD å®è·µ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-07-20 00:00:00" itemprop="dateCreated datePublished" datetime="2023-07-20T00:00:00+08:00">2023-07-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>GitLab CI/CD æ˜¯ä¸€ä¸ªå†…ç½®åœ¨ GitLab ä¸­çš„å·¥å…·ï¼Œç”¨äºé€šè¿‡æŒç»­æ–¹æ³•è¿›è¡Œè½¯ä»¶å¼€å‘ï¼š</p>
<h5 id="Continuous-Integrationï¼ˆæŒç»­é›†æˆï¼‰"><a href="#Continuous-Integrationï¼ˆæŒç»­é›†æˆï¼‰" class="headerlink" title="Continuous Integrationï¼ˆæŒç»­é›†æˆï¼‰"></a>Continuous Integrationï¼ˆæŒç»­é›†æˆï¼‰</h5><p>å‡è®¾ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå…¶ä»£ç å­˜å‚¨åœ¨ GitLab çš„ Git ä»“åº“ä¸­ã€‚å¼€å‘äººå‘˜æ¯å¤©éƒ½è¦å¤šæ¬¡æ¨é€ä»£ç æ›´æ”¹ã€‚å¯¹äºæ¯æ¬¡å‘ä»“åº“çš„æ¨é€ï¼Œä½ éƒ½å¯ä»¥åˆ›å»ºä¸€ç»„è„šæœ¬æ¥è‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•ä½ çš„åº”ç”¨ç¨‹åºï¼Œä»è€Œå‡å°‘äº†å‘åº”ç”¨ç¨‹åºå¼•å…¥é”™è¯¯çš„æœºä¼šã€‚è¿™ç§åšæ³•ç§°ä¸ºæŒç»­é›†æˆï¼Œå¯¹äºæäº¤ç»™åº”ç”¨ç¨‹åºï¼ˆç”šè‡³æ˜¯å¼€å‘åˆ†æ”¯ï¼‰çš„æ¯é¡¹æ›´æ”¹ï¼Œå®ƒéƒ½ä¼šè‡ªåŠ¨è¿ç»­è¿›è¡Œæ„å»ºå’Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿æ‰€å¼•å…¥çš„æ›´æ”¹é€šè¿‡ä½ ä¸ºåº”ç”¨ç¨‹åºå»ºç«‹çš„æ‰€æœ‰æµ‹è¯•ï¼Œå‡†åˆ™å’Œä»£ç åˆè§„æ€§æ ‡å‡†ã€‚</p>
<h5 id="Continuous-Deliveryï¼ˆæŒç»­äº¤ä»˜ï¼‰"><a href="#Continuous-Deliveryï¼ˆæŒç»­äº¤ä»˜ï¼‰" class="headerlink" title="Continuous Deliveryï¼ˆæŒç»­äº¤ä»˜ï¼‰"></a>Continuous Deliveryï¼ˆæŒç»­äº¤ä»˜ï¼‰</h5><p>æŒç»­äº¤ä»˜æ˜¯è¶…è¶ŠæŒç»­é›†æˆçš„æ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚åº”ç”¨ç¨‹åºä¸ä»…ä¼šåœ¨æ¨é€åˆ°ä»£ç åº“çš„æ¯æ¬¡ä»£ç æ›´æ”¹æ—¶è¿›è¡Œæ„å»ºå’Œæµ‹è¯•ï¼Œè€Œä¸”ï¼Œå°½ç®¡éƒ¨ç½²æ˜¯æ‰‹åŠ¨è§¦å‘çš„ï¼Œä½†ä½œä¸ºä¸€ä¸ªé™„åŠ æ­¥éª¤ï¼Œå®ƒä¹Ÿå¯ä»¥è¿ç»­éƒ¨ç½²ã€‚æ­¤æ–¹æ³•å¯ç¡®ä¿è‡ªåŠ¨æ£€æŸ¥ä»£ç ï¼Œä½†éœ€è¦äººå·¥å¹²é¢„æ‰èƒ½ä»ç­–ç•¥ä¸Šæ‰‹åŠ¨è§¦å‘ä»¥å¿…è¾“æ­¤æ¬¡å˜æ›´ã€‚</p>
<h5 id="Continuous-Deploymentï¼ˆæŒç»­éƒ¨ç½²ï¼‰"><a href="#Continuous-Deploymentï¼ˆæŒç»­éƒ¨ç½²ï¼‰" class="headerlink" title="Continuous Deploymentï¼ˆæŒç»­éƒ¨ç½²ï¼‰"></a>Continuous Deploymentï¼ˆæŒç»­éƒ¨ç½²ï¼‰</h5><p>ä¸æŒç»­äº¤ä»˜ç±»ä¼¼ï¼Œä½†ä¸åŒä¹‹å¤„åœ¨äºï¼Œä½ æ— éœ€å°†å…¶æ‰‹åŠ¨éƒ¨ç½²ï¼Œè€Œæ˜¯å°†å…¶è®¾ç½®ä¸ºè‡ªåŠ¨éƒ¨ç½²ã€‚å®Œå…¨ä¸éœ€è¦äººå·¥å¹²é¢„å³å¯éƒ¨ç½²ä½ çš„åº”ç”¨ç¨‹åºã€‚</p>
<h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><p>ä¸ºäº†ä½¿ç”¨ GitLab CI/CDï¼Œä½ éœ€è¦ä¸€ä¸ªæ‰˜ç®¡åœ¨ GitLab ä¸Šçš„åº”ç”¨ç¨‹åºä»£ç åº“ï¼Œå¹¶ä¸”åœ¨æ ¹ç›®å½•ä¸­çš„.gitlab-ci.yml æ–‡ä»¶ä¸­æŒ‡å®šæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²çš„è„šæœ¬ã€‚</p>
<p>åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰è¦è¿è¡Œçš„è„šæœ¬ï¼Œå®šä¹‰åŒ…å«çš„ä¾èµ–é¡¹ï¼Œé€‰æ‹©è¦æŒ‰é¡ºåºè¿è¡Œçš„å‘½ä»¤å’Œè¦å¹¶è¡Œè¿è¡Œçš„å‘½ä»¤ï¼Œå®šä¹‰è¦åœ¨ä½•å¤„éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œä»¥åŠæŒ‡å®šæ˜¯å¦ è¦è‡ªåŠ¨è¿è¡Œè„šæœ¬æˆ–æ‰‹åŠ¨è§¦å‘è„šæœ¬ã€‚</p>
<p>ä¸ºäº†å¯è§†åŒ–å¤„ç†è¿‡ç¨‹ï¼Œå‡è®¾æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰è„šæœ¬ä¸åœ¨è®¡ç®—æœºçš„ç»ˆç«¯ä¸Šè¿è¡Œçš„å‘½ä»¤ç›¸åŒã€‚</p>
<p>ä¸€æ—¦ä½ å·²ç»æ·»åŠ äº†.gitlab-ci.yml åˆ°ä»“åº“ä¸­ï¼ŒGitLab å°†æ£€æµ‹åˆ°è¯¥æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨åä¸º GitLab Runner çš„å·¥å…·è¿è¡Œä½ çš„è„šæœ¬ã€‚è¯¥å·¥å…·çš„æ“ä½œä¸ç»ˆç«¯ç±»ä¼¼ã€‚</p>
<p>è¿™äº›è„šæœ¬è¢«åˆ†ç»„åˆ° jobsï¼Œå®ƒä»¬å…±åŒç»„æˆä¸€ä¸ª pipelineã€‚ä¸€ä¸ªæœ€ç®€å•çš„.gitlab-ci.yml æ–‡ä»¶å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">rubygems</span> <span class="string">ruby-dev</span> <span class="string">-y</span></span><br><span class="line"></span><br><span class="line"><span class="attr">run-test:</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ruby</span> <span class="string">--version</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>before_script å±æ€§å°†åœ¨è¿è¡Œä»»ä½•å†…å®¹ä¹‹å‰ä¸ºä½ çš„åº”ç”¨å®‰è£…ä¾èµ–ï¼Œä¸€ä¸ªåä¸º run-test çš„ jobï¼ˆä½œä¸šï¼‰å°†æ‰“å°å½“å‰ç³»ç»Ÿçš„ Ruby ç‰ˆæœ¬ã€‚äºŒè€…å…±åŒæ„æˆäº†åœ¨æ¯æ¬¡æ¨é€åˆ°ä»“åº“çš„ä»»ä½•åˆ†æ”¯æ—¶éƒ½ä¼šè¢«è§¦å‘çš„ pipelineï¼ˆç®¡é“ï¼‰ã€‚</p>
<p>GitLab CI/CD ä¸ä»…å¯ä»¥æ‰§è¡Œä½ è®¾ç½®çš„ jobï¼Œè¿˜å¯ä»¥æ˜¾ç¤ºæ‰§è¡ŒæœŸé—´å‘ç”Ÿçš„æƒ…å†µï¼Œæ­£å¦‚ä½ åœ¨ç»ˆç«¯çœ‹åˆ°çš„é‚£æ ·ï¼š<br><img src="/images/GitlabCI_CD.resources/2551D6FD-98FB-42FB-B217-232C6028B2AC.png" alt="74b8f022354a48a2a663a996ae2c1dd8"></p>
<h4 id="é€šè¿‡-GitLab-UI-æ‰€æœ‰çš„æ­¥éª¤éƒ½æ˜¯å¯è§†åŒ–çš„"><a href="#é€šè¿‡-GitLab-UI-æ‰€æœ‰çš„æ­¥éª¤éƒ½æ˜¯å¯è§†åŒ–çš„" class="headerlink" title="é€šè¿‡ GitLab UI æ‰€æœ‰çš„æ­¥éª¤éƒ½æ˜¯å¯è§†åŒ–çš„"></a>é€šè¿‡ GitLab UI æ‰€æœ‰çš„æ­¥éª¤éƒ½æ˜¯å¯è§†åŒ–çš„</h4><p><img src="/images/GitlabCI_CD.resources/E239A99B-76CC-4F14-9DA2-4286A51588B9.png" alt="aae548d462b9c6b5e8bab016b96c5512"></p>
<h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><h4 id="åˆ›å»ºä¸€ä¸ª-gitlab-ci-yml-æ–‡ä»¶"><a href="#åˆ›å»ºä¸€ä¸ª-gitlab-ci-yml-æ–‡ä»¶" class="headerlink" title="åˆ›å»ºä¸€ä¸ª.gitlab-ci.yml æ–‡ä»¶"></a>åˆ›å»ºä¸€ä¸ª.gitlab-ci.yml æ–‡ä»¶</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">lint</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">release</span></span><br><span class="line"><span class="attr">commitlint:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">lint</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">'$CI_COMMIT_TITLE =~ /^chore\(release\)/'</span></span><br><span class="line">      <span class="attr">when:</span> <span class="string">never</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">'$CI_COMMIT_TITLE =~ /^Merge branch/'</span></span><br><span class="line">      <span class="attr">when:</span> <span class="string">never</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">$CI_COMMIT_BRANCH</span> <span class="string">==</span> <span class="string">$CI_DEFAULT_BRANCH</span> <span class="comment"># ä¸€èˆ¬å½“åˆ†æ”¯masteræœ‰ push æˆ– merge æ—¶æ‰ä¼šæ‰§è¡Œè¯¥å·¥ä½œ</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">sh</span> <span class="string">bin/commitlint-gitlab-ci.sh</span></span><br><span class="line"><span class="attr">release:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">release</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">$CI_COMMIT_BRANCH</span> <span class="string">==</span> <span class="string">$CI_DEFAULT_BRANCH</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">semantic-release</span></span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®ä¸€ä¸ª-Runner"><a href="#é…ç½®ä¸€ä¸ª-Runner" class="headerlink" title="é…ç½®ä¸€ä¸ª Runner"></a>é…ç½®ä¸€ä¸ª Runner</h4><p>åœ¨ GitLab ä¸­ï¼ŒRunner è¿è¡Œä½ å®šä¹‰åœ¨.gitlab-ci.yml ä¸­çš„ä½œä¸šï¼ˆjobï¼‰<br>ä¸€ä¸ª Runner å¯ä»¥æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºã€ç‰©ç†æœºã€docker å®¹å™¨ï¼Œæˆ–è€…ä¸€ä¸ªå®¹å™¨é›†ç¾¤ GitLab ä¸ Runner ä¹‹é—´é€šè¿‡ API è¿›è¡Œé€šä¿¡ï¼Œå› æ­¤åªéœ€è¦ Runner æ‰€åœ¨çš„æœºå™¨æœ‰ç½‘ç»œå¹¶ä¸”å¯ä»¥è®¿é—® GitLab æœåŠ¡å™¨å³å¯<br>ä½ å¯ä»¥å»  <strong>Settings â” CI/CD</strong>  çœ‹æ˜¯å¦å·²ç»æœ‰ Runner å…³è”åˆ°ä½ çš„é¡¹ç›®ï¼Œè®¾ç½® Runner ç®€å•åˆç›´æ¥<br><img src="/images/GitlabCI_CD.resources/A9EF490C-2A96-495A-AEBC-135E32A9FAE1.png" alt="7b99f010133b6b0689a1dc90c2893831"></p>
<h4 id="æŸ¥çœ‹-pipeline-å’Œ-jobs-çŠ¶æ€"><a href="#æŸ¥çœ‹-pipeline-å’Œ-jobs-çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ pipeline å’Œ jobs çŠ¶æ€"></a>æŸ¥çœ‹ pipeline å’Œ jobs çŠ¶æ€</h4><p><img src="/images/GitlabCI_CD.resources/159D77C9-7C89-4B37-8A6A-9DB90473D0ED.png" alt="e57d2652f09e520231cae9358ac69e10"></p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å›¢é˜Ÿè®¡åˆ’ä½¿ç”¨ semantic-release è‡ªåŠ¨ç®¡ç†å‘å¸ƒç‰ˆæœ¬ï¼Œç»“åˆ Gitlab CI/CD æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„é€‰æ‹©ï¼Œå…·ä½“çš„å®è·µè¿‡ç¨‹å’Œå¿ƒå¾—ä¼šåœ¨åé¢åˆ†äº«ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/chrome%20performance%E9%9D%A2%E6%9D%BF.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/chrome%20performance%E9%9D%A2%E6%9D%BF.html" class="post-title-link" itemprop="url">chrome performance é¢æ¿è§£æ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-06-15 00:00:00" itemprop="dateCreated datePublished" datetime="2023-06-15T00:00:00+08:00">2023-06-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ¦‚å†µå›¾"><a href="#æ¦‚å†µå›¾" class="headerlink" title="æ¦‚å†µå›¾"></a>æ¦‚å†µå›¾</h2><p><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/B31D1703-5E66-4F19-8D12-448E4D283BC9.png" alt="71d6a82a01519413ca2a1be4b957c544"></p>
<h4 id="æ— ç—•æ¨¡å¼"><a href="#æ— ç—•æ¨¡å¼" class="headerlink" title="æ— ç—•æ¨¡å¼"></a>æ— ç—•æ¨¡å¼</h4><p>æ— ç—•æ¨¡å¼å¯ä»¥ä¿è¯ Chrome åœ¨ä¸€ä¸ªç›¸å¯¹å¹²å‡€çš„ç¯å¢ƒä¸‹è¿è¡Œï¼Œé¿å… chrome ä¸Šå®‰è£…çš„æ’ä»¶å½±å“æ€§èƒ½åˆ†æç»“æœã€‚<br>æ–‡ä»¶â€”&gt;æ‰“å¼€æ–°çš„æ— ç—•å¼çª—å£ï¼Œæˆ–ä½¿ç”¨å¿«æ·é”® ctrl + shift + N æ‰“å¼€æ— ç—•æ¨¡å¼ä¸‹çš„ chrome æ–°æ ‡ç­¾é¡µ</p>
<h4 id="æ€§èƒ½è®°å½•"><a href="#æ€§èƒ½è®°å½•" class="headerlink" title="æ€§èƒ½è®°å½•"></a>æ€§èƒ½è®°å½•</h4><p>ç‚¹å‡»é¢æ¿é‡Œçš„ â—‹ï¼Œå¯ä»¥è®°å½•è¿è¡Œæ—¶çš„æ€§èƒ½è®°å½•ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/8B1B5662-14CE-47BA-A799-07447D14021C.png" alt="0b82ba7820c6d3ec5b21fe563191a08d"></p>
<p>å†æ¬¡ç‚¹å‡» Record æˆ–è€…ç‚¹å‡» Stop åœæ­¢è®°å½•ã€‚</p>
<h4 id="åŠ è½½æ—¶æ€§èƒ½è®°å½•å½•åˆ¶"><a href="#åŠ è½½æ—¶æ€§èƒ½è®°å½•å½•åˆ¶" class="headerlink" title="åŠ è½½æ—¶æ€§èƒ½è®°å½•å½•åˆ¶"></a>åŠ è½½æ—¶æ€§èƒ½è®°å½•å½•åˆ¶</h4><p>è‹¥è¦åˆ†æé¡µé¢è®°è½½æ—¶æ€§èƒ½éœ€è¦å½•åˆ¶åŠ è½½æ—¶æ€§èƒ½ã€‚</p>
<ol>
<li>æ‰“å¼€å¾…åˆ†ææ€§èƒ½çš„é¡µé¢ã€‚</li>
<li>æ‰“å¼€ Devtools ä¸­ Performance çª—å£ã€‚</li>
<li>ç‚¹å‡»å·¦ä¸Šè§’é‡æ–°åŠ è½½æŒ‰é’®ã€‚DevTools ä¼šè‡ªåŠ¨è®°å½•é¡µé¢åŠ è½½æ˜¯å„é¡¹æ€§èƒ½æŒ‡æ ‡ï¼ŒåŠ è½½å®Œæˆå‡ ç§’åè‡ªåŠ¨åœæ­¢è®°å½•ã€‚<br>Devtools è®°å½•ä¼šè‡ªåŠ¨å¢åŠ <br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/8BE55FF4-23D8-4373-9700-6FC306487719.png" alt="bcc3faa215dab1b20aefba15f42fa29d"></li>
</ol>
<p>é¡µé¢åŠ è½½æ—¶è®°å½•<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/2E1306AE-F26B-4DE5-8E02-96106AA7CA11.png" alt="8faf902b1637f885df323e7791713c33"></p>
<h4 id="æ¸…é™¤è®°å½•"><a href="#æ¸…é™¤è®°å½•" class="headerlink" title="æ¸…é™¤è®°å½•"></a>æ¸…é™¤è®°å½•</h4><p>æ¸…é™¤ Performance çª—å£ä¸­çš„è®°å½•æ•°æ®ã€‚</p>
<h4 id="æŠ“å–è¿è¡Œæ—¶å±å¹•å¿«ç…§"><a href="#æŠ“å–è¿è¡Œæ—¶å±å¹•å¿«ç…§" class="headerlink" title="æŠ“å–è¿è¡Œæ—¶å±å¹•å¿«ç…§"></a>æŠ“å–è¿è¡Œæ—¶å±å¹•å¿«ç…§</h4><p>ç‚¹é€‰ Screenshots é€‰é¡¹å¼€å¯ä¸ºæ¯ä¸€å¸§è®°å½•å±å¹•å¿«ç…§åŠŸèƒ½ã€‚</p>
<h4 id="æŸ¥çœ‹å†…å­˜åº¦é‡å€¼"><a href="#æŸ¥çœ‹å†…å­˜åº¦é‡å€¼" class="headerlink" title="æŸ¥çœ‹å†…å­˜åº¦é‡å€¼"></a>æŸ¥çœ‹å†…å­˜åº¦é‡å€¼</h4><p>ç‚¹é€‰ Memory é€‰é¡¹æ‰“å¼€å†…å­˜åº¦é‡åŠŸèƒ½ã€‚<br>DevTools åœ¨ Summary é¢æ¿ä¸Šä¾§æ˜¾ç¤ºä¸€ä¸ªæ–°çš„ Memory å›¾è¡¨ã€‚åœ¨ NET å›¾è¡¨ä¸‹è¾¹ä¹Ÿæ˜¾ç¤ºä¸€ä¸ª HEAP å›¾è¡¨ã€‚HEAP å›¾è¡¨æä¾›çš„ä¿¡æ¯åŒ Memory é¢æ¿ä¸­ JS Heap æä¾›çš„ä¿¡æ¯ç›¸åŒã€‚</p>
<h4 id="å¼€å¯åŠ é€Ÿæ¸²æŸ“å·¥å…·"><a href="#å¼€å¯åŠ é€Ÿæ¸²æŸ“å·¥å…·" class="headerlink" title="å¼€å¯åŠ é€Ÿæ¸²æŸ“å·¥å…·"></a>å¼€å¯åŠ é€Ÿæ¸²æŸ“å·¥å…·</h4><p>ç‚¹é€‰ Enable advanced paint instrumentation é€‰é¡¹ï¼ˆä¼šå¸¦æ¥å¤§é‡çš„æ€§èƒ½å¼€é”€ï¼‰</p>
<h4 id="æ§åˆ¶å½•åˆ¶è¿‡ç¨‹ä¸­-CPU-å·¥ä½œé¢‘ç‡"><a href="#æ§åˆ¶å½•åˆ¶è¿‡ç¨‹ä¸­-CPU-å·¥ä½œé¢‘ç‡" class="headerlink" title="æ§åˆ¶å½•åˆ¶è¿‡ç¨‹ä¸­ CPU å·¥ä½œé¢‘ç‡"></a>æ§åˆ¶å½•åˆ¶è¿‡ç¨‹ä¸­ CPU å·¥ä½œé¢‘ç‡</h4><p>å°† CPU è®¾ç½®ä¸ºéœ€è¦çš„è¿ç®—é€Ÿåº¦æ¨¡å¼ã€‚<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/9DD1F5C8-9131-4F02-BDA0-8D5DCB6095A3.png" alt="886c6b4d80132d8e286af2d6ed89cdb9"></p>
<p>CPU å·¥ä½œé¢‘ç‡çš„æ§åˆ¶ç»“æœè·Ÿå®é™…ä½¿ç”¨çš„æœºå™¨èƒ½åŠ›æœ‰å…³ã€‚ä¾‹å¦‚ï¼Œ4x slowdown é€‰é¡¹ä¼šä½¿ä½ æœ¬åœ° CPU è¿ç®—é€Ÿç‡æ¯”æ­£å¸¸æƒ…å†µä¸‹é™ä½ 4 å€ã€‚ä¸åŒè®¾å¤‡ç”±äºè®¾è®¡æ¶æ„ä¸åŒï¼ŒDevtools ä¸èƒ½ç²¾ç¡®æ¨¡æ‹Ÿç§»åŠ¨ç«¯è®¾å¤‡çš„ CPU è¿ç®—æ¨¡å¼ã€‚</p>
<h4 id="ä¿å­˜è®°å½•"><a href="#ä¿å­˜è®°å½•" class="headerlink" title="ä¿å­˜è®°å½•"></a>ä¿å­˜è®°å½•</h4><p><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/F4D6D133-2769-4173-9090-79276AFC56D4.png" alt="da01643afd3f94a7927b96b2ddd7a044"><br>ä¼šç”Ÿæˆ JSON æ–‡ä»¶</p>
<h4 id="åŠ è½½è®°å½•"><a href="#åŠ è½½è®°å½•" class="headerlink" title="åŠ è½½è®°å½•"></a>åŠ è½½è®°å½•</h4><p>å•å‡»é¼ æ ‡å³é”®é€‰æ‹© Load Profile åŠ è½½è®°å½•</p>
<h2 id="åˆ†ææ€§èƒ½è®°å½•"><a href="#åˆ†ææ€§èƒ½è®°å½•" class="headerlink" title="åˆ†ææ€§èƒ½è®°å½•"></a>åˆ†ææ€§èƒ½è®°å½•</h2><p>è¿è¡Œæ—¶æˆ–è€…åŠ è½½æ—¶æ€§èƒ½å½•åˆ¶ç»“æŸåï¼Œåœ¨ Performance çª—å£ä¸­ä¼šæ˜¾ç¤ºç›¸å…³æ•°æ®ï¼Œä»è€Œå¯¹äºè®°å½•è¿‡ç¨‹ä¸­çš„æƒ…å†µè¿›è¡Œåˆ†æã€‚</p>
<h4 id="é€‰æ‹©è®°å½•ä¸­çš„ä¸€éƒ¨åˆ†"><a href="#é€‰æ‹©è®°å½•ä¸­çš„ä¸€éƒ¨åˆ†" class="headerlink" title="é€‰æ‹©è®°å½•ä¸­çš„ä¸€éƒ¨åˆ†"></a>é€‰æ‹©è®°å½•ä¸­çš„ä¸€éƒ¨åˆ†</h4><p>åœ¨ Overview çª—å£ä¸­ï¼Œå¯ä»¥é€‰ä¸­è®°å½•çš„æŸä¸€éƒ¨åˆ†ã€‚ Overview çª—å£æŒ‡çš„æ˜¯åŒ…å« FPS, CPU å’Œ NET å›¾è¡¨éƒ¨åˆ†ã€‚<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/7D7EC5FB-7086-4767-99DB-4BCB7AE4E430.png" alt="3c66d685cee9f55228ca867b5a07a88e"></p>
<h4 id="æŸ¥çœ‹ä¸»çº¿ç¨‹æ´»åŠ¨"><a href="#æŸ¥çœ‹ä¸»çº¿ç¨‹æ´»åŠ¨" class="headerlink" title="æŸ¥çœ‹ä¸»çº¿ç¨‹æ´»åŠ¨"></a>æŸ¥çœ‹ä¸»çº¿ç¨‹æ´»åŠ¨</h4><p>åˆ©ç”¨ Main åŒºåŸŸæŸ¥çœ‹é¡µé¢ä¸»çº¿ç¨‹åŠ è½½æ—¶çš„ä¸»è¦æ´»åŠ¨ã€‚<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/A2BE4509-9F3E-4AAC-90D2-E0F68820471A.png" alt="26247567fd6f9281d4a16d8fcbcba32f"></p>
<p>ç‚¹å‡»æŸä¸€å‡½æ•°åœ¨ Summary çª—å£ä¸­æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚å¦‚å›¾ä¸­æ‰€ç¤º DevTools é€‰ä¸­_getRequestData äº‹ä»¶ã€‚<br>DevTools é‡‡ç”¨éšæœºçš„é¢œè‰²æ ‡è¯†è„šæœ¬ä¿¡æ¯ï¼Œå¦‚ä¸Šé¢å›¾ä¸­æµ…ç»¿è‰²æ ‡è¯†å‡½æ•°è°ƒç”¨ï¼Œæ·±é»„è‰²æ ‡è¯†è„šæœ¬æ´»åŠ¨ã€‚<br>è‹¥æƒ³éšè—ç«ç„°å›¾ä¸­çš„ JavaScript ä¸­è°ƒç”¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹å‰é¢ä»‹ç»çš„ç¦ç”¨ JavaScript æ ·ä¾‹åŠŸèƒ½ã€‚è‹¥ç¦ç”¨ JavaScript æ ·ä¾‹åŠŸèƒ½ï¼Œä½ åªå¯ä»¥çœ‹åˆ°åˆå§‹è°ƒç”¨äº‹ä»¶ã€‚æ¯”å¦‚ï¼Œå›¾ä¸­æ ‡è¯†çš„ Timer fired å’Œ Function Call ã€‚</p>
<h4 id="åœ¨è¡¨æ ¼ä¸­æŸ¥çœ‹æ´»åŠ¨"><a href="#åœ¨è¡¨æ ¼ä¸­æŸ¥çœ‹æ´»åŠ¨" class="headerlink" title="åœ¨è¡¨æ ¼ä¸­æŸ¥çœ‹æ´»åŠ¨"></a>åœ¨è¡¨æ ¼ä¸­æŸ¥çœ‹æ´»åŠ¨</h4><p>å½•åˆ¶ç»“æŸåï¼Œåˆ©ç”¨ Main çª—å£ä¸­ä¿¡æ¯ä¸æ˜¯åˆ†ææ•°æ®çš„å”¯ä¸€æ–¹å¼ã€‚DevTools å¦å¤–æä¾›äº†ä¸‰ç§è¡¨æ ¼å¼åˆ†ææ´»åŠ¨æ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½æ˜¯ä»ä¸åŒçš„è§’åº¦å‡ºå‘:<br>è‹¥æƒ³åˆ†æé‚£äº›æ´»åŠ¨å ç”¨æ—¶é—´æ›´å¤šæ—¶ï¼Œå¯ä»¥åˆ©ç”¨ Bottom-Up çª—å£ã€‚<br>è‹¥æƒ³åˆ†æå¯¼è‡´æ›´å¤šæ´»åŠ¨çš„æ ¹æ´»åŠ¨æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ Call Treeã€‚<br>è‹¥æƒ³æŒ‰é¡ºåºåˆ†æè®°å½•ä¸­å‘ç”Ÿçš„æ´»åŠ¨æ—¶ï¼Œå¯ä»¥åˆ©ç”¨ Event Log çª—å£ã€‚</p>
<h4 id="æ ¹æ´»åŠ¨"><a href="#æ ¹æ´»åŠ¨" class="headerlink" title="æ ¹æ´»åŠ¨"></a>æ ¹æ´»åŠ¨</h4><p>æ ¹æ´»åŠ¨æŒ‡çš„æ˜¯æµè§ˆå™¨è§¦å‘çš„ä¸€ç³»åˆ—æµç¨‹ã€‚ä¾‹å¦‚ï¼Œå½“ä½ ç‚¹å‡»é¡µé¢å†…å®¹ï¼Œæµè§ˆå™¨è§¦å‘ä¸€ä¸ª Event ä½œä¸ºæ ¹æ´»åŠ¨ï¼Œè¯¥ Event å¯èƒ½å›è°ƒä¸€ä¸ªäº‹ä»¶å¤„ç†äº‹ä»¶ã€‚<br>åœ¨ Main é¢æ¿ä¸­çš„ç«ç„°å›¾ä¸­ï¼Œæ ¹æ´»åŠ¨å±•ç¤ºåœ¨ä¸Šéƒ¨ï¼Œåœ¨ Call Tree å’Œ Event Log é¢æ¿ä¸­ï¼Œæ ¹æ´»åŠ¨å±•ç¤ºåœ¨é¡¶å±‚ã€‚</p>
<h4 id="Call-Tree-æ ‡ç­¾é¡µ"><a href="#Call-Tree-æ ‡ç­¾é¡µ" class="headerlink" title="Call Tree æ ‡ç­¾é¡µ"></a>Call Tree æ ‡ç­¾é¡µ</h4><p>Call Tree æ ‡ç­¾é¡µä¸­å±•ç¤ºè®°å½•ä¸­è¢«é€‰ä¸­éƒ¨åˆ†çš„æ´»åŠ¨ä¿¡æ¯ã€‚<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/9E98C9B1-90D8-4D50-A6BC-FDCB4EB51B0F.png" alt="6f4e0500bac02ec6143b950c159c63ae"></p>
<p>å›¾ä¸­ Activity åˆ—ä¸­æ˜¾ç¤ºçš„ Timer firedã€ Paintã€Recalculate Style å’Œ Layout ä»£è¡¨æ ¹æ´»åŠ¨ã€‚å±‚çº§åµŒå¥—è¡¨ç¤ºä»£è¡¨å›è°ƒæ ˆã€‚å¦‚å›¾ä¸­ Function Call è°ƒç”¨ uï¼Œå†è°ƒç”¨ getImageUrlï¼Œç»§ç»­è°ƒç”¨ getLinkUrl ç­‰ç­‰ã€‚<br>Self Time è¡¨ç¤ºå¯¹åº”æ´»åŠ¨æ¶ˆè€—çš„æ—¶é—´ï¼ŒTotal Time è¡¨ç¤ºå¯¹åº”æ´»åŠ¨ä»¥åŠå­æ´»åŠ¨å…±åŒæ¶ˆè€—çš„æ—¶é—´ã€‚<br>ç‚¹å‡» Self Timeï¼ŒTotal Time æˆ–è€… Activity è¡¨å¤´åŒºåŸŸï¼Œå¯æŒ‰å¯¹åº”åˆ—æ’åºã€‚<br>åˆ©ç”¨ Filter è¾“å…¥æ¡†åŒºåŸŸï¼Œè¾“å…¥æ´»åŠ¨åè¿‡æ»¤äº‹ä»¶ã€‚<br>Grouping åˆ†ç»„èœå•é»˜è®¤ä¸º No Groupingï¼Œåˆ©ç”¨è¯¥åŠŸèƒ½å¯ä»¥æ ¹æ®ä¸åŒçš„åˆ†ç±»å°†æ´»åŠ¨è¿›è¡Œåˆ†ç»„ã€‚<br>ç‚¹å‡»å³ä¾§ Show Heaviest Stackï¼Œåœ¨å³ä¾§å±•ç¤ºå½“å‰é€‰ä¸­æ´»åŠ¨ä¸­å ç”¨æ—¶é—´æœ€å¤šçš„å­æ´»åŠ¨ä¿¡æ¯ã€‚</p>
<p><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/BBFE6629-C9A4-4901-A79C-3E850194B322.png" alt="6562aca6f7e21ca7a5746f1cff491455"></p>
<h4 id="Bottom-Up-æ ‡ç­¾é¡µ"><a href="#Bottom-Up-æ ‡ç­¾é¡µ" class="headerlink" title="Bottom-Up æ ‡ç­¾é¡µ"></a>Bottom-Up æ ‡ç­¾é¡µ</h4><p>åˆ©ç”¨ Bottom-Up æ ‡ç­¾æŸ¥çœ‹å ç”¨æœ€å¤šæ—¶é—´çš„æ´»åŠ¨ã€‚<br>Self Time è¡¨ç¤ºå¯¹åº”æ´»åŠ¨æ¶ˆè€—çš„æ—¶é—´ã€‚<br>Total Time è¡¨ç¤ºå¯¹åº”æ´»åŠ¨ä»¥åŠå­æ´»åŠ¨å…±åŒæ¶ˆè€—çš„æ—¶é—´ã€‚</p>
<h4 id="Event-Log-æ ‡ç­¾é¡µ"><a href="#Event-Log-æ ‡ç­¾é¡µ" class="headerlink" title="Event Log æ ‡ç­¾é¡µ"></a>Event Log æ ‡ç­¾é¡µ</h4><p>Event Log æ ‡ç­¾é¡µæŒ‰é¡ºåºå±•ç¤ºè®°å½•ä¸­å‘ç”Ÿçš„æ´»åŠ¨ã€‚<br>Start Time åˆ—è¡¨ç¤ºè¯¥é¡¹æ´»åŠ¨çš„å¼€å§‹æ—¶é—´ï¼Œè¯¥æ—¶é—´ç›¸å¯¹äºè®°å½•å¼€å§‹æ—¶é—´è®¡ç®—ã€‚ä¾‹å¦‚å›¾ä¸­é€‰ä¸­é¡¹å¼€å§‹æ—¶é—´ä¸º 1566.2 msï¼Œä»£è¡¨è¯¥æ´»åŠ¨åœ¨è®°å½•å¼€å§‹ä¹‹å 1566.2 ms åå¼€å§‹ã€‚<br>Self Time è¡¨ç¤ºå¯¹åº”æ´»åŠ¨æ¶ˆè€—çš„æ—¶é—´ã€‚<br>Total Time è¡¨ç¤ºå¯¹åº”æ´»åŠ¨ä»¥åŠå­æ´»åŠ¨å…±åŒæ¶ˆè€—çš„æ—¶é—´ã€‚<br>ç‚¹å‡» Start Time ã€Self Timeã€Total Time è¡¨å¤´åŒºåŸŸï¼Œå¯æŒ‰å¯¹åº”åˆ—æ’åºã€‚<br>åˆ©ç”¨ Filter è¾“å…¥æ¡†åŒºåŸŸï¼Œè¾“å…¥æ´»åŠ¨åè¿‡æ»¤äº‹ä»¶ã€‚<br>åˆ©ç”¨ Duration ä¸‹æ‹‰èœå•è¿‡æ»¤&gt;=1ms æˆ–è€…&gt;=15ms çš„æ´»åŠ¨ã€‚è¯¥èœå•é»˜è®¤é€‰ä¸­ All é€‰é¡¹ï¼Œå±•ç¤ºæ‰€æœ‰æ´»åŠ¨ã€‚<br>åˆ©ç”¨ Loadingã€Experienceã€Scriptingã€Renderingã€Painting é€‰é¡¹è¿›è¡Œåˆ†ç±»è¿‡æ»¤ã€‚<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/9278865D-99FC-4945-A7DA-55264A743F15.png" alt="58c29a0d627c26c7d9fc1afd80a348ef"></p>
<h4 id="åˆ†ææ¯ç§’ä¼ è¾“å¸§æ•°ï¼ˆFPSï¼‰"><a href="#åˆ†ææ¯ç§’ä¼ è¾“å¸§æ•°ï¼ˆFPSï¼‰" class="headerlink" title="åˆ†ææ¯ç§’ä¼ è¾“å¸§æ•°ï¼ˆFPSï¼‰"></a>åˆ†ææ¯ç§’ä¼ è¾“å¸§æ•°ï¼ˆFPSï¼‰</h4><ul>
<li>æŸ¥çœ‹ FPS å›¾è¡¨äº†è§£æ•´ä¸ªè®°å½•ä¸­ FPS çš„æ¦‚å†µã€‚</li>
<li>Frames æ¨¡å—æŸ¥çœ‹æ¯ä¸€å¸§æ—¶é—´æ¶ˆè€—ã€‚</li>
<li>åˆ©ç”¨ FPS meter å·¥å…·(MoreToolsâ€”&gt;Rendering)åœ¨é¡µé¢è¿è¡Œæ—¶å®æ—¶æŸ¥çœ‹ FPS ä¿¡æ¯ã€‚</li>
</ul>
<h4 id="FPS-å›¾è¡¨"><a href="#FPS-å›¾è¡¨" class="headerlink" title="FPS å›¾è¡¨"></a>FPS å›¾è¡¨</h4><p>FPS å›¾è¡¨æ˜¾ç¤ºäº†æ•´ä¸ªè®°å½•è¿‡ç¨‹ä¸­å¸§ç‡çš„æ¦‚å†µã€‚å›¾è¡¨ä¸­ç»¿è‰²æŠ˜çº¿è¶Šé«˜ä»£è¡¨å¸§ç‡è¶Šå¥½ã€‚<br>FPS æŠ˜çº¿å›¾ä¸Šæµ‹å‡ºç°çš„çº¢è‰²æ¨ªçº¿ä¸ºä¸€æ¡æ€§èƒ½è­¦ç¤ºçº¿ï¼Œè¡¨ç¤ºå¸§ç‡ä½äºè¯¥å€¼ä¼šä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 id="Frames-æ¨¡å—"><a href="#Frames-æ¨¡å—" class="headerlink" title="Frames æ¨¡å—"></a>Frames æ¨¡å—</h4><p>Frames æ¨¡å—æ¸…æ™°è¡¨æ˜æ¯ä¸ªå¸§æ¶ˆè€—æ—¶é—´ã€‚<br>é¼ æ ‡åœ¨æŸä¸€å¸§ä¸Šæ‚¬åœå¯ä»¥æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p>
<h4 id="æŸ¥çœ‹äº¤äº’ä¿¡æ¯"><a href="#æŸ¥çœ‹äº¤äº’ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹äº¤äº’ä¿¡æ¯"></a>æŸ¥çœ‹äº¤äº’ä¿¡æ¯</h4><p>åˆ©ç”¨ Interactions æ¨¡å—æŸ¥çœ‹å¹¶åˆ†æè®°å½•è¿‡ç¨‹ä¸­ç”¨æˆ·çš„äº¤äº’æ“ä½œã€‚</p>
<h4 id="æŸ¥çœ‹-GPU-æ´»åŠ¨"><a href="#æŸ¥çœ‹-GPU-æ´»åŠ¨" class="headerlink" title="æŸ¥çœ‹ GPU æ´»åŠ¨"></a>æŸ¥çœ‹ GPU æ´»åŠ¨</h4><p>åœ¨ GPU æ¨¡å—æŸ¥çœ‹ GPU æ´»åŠ¨ä¿¡æ¯<br><img src="/images/chromeperformance%E9%9D%A2%E6%9D%BF.resources/DCF59BFE-D663-4BF2-B581-1562C15B425E.png" alt="69c660e3d248b30ffc310f2813525e08"></p>
<h4 id="æŸ¥çœ‹æ …æ ¼æ´»åŠ¨"><a href="#æŸ¥çœ‹æ …æ ¼æ´»åŠ¨" class="headerlink" title="æŸ¥çœ‹æ …æ ¼æ´»åŠ¨"></a>æŸ¥çœ‹æ …æ ¼æ´»åŠ¨</h4><p>åœ¨ Raster æ¨¡å—æŸ¥çœ‹æ …æ ¼æ´»åŠ¨ä¿¡æ¯</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/%E5%89%8D%E7%AB%AF%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/%E5%89%8D%E7%AB%AF%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA.html" class="post-title-link" itemprop="url">å‰ç«¯è„šæ‰‹æ¶æ­å»º</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-05-04 00:00:00" itemprop="dateCreated datePublished" datetime="2023-05-04T00:00:00+08:00">2023-05-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºå…¬å¸æ ‡å‡†åŒ–äº§å“é€æ¸æˆç†Ÿï¼Œé¡¹ç›®è¶Šæ¥è¶Šå¤šï¼Œéœ€è¦ä¸€æ¬¾è„šæ‰‹æ¶é€šè¿‡ä¸šåŠ¡æ ‡å‡†åŒ–æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆé¡¹ç›®ï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜ä¸“æ³¨äºä¸šåŠ¡å¼€å‘ï¼Œé™ä½å¿ƒæ™ºæˆæœ¬ï¼Œæå‡å›¢é˜Ÿæ•ˆç‡ã€‚</p>
<p>å‚è€ƒäº†å¸¸ç”¨çš„è„šæ‰‹æ¶ï¼Œcreate-react-appã€vue-cliã€egg-init çš„å®ç°ï¼Œæ­å»ºå‡ºäº†ä¸€å¥—ç¬¦åˆå›¢é˜Ÿå®é™…æƒ…å†µçš„è„šæ‰‹æ¶å·¥å…·ã€‚</p>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p><strong>è„šæ‰‹æ¶å°±æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™è¯¢é—®ä¸€äº›ç®€å•çš„é—®é¢˜ï¼Œå¹¶ä¸”é€šè¿‡ç”¨æˆ·å›ç­”çš„ç»“æœå»æ¸²æŸ“å¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ã€‚</strong><br>åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é€šè¿‡å‘½ä»¤è¡Œäº¤äº’è¯¢é—®ç”¨æˆ·é—®é¢˜</li>
<li>æ‹‰å–è¿œç«¯æ ‡å‡†åŒ–æ¨¡æ¿</li>
<li>æ ¹æ®ç”¨æˆ·å›ç­”çš„ç»“æœç”Ÿæˆæ–‡ä»¶</li>
<li>è‡ªåŠ¨ä¸‹è½½ä¾èµ–</li>
</ol>
<h4 id="çƒ­é—¨è„šæ‰‹æ¶å·¥å…·åº“"><a href="#çƒ­é—¨è„šæ‰‹æ¶å·¥å…·åº“" class="headerlink" title="çƒ­é—¨è„šæ‰‹æ¶å·¥å…·åº“"></a>çƒ­é—¨è„šæ‰‹æ¶å·¥å…·åº“</h4><p><img src="/images/%E5%89%8D%E7%AB%AF%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA.resources/81447CFF-3772-41A2-9663-9BFE685C3473.png" alt="116d0e8220abc84e44593738478cbee7"></p>
<h2 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h2><h4 id="1-åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¦ç¬¦åˆè¦æ±‚"><a href="#1-åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¦ç¬¦åˆè¦æ±‚" class="headerlink" title="1. åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¦ç¬¦åˆè¦æ±‚"></a>1. åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¦ç¬¦åˆè¦æ±‚</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> currentNodeVersion = process.versions.node</span><br><span class="line"><span class="keyword">const</span> semver = currentNodeVersion.split(<span class="string">'.'</span>)</span><br><span class="line"><span class="keyword">const</span> major = semver[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">if</span> (major &lt; <span class="number">14</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(</span><br><span class="line">    <span class="string">'You are running Node '</span> +</span><br><span class="line">      currentNodeVersion +</span><br><span class="line">      <span class="string">'.\n'</span> +</span><br><span class="line">      <span class="string">'Create React App requires Node 14 or higher. \n'</span> +</span><br><span class="line">      <span class="string">'Please update your version of Node.'</span></span><br><span class="line">  )</span><br><span class="line">  process.exit(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-åˆ›å»ºè„šæ‰‹æ¶å¯åŠ¨å‘½ä»¤ï¼ˆä½¿ç”¨-commanderï¼‰"><a href="#2-åˆ›å»ºè„šæ‰‹æ¶å¯åŠ¨å‘½ä»¤ï¼ˆä½¿ç”¨-commanderï¼‰" class="headerlink" title="2. åˆ›å»ºè„šæ‰‹æ¶å¯åŠ¨å‘½ä»¤ï¼ˆä½¿ç”¨ commanderï¼‰"></a>2. åˆ›å»ºè„šæ‰‹æ¶å¯åŠ¨å‘½ä»¤ï¼ˆä½¿ç”¨ commanderï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> program = <span class="keyword">new</span> commander.Command(packageJson.name)</span><br><span class="line">  .version(packageJson.version)</span><br><span class="line">  .arguments(<span class="string">'&lt;project-directory&gt;'</span>)</span><br><span class="line">  .usage(<span class="string">`<span class="subst">$&#123;chalk.green(<span class="string">'&lt;project-directory&gt;'</span>)&#125;</span> [options]`</span>)</span><br><span class="line">  .action(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    projectName = name</span><br><span class="line">  &#125;)</span><br><span class="line">  .parse(process.argv)</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> projectName === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">'Please specify the project directory:'</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(</span><br><span class="line">    <span class="string">` Â <span class="subst">$&#123;chalk.cyan(program.name())&#125;</span> <span class="subst">$&#123;chalk.green(<span class="string">'&lt;project-directory&gt;'</span>)&#125;</span>`</span></span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'For example:'</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">` Â <span class="subst">$&#123;chalk.cyan(program.name())&#125;</span> <span class="subst">$&#123;chalk.green(<span class="string">'my-app'</span>)&#125;</span>`</span>)</span><br><span class="line">  process.exit(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-åˆ¤æ–­å½“å‰è„šæ‰‹æ¶ç‰ˆæœ¬æ˜¯å¦æ˜¯æœ€æ–°"><a href="#3-åˆ¤æ–­å½“å‰è„šæ‰‹æ¶ç‰ˆæœ¬æ˜¯å¦æ˜¯æœ€æ–°" class="headerlink" title="3. åˆ¤æ–­å½“å‰è„šæ‰‹æ¶ç‰ˆæœ¬æ˜¯å¦æ˜¯æœ€æ–°"></a>3. åˆ¤æ–­å½“å‰è„šæ‰‹æ¶ç‰ˆæœ¬æ˜¯å¦æ˜¯æœ€æ–°</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æœ€æ–°çš„version</span></span><br><span class="line"><span class="keyword">const</span> checkForLatestVersion = <span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    http</span><br><span class="line">      .get(url, (res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.statusCode === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> body = <span class="string">''</span></span><br><span class="line">          res.on(<span class="string">'data'</span>, (data) =&gt; (body += data))</span><br><span class="line">          res.on(<span class="string">'end'</span>, () =&gt; &#123;</span><br><span class="line">            resolve(<span class="built_in">JSON</span>.parse(body).version)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          reject()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(<span class="string">'error'</span>, () =&gt; &#123;</span><br><span class="line">        reject()</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkForLatestVersion(<span class="string">`<span class="subst">$&#123;host&#125;</span>create-my-app/latest`</span>)</span><br><span class="line">  .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> execSync(<span class="string">'npm view create-my-app version'</span>).toString().trim()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">latest</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (latest &amp;&amp; semver.lt(packageJson.version, latest)) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log()</span><br><span class="line">      <span class="built_in">console</span>.error(</span><br><span class="line">        chalk.yellow(</span><br><span class="line">          <span class="string">`You are running \`create-my-app\` <span class="subst">$&#123;packageJson.version&#125;</span>, which is behind the latest release (<span class="subst">$&#123;latest&#125;</span>).\n\n`</span> +</span><br><span class="line">            <span class="string">'We recommend always using the latest version of create-my-app if possible.'</span></span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line">      <span class="built_in">console</span>.log()</span><br><span class="line">      <span class="built_in">console</span>.log(</span><br><span class="line">        <span class="string">'The latest instructions for creating a new app can be found here:\n'</span> +</span><br><span class="line">          <span class="string">`<span class="subst">$&#123;host&#125;</span>-/web/detail/create-my-app`</span></span><br><span class="line">      )</span><br><span class="line">      <span class="built_in">console</span>.log()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      createApp()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="4-è¯¢é—®ç”¨æˆ·é—®é¢˜è·å–åˆ›å»ºæ‰€éœ€ä¿¡æ¯ï¼ˆä½¿ç”¨-inquirerï¼‰"><a href="#4-è¯¢é—®ç”¨æˆ·é—®é¢˜è·å–åˆ›å»ºæ‰€éœ€ä¿¡æ¯ï¼ˆä½¿ç”¨-inquirerï¼‰" class="headerlink" title="4. è¯¢é—®ç”¨æˆ·é—®é¢˜è·å–åˆ›å»ºæ‰€éœ€ä¿¡æ¯ï¼ˆä½¿ç”¨ inquirerï¼‰"></a>4. è¯¢é—®ç”¨æˆ·é—®é¢˜è·å–åˆ›å»ºæ‰€éœ€ä¿¡æ¯ï¼ˆä½¿ç”¨ inquirerï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getAnswers = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">Â  <span class="keyword">return</span> <span class="keyword">await</span> inquirer.prompt([</span><br><span class="line">Â  Â  &#123;</span><br><span class="line">Â  Â  Â  type: <span class="string">'input'</span>,</span><br><span class="line">Â  Â  Â  name: <span class="string">'projectZHName'</span>,</span><br><span class="line">Â  Â  Â  message: <span class="string">'è¯·è¾“å…¥é¡¹ç›®ä¸­æ–‡å'</span>,</span><br><span class="line">Â  Â  Â  <span class="keyword">default</span>: <span class="string">''</span>,</span><br><span class="line">Â  Â  &#125;,</span><br><span class="line">    ...,</span><br><span class="line">Â  Â  &#123;</span><br><span class="line">Â  Â  Â  type: <span class="string">'input'</span>,</span><br><span class="line">Â  Â  Â  name: <span class="string">'version'</span>,</span><br><span class="line">Â  Â  Â  message: <span class="string">'è¯·è¾“å…¥ç‰ˆæœ¬'</span>,</span><br><span class="line">Â  Â  Â  <span class="keyword">default</span>: <span class="string">'1.0.0'</span>,</span><br><span class="line">Â  Â  &#125;,</span><br><span class="line">Â  Â  &#123;</span><br><span class="line">Â  Â  Â  type: <span class="string">'input'</span>,</span><br><span class="line">Â  Â  Â  name: <span class="string">'author'</span>,</span><br><span class="line">Â  Â  Â  message: <span class="string">'è¯·è¾“å…¥åˆ›å»ºäºº(æ‹¼éŸ³å…¨æ‹¼)'</span>,</span><br><span class="line">Â  Â  Â  <span class="keyword">default</span>: <span class="string">''</span>,</span><br><span class="line">Â  Â  &#125;,</span><br><span class="line">Â  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-ä¸‹è½½è¿œç¨‹æ¨¡æ¿ï¼ˆä½¿ç”¨-hyperquest-æˆ–-download-git-repoï¼‰"><a href="#5-ä¸‹è½½è¿œç¨‹æ¨¡æ¿ï¼ˆä½¿ç”¨-hyperquest-æˆ–-download-git-repoï¼‰" class="headerlink" title="5. ä¸‹è½½è¿œç¨‹æ¨¡æ¿ï¼ˆä½¿ç”¨ hyperquest æˆ– download-git-repoï¼‰"></a>5. ä¸‹è½½è¿œç¨‹æ¨¡æ¿ï¼ˆä½¿ç”¨ hyperquest æˆ– download-git-repoï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> latest = <span class="keyword">await</span> checkForLatestVersion(</span><br><span class="line">  <span class="string">`<span class="subst">$&#123;host&#125;</span>my-frontend-template/latest`</span></span><br><span class="line">).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> execSync(<span class="string">'npm view my-frontend-template version'</span>).toString().trim()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> &#123; tmpdir, cleanup &#125; = <span class="keyword">await</span> getPackageInfo(</span><br><span class="line">  <span class="string">`<span class="subst">$&#123;host&#125;</span>my-frontend-template/-/my-frontend-template-<span class="subst">$&#123;latest&#125;</span>.tgz`</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> extractStream = <span class="function">(<span class="params">stream, dest</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    stream.pipe(</span><br><span class="line">      unpack(dest, (err) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          resolve(dest)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> getTemporaryDirectory = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Unsafe cleanup lets us recursively delete the directory if it contains</span></span><br><span class="line">    <span class="comment">// contents; by default it only allows removal if it's empty</span></span><br><span class="line">    tmp.dir(&#123; <span class="attr">unsafeCleanup</span>: <span class="literal">true</span> &#125;, (err, tmpdir, callback) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(&#123;</span><br><span class="line">          tmpdir: tmpdir,</span><br><span class="line">          cleanup: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              callback()</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ignored) &#123;</span><br><span class="line">              <span class="comment">// Callback might throw and fail, since it's a temp directory the</span></span><br><span class="line">              <span class="comment">// OS will clean it up eventually...</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getPackageInfo = <span class="function">(<span class="params">installPackage</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (installPackage.match(<span class="regexp">/^.+\.(tgz|tar\.gz)$/</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> getTemporaryDirectory().then(<span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> stream</span><br><span class="line">      <span class="keyword">if</span> (<span class="regexp">/^http/</span>.test(installPackage)) &#123;</span><br><span class="line">        stream = hyperquest(installPackage)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        stream = fsExtra.createReadStream(installPackage)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> extractStream(stream, obj.tmpdir).then(<span class="function"><span class="params">()</span> =&gt;</span> obj)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123; <span class="attr">name</span>: installPackage &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-æ ¹æ®éœ€è¦è¯»å–ä¿®æ”¹æ–‡ä»¶å’Œå¤åˆ¶æ–‡ä»¶"><a href="#6-æ ¹æ®éœ€è¦è¯»å–ä¿®æ”¹æ–‡ä»¶å’Œå¤åˆ¶æ–‡ä»¶" class="headerlink" title="6. æ ¹æ®éœ€è¦è¯»å–ä¿®æ”¹æ–‡ä»¶å’Œå¤åˆ¶æ–‡ä»¶"></a>6. æ ¹æ®éœ€è¦è¯»å–ä¿®æ”¹æ–‡ä»¶å’Œå¤åˆ¶æ–‡ä»¶</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; tmpdir, cleanup &#125; = <span class="keyword">await</span> getPackageInfo(</span><br><span class="line">Â  Â  <span class="string">`<span class="subst">$&#123;host&#125;</span>my-frontend-template/-/my-frontend-template-<span class="subst">$&#123;latest&#125;</span>.tgz`</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = path.resolve(projectName)</span><br><span class="line">fsExtra.mkdirSync(root)</span><br><span class="line">process.chdir(root)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> templates = [</span><br><span class="line">Â  Â ...,</span><br><span class="line">Â  Â  <span class="string">'src/common'</span>,</span><br><span class="line">    ...</span><br><span class="line">Â  ]</span><br><span class="line">Â  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> templates) &#123;</span><br><span class="line">Â  Â  fsExtra.copy(templatePath(tmpdir, item), item)</span><br><span class="line">Â  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-è‡ªåŠ¨ä¸‹è½½ä¾èµ–"><a href="#7-è‡ªåŠ¨ä¸‹è½½ä¾èµ–" class="headerlink" title="7. è‡ªåŠ¨ä¸‹è½½ä¾èµ–"></a>7. è‡ªåŠ¨ä¸‹è½½ä¾èµ–</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> child = spawn(<span class="string">'pnpm'</span>, [<span class="string">'install'</span>], &#123; <span class="attr">stdio</span>: <span class="string">'inherit'</span> &#125;)</span><br><span class="line">child.on(<span class="string">'close'</span>, (code) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (code !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log()</span><br><span class="line">  <span class="built_in">console</span>.log(</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;chalk.cyan(projectName)&#125;</span> is created <span class="subst">$&#123;chalk.green(<span class="string">'successfully'</span>)&#125;</span>`</span></span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Get Started with the following commands:'</span>)</span><br><span class="line">  <span class="built_in">console</span>.log()</span><br><span class="line">  <span class="built_in">console</span>.log(</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;chalk.gray(<span class="string">'$'</span>)&#125;</span> <span class="subst">$&#123;chalk.green(<span class="string">'cd'</span>)&#125;</span> <span class="subst">$&#123;chalk.green(projectName)&#125;</span>`</span></span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;chalk.gray(<span class="string">'$'</span>)&#125;</span> <span class="subst">$&#123;chalk.green(<span class="string">'pnpm run serve'</span>)&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="8-å‘å¸ƒå’Œä½¿ç”¨"><a href="#8-å‘å¸ƒå’Œä½¿ç”¨" class="headerlink" title="8. å‘å¸ƒå’Œä½¿ç”¨"></a>8. å‘å¸ƒå’Œä½¿ç”¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">"bin"</span>: &#123;</span><br><span class="line">        <span class="string">"create-my-app"</span>: <span class="string">"./index.js"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>å°†è„šæ‰‹æ¶å‘å¸ƒåˆ°å…¬å¸ç§åº“å†…ï¼Œåœ¨ä½¿ç”¨ä¸­ä½¿ç”¨ä¸€è¡Œå‘½ä»¤å³å¯å®Œæˆç”Ÿæˆå·¥ä½œã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-my-app &lt;project-directory&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>æ–‡ç« ä¸­è´´å‡ºæ¥äº†å…³é”®éƒ¨åˆ†çš„è„±æ•ä»£ç ï¼Œæ•´ä½“ä¸»è¦å‚è€ƒäº†<a href="https://github.com/facebook/create-react-app/blob/main/packages/create-react-app/createReactApp.js" target="_blank" rel="noopener">create-react-app</a>çš„å®ç°ï¼Œå¯¹å…¶ä»£ç é€»è¾‘ä¹‹ä¸¥è°¨æ·±å—å¯å‘ï¼Œå…¶å‡ ä¹å¯¹æ¯ä¸€ä¸ªç¯èŠ‚å¯èƒ½å‡ºç°çš„é—®é¢˜éƒ½åšäº†ç¬¬äºŒç§ç”šè‡³ç¬¬ä¸‰ç§å®¹é”™å¤„ç†ï¼Œåœ¨è‡ªå·±å®ç°è¿‡ç¨‹ä¸­ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šï¼Œå¯¹æ—¥åçš„å¼€å‘å¤§æœ‰å¸®åŠ©ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/webpack-rollup.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/webpack-rollup.html" class="post-title-link" itemprop="url">webpack å’Œ rollup å¯¹æ¯”</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-04-15 00:00:00" itemprop="dateCreated datePublished" datetime="2023-04-15T00:00:00+08:00">2023-04-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="è¯ç”ŸèƒŒæ™¯"><a href="#è¯ç”ŸèƒŒæ™¯" class="headerlink" title="è¯ç”ŸèƒŒæ™¯"></a>è¯ç”ŸèƒŒæ™¯</h2><p>åœ¨æ‰“åŒ…å·¥å…·å‡ºç°ä¹‹å‰ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿è¡Œ Javascript ä¸­æœ‰ä¸¤ç§å†™æ³•ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§æ–¹å¼ï¼Œå¼•ç”¨ä¸€äº›è„šæœ¬(script æ ‡ç­¾)æ¥å­˜æ”¾æ¯ä¸ªåŠŸèƒ½ï¼›æ­¤è§£å†³æ–¹æ¡ˆå¾ˆéš¾æ‰©å±•ï¼Œå› ä¸ºåŠ è½½å¤ªå¤šè„šæœ¬ä¼šå¯¼è‡´ç½‘ç»œç“¶é¢ˆã€‚</li>
<li>ç¬¬äºŒç§æ–¹å¼ï¼Œä½¿ç”¨ä¸€ä¸ªåŒ…å«æ‰€æœ‰é¡¹ç›®ä»£ç çš„å¤§å‹  .js  æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¼šå¯¼è‡´ä½œç”¨åŸŸã€æ–‡ä»¶å¤§å°ã€å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ–¹é¢çš„é—®é¢˜ã€‚</li>
</ul>
<p>å†å²çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>iife</li>
<li>commonjsï¼ˆæœ€å¤§çš„é—®é¢˜æ˜¯æµè§ˆå™¨ä¸æ”¯æŒ commonjsï¼Œå› ä¸º commonjs æ˜¯è¿è¡Œæ—¶ åŠ¨æ€åŠ è½½çš„ï¼Œæ˜¯åŒæ­¥çš„ï¼Œæµè§ˆå™¨åŒæ­¥çš„è¯ï¼Œå¤ªæ…¢äº†ï¼‰</li>
<li>ESM<ul>
<li>æœªæ¥çš„å®˜æ–¹æ ‡å‡†å’Œä¸»æµã€‚ä½†æ˜¯æµè§ˆå™¨çš„ç‰ˆæœ¬éœ€è¦æ¯”è¾ƒé«˜ï¼Œæ¯”å¦‚ chorme éƒ½éœ€è¦ 63 ç‰ˆæœ¬ä»¥ä¸Š</li>
<li>esm æ˜¯é™æ€çš„ï¼Œå¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™å°±åˆ†æå‡ºå¯¹åº”çš„ä¾èµ–å…³ç³»ï¼Œä¸ç”¨åƒ commonjs ä¸€æ ·ï¼Œè¿è¡Œæ—¶åŠ è½½</li>
</ul>
</li>
</ul>
<p>èƒŒæ™¯æ€»ç»“ï¼š</p>
<ol>
<li>commonjs å¾ˆå¥½ï¼Œæ¨å‡º npm ç®¡ç† JavaScript æ¨¡å—åŒ…ï¼Œä½†æµè§ˆå™¨ä¸æ”¯æŒ</li>
<li>esm æ›´å¥½ï¼Œæµè§ˆå™¨ä¹Ÿæ”¯æŒï¼Œä½†åªæœ‰å¾ˆæ–°çš„æµè§ˆå™¨æ‰æ”¯æŒã€‚ ä½ å¯ä»¥æºä»£ç å†…å†™ esm æ¨¡å—ï¼Œwebpack å¯ä»¥å¸®å¿™æ‰“åŒ…ï¼Œè®©ä¸å…¼å®¹ esm çš„æµè§ˆå™¨ï¼Œä¹Ÿèƒ½å…¼å®¹</li>
</ol>
<h2 id="æ‰“åŒ…åŸç†"><a href="#æ‰“åŒ…åŸç†" class="headerlink" title="æ‰“åŒ…åŸç†"></a>æ‰“åŒ…åŸç†</h2><p>åœ¨äº†è§£äº†èƒŒæ™¯ä¹‹åï¼Œç†è§£æ‰“åŒ…åŸç†å°±å¾ˆç®€å•äº†ã€‚</p>
<h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><h4 id="æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ª-chunk-åŒ…å†…ï¼ˆå•-chunk-åŒ…ï¼‰"><a href="#æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ª-chunk-åŒ…å†…ï¼ˆå•-chunk-åŒ…ï¼‰" class="headerlink" title="æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ª chunk åŒ…å†…ï¼ˆå• chunk åŒ…ï¼‰"></a>æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ª chunk åŒ…å†…ï¼ˆå• chunk åŒ…ï¼‰</h4><blockquote>
<p>æ— é¢å¤–é…ç½®ï¼Œwebpack ä¸€èˆ¬ä¼šæŠŠæ‰€æœ‰ js æ‰“æˆä¸€ä¸ªåŒ…ã€‚å®ç°æ­¥éª¤</p>
</blockquote>
<ul>
<li>è¯»æ–‡ä»¶ï¼Œæ‰«æä»£ç ï¼ŒæŒ‰æ¨¡å—åŠ è½½é¡ºåºï¼Œæ’åˆ—æ¨¡å—ï¼Œåˆ†ä¸ºæ¨¡å— 1ï¼Œæ¨¡å— 2ï¼Œâ€¦ï¼Œæ¨¡å— n ã€‚æ”¾åˆ°ä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œç”¨ modules ä¿å­˜ï¼Œmodules æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€æœ‰æ¨¡å—æŒ‰åŠ è½½é¡ºåºï¼Œç´¢å¼•æ’åº</li>
<li>webpack è‡ªå·±å®ç°å¯¹åº”çš„ apiï¼ˆæ¯”å¦‚è‡ªå·±å®ç° requireï¼‰ï¼Œè®©æµè§ˆå™¨æ”¯æŒæºä»£ç å†…çš„æ¨¡å—åŒ–çš„å†™æ³•ï¼ˆæ¯”å¦‚ï¼šmodule.export, require, esm ç¨å¾®æœ‰äº›ä¸åŒ è§ä¸‹æ–¹ï¼‰æ‰“åŒ…å¤–éƒ¨ä¾èµ–ä¹Ÿæ˜¯ä¸€æ ·çš„</li>
</ul>
<h5 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h5><ul>
<li><strong>çº¯ commonjs</strong><ul>
<li><strong>æ‰€æœ‰çš„ js ä¾èµ–ï¼Œæ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œç„¶åè‡ªå·±å®ç°ä¸€å¥— require å’Œ module.exportsï¼Œè®©æµè§ˆå™¨å¯ä»¥æ‰§è¡Œæºä»£ç </strong></li>
<li>æºä»£ç çš„ require ä¼šè¢«æ¢æˆ  <strong>webpack_require</strong></li>
<li>æºä»£ç çš„ module.exports ä¸å˜ï¼Œä¼šç”± webpack ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ ç»™æºä»£ç </li>
</ul>
</li>
<li><strong>çº¯ esm</strong><ul>
<li>webpack ä¼šåš tree shakingï¼Œæœ€ç»ˆçš„äº§ç‰©ï¼Œä¼šå’Œ rollup çš„äº§ç‰©æ¯”è¾ƒæ¥è¿‘ï¼Œä¸ä¼šæœ‰è¿‡å¤šçš„ webpack æ³¨å…¥çš„å…¼å®¹ä»£ç </li>
<li>å®ç°æ€è·¯ç±»ä¼¼ rollupï¼Œ<strong>é€šè¿‡ esm çš„é™æ€ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå°±åˆ†æå‡ºå¯¹åº”çš„ä¾èµ–å…³ç³»</strong></li>
</ul>
</li>
<li><strong>esm + commonjs æ··ç”¨</strong><ul>
<li>webpack å¾ˆå¼ºå¤§ï¼Œä»–æ˜¯æ”¯æŒæ··ç”¨çš„ï¼ï¼</li>
<li>ä½ å¯ä»¥ module.exports å¯¼å‡ºï¼Œ import xx from xx å¯¼å…¥</li>
<li>ä¹Ÿå¯ä»¥ exports { } å¯¼å‡ºï¼Œrequire å¼•å…¥</li>
<li>å®ç°çš„æ€è·¯å’Œä¸Šé¢çš„æ¨¡æ‹Ÿ module.exports å’Œæä¾›<strong>webpack_require</strong>æ›¿ä»£ require çš„æ€è·¯ç±»ä¼¼ï¼Œ<strong>webpack ä¼šå»æ¨¡æ‹Ÿ esm çš„ exports å¯¹è±¡</strong> è®©æµè§ˆå™¨æ”¯æŒ</li>
</ul>
</li>
</ul>
<h4 id="å¤šä¸ª-chunk-åŒ…"><a href="#å¤šä¸ª-chunk-åŒ…" class="headerlink" title="å¤šä¸ª chunk åŒ…"></a>å¤šä¸ª chunk åŒ…</h4><h5 id="å¤šä¸ªæ‰“åŒ…å…¥å£"><a href="#å¤šä¸ªæ‰“åŒ…å…¥å£" class="headerlink" title="å¤šä¸ªæ‰“åŒ…å…¥å£"></a>å¤šä¸ªæ‰“åŒ…å…¥å£</h5><ul>
<li>å¤šä¸ªå…¥å£åˆ†ç¦»å¤šä¸ªåŒ…ï¼Œç„¶åç”Ÿæˆå¤šä¸ª script æ ‡ç­¾ï¼ˆæŒ‰å…¥å£çš„é¡ºåº</li>
<li>åˆ†ç¦»å‡ºæ¥çš„å¤šä¸ªåŒ…ï¼Œéƒ½åŒ…å«åŒæ ·å¤šçš„æ¨¡æ‹Ÿä»£ç ï¼ˆwebpack æ³¨å…¥çš„ä»£ç ï¼‰</li>
</ul>
<h5 id="åˆ†ç¦»å…¬å…±ä¾èµ–"><a href="#åˆ†ç¦»å…¬å…±ä¾èµ–" class="headerlink" title="åˆ†ç¦»å…¬å…±ä¾èµ–"></a>åˆ†ç¦»å…¬å…±ä¾èµ–</h5><ul>
<li>å…ˆåŠ è½½ venders åŒ…ï¼ˆç¬¬ä¸‰æ–¹å…¬å…±ä¾èµ–ï¼‰ï¼Œæ­¤åŠ è½½ä¸æ˜¯è§£æä»£ç ï¼Œåªæ˜¯æŠŠç¬¬ä¸‰æ–¹ä¾èµ–çš„æ¨¡å—ï¼Œä»¥ webpack èƒ½è§£æçš„æ ¼å¼ï¼Œå­˜åˆ°å…¨å±€å¯¹è±¡ window[â€œwebpackJsonpâ€]å†…ï¼Œæ–¹ä¾¿åç»­çš„ä»£ç èƒ½è®¿é—®åˆ°</li>
<li>åªéœ€è¦æŠŠ window[â€œwebpackJsonpâ€]å†…çš„ venders å†…çš„æ¨¡å—ï¼Œæ”¾åˆ° main ä»£ç ä½œç”¨åŸŸå†…çš„ modules é‡Œé¢ï¼Œåé¢å°±å’Œå• chunk è§£ææ˜¯ä¸€æ ·çš„äº†</li>
</ul>
<h5 id="import-åŠ¨æ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰"><a href="#import-åŠ¨æ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰" class="headerlink" title="import() åŠ¨æ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰"></a>import() åŠ¨æ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰</h5><ul>
<li><p>å…ˆæ‰§è¡Œ main æ¨¡å—çš„å†…å®¹ï¼Œä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œå…³æ³¨ import(â€˜xxâ€™).then()è¡Œã€‚æ‰“åŒ…åï¼Œimport()ä¼šè¢«æ›¿æ¢æˆ webpack çš„ apiï¼ˆ<strong>webpack_require</strong>.e(/_ import() _/ 1).then(<strong>webpack_require</strong>.bind(null, 1)).then()ï¼‰</p>
</li>
<li><p>æ›¿æ¢åçš„ api åšäº†å‡ ä»¶äº‹</p>
<ul>
<li>ç”Ÿæˆ script æ ‡ç­¾ï¼Œå¹¶ appendChild åˆ° ducument.head å†…</li>
<li>return ä¸€ä¸ª Promise å¯¹è±¡ï¼ŒçŠ¶æ€æ˜¯ pendingï¼ˆpending çŠ¶æ€ä¸ä¼šå¾€åæ‰§è¡Œ.then(<strong>webpack_require</strong>.bind(null, 1)).then()ï¼Œä½†ä¸ä¼šé˜»å¡ä¸»ç¨‹åºï¼Œå› ä¸ºæ˜¯å¼‚æ­¥çš„ï¼Œä¸æ‡‚çš„å¯ä»¥äº†è§£ä¸€ä¸‹ promiseï¼‰</li>
<li>ï¼ˆå¼‚æ­¥ï¼‰ç­‰äº†ä¸€æ®µæ—¶é—´åï¼Œéœ€æ±‚æ‡’åŠ è½½çš„æ¨¡å—é€šè¿‡ script æ ‡ç­¾ï¼Œè¢«ä¸‹è½½åˆ°æµè§ˆå™¨åä¼šç›´æ¥è§£ææ‰§è¡Œï¼Œè§¦å‘ window[â€œwebpackJsonpâ€].pushï¼ˆæ­¤æ–¹æ³•è¢«æ”¹å†™äº†ï¼Œå’Œç”ŸæˆåŒæ­¥å¤š chunk æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œä¼šè§¦å‘ webpackJsonpCallback å‡½æ•°</li>
<li>webpackJsonpCallback å‡½æ•°çš„ä½œç”¨<ul>
<li>æ‡’åŠ è½½çš„æ¨¡å— å†…å®¹ ä¼šè¢«åŠ å…¥åˆ° main çš„ mudules çš„æ¨¡å—åˆ—è¡¨å†…å»ï¼ˆç­‰æ•ˆ push çš„ä½œç”¨ï¼‰</li>
<li>ä¼šæŠŠ Promise çš„çŠ¶æ€ä» pending æ”¹æˆ fulfilledï¼Œå› ä¸ºè¦æ‡’åŠ è½½çš„æ¨¡å—ï¼Œé€šè¿‡ script æ ‡ç­¾ï¼Œå·²ç»è§£æå®Œæˆäº†ï¼Œæ‰€ä»¥.then()å¯ä»¥å¾€åäº†</li>
</ul>
</li>
<li>åé¢å°±æ˜¯æ­£å¸¸è§£æåŒ…ï¼Œå’Œå• chunk è§£æå¤šæ¨¡å—æ˜¯ä¸€æ ·çš„äº†</li>
</ul>
</li>
</ul>
<hr>
<h3 id="rollup"><a href="#rollup" class="headerlink" title="rollup"></a>rollup</h3><p>æµè§ˆå™¨ç¯å¢ƒä½¿ç”¨çš„è¯ï¼š</p>
<ol>
<li>æ— éœ€è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„è¯ï¼š<ul>
<li>å¼€å‘è€…å†™ esm ä»£ç  -&gt; rollup é€šè¿‡å…¥å£ï¼Œé€’å½’è¯†åˆ« esm æ¨¡å— -&gt; æœ€ç»ˆæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle.js -&gt; æµè§ˆå™¨ç›´æ¥å¯ä»¥æ”¯æŒå¼•å…¥<script type="module"></script></li>
</ul>
</li>
<li>éœ€è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„è¯<ul>
<li>å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ç”¨é¢å¤–çš„ polyfill åº“ï¼Œæˆ–ç»“åˆ webpack ä½¿ç”¨</li>
</ul>
</li>
</ol>
<p>æ‰“åŒ…æˆ npm åŒ…çš„è¯ï¼š</p>
<ul>
<li>å¼€å‘è€…å†™ esm ä»£ç  -&gt; rollup é€šè¿‡å…¥å£ï¼Œé€’å½’è¯†åˆ« esm æ¨¡å— -&gt; ï¼ˆå¯ä»¥æ”¯æŒé…ç½®è¾“å‡ºå¤šç§æ ¼å¼çš„æ¨¡å—ï¼Œå¦‚ esmã€cjsã€umdã€amdï¼‰æœ€ç»ˆæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle.js<ul>
<li>ï¼ˆå¼€å‘è€…è¦å†™ cjs ä¹Ÿå¯ä»¥ï¼Œéœ€è¦æ’ä»¶@rollup/plugin-commonjsï¼‰ åˆæ­¥çœ‹æ¥</li>
</ul>
</li>
<li>å¾ˆæ˜æ˜¾ï¼Œrollup æ¯”è¾ƒé€‚åˆæ‰“åŒ… js åº“ï¼ˆreactã€vue2 ç­‰çš„æºä»£ç åº“éƒ½æ˜¯ rollup æ‰“åŒ…çš„ï¼‰æˆ– é«˜ç‰ˆæœ¬æ— éœ€å¾€ä¸‹å…¼å®¹çš„æµè§ˆå™¨åº”ç”¨ç¨‹åº</li>
<li>è¿™æ ·æ‰“åŒ…å‡ºæ¥çš„åº“ï¼Œå¯ä»¥å……åˆ†ä½¿ç”¨ä¸Š esm çš„ tree shakingï¼Œä½¿æºåº“ä½“ç§¯æœ€å°</li>
</ul>
<h4 id="å•-chunk-åŒ…"><a href="#å•-chunk-åŒ…" class="headerlink" title="å• chunk åŒ…"></a>å• chunk åŒ…</h4><p>æ— é¢å¤–é…ç½®ï¼Œä¸€èˆ¬ä¼šæŠŠæ‰€æœ‰ js æ‰“æˆä¸€ä¸ªåŒ…ã€‚æ‰“åŒ…å¤–éƒ¨ä¾èµ–ï¼ˆç¬¬ä¸‰æ–¹ï¼‰ä¹Ÿæ˜¯ä¸€æ ·çš„</p>
<h4 id="å¤š-chunk-åŒ…"><a href="#å¤š-chunk-åŒ…" class="headerlink" title="å¤š chunk åŒ…"></a>å¤š chunk åŒ…</h4><ul>
<li>é…ç½®å¤šä¸ªå…¥å£ï¼Œæ­¤æ³•æ¯”è¾ƒç®€å•ï¼Œå¯è‡ªè¡Œæµ‹è¯•</li>
<li>ä»£ç åˆ†ç¦» ï¼ˆåŠ¨æ€ importï¼Œæ‡’åŠ è½½ï¼Œ import(xxx).then(module =&gt; {}) ï¼‰<ul>
<li><a href="https://rollupjs.org/repl/?version=1.6.0&shareable=JTdCJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMiUyRiolMjBEWU5BTUlDJTIwSU1QT1JUUyU1Q24lMjAlMjAlMjBSb2xsdXAlMjBzdXBwb3J0cyUyMGF1dG9tYXRpYyUyMGNodW5raW5nJTIwYW5kJTIwbGF6eS1sb2FkaW5nJTVDbiUyMCUyMCUyMHZpYSUyMGR5bmFtaWMlMjBpbXBvcnRzJTIwdXRpbGl6aW5nJTIwdGhlJTIwaW1wb3J0JTIwbWVjaGFuaXNtJTVDbiUyMCUyMCUyMG9mJTIwdGhlJTIwaG9zdCUyMHN5c3RlbS4lMjAqJTJGJTVDbmlmJTIwKGRpc3BsYXlNYXRoKSUyMCU3QiU1Q24lNUN0aW1wb3J0KCcuJTJGbWF0aHMuanMnKS50aGVuKGZ1bmN0aW9uJTIwKG1hdGhzKSUyMCU3QiU1Q24lNUN0JTVDdGNvbnNvbGUubG9nKG1hdGhzLnNxdWFyZSg1KSklM0IlNUNuJTVDdCU1Q3Rjb25zb2xlLmxvZyhtYXRocy5jdWJlKDUpKSUzQiU1Q24lNUN0JTdEKSUzQiU1Q24lN0QlMjIlMkMlMjJpc0VudHJ5JTIyJTNBdHJ1ZSU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjJtYXRocy5qcyUyMiUyQyUyMmNvZGUlMjIlM0ElMjJpbXBvcnQlMjBzcXVhcmUlMjBmcm9tJTIwJy4lMkZzcXVhcmUuanMnJTNCJTVDbiU1Q25leHBvcnQlMjAlN0JkZWZhdWx0JTIwYXMlMjBzcXVhcmUlN0QlMjBmcm9tJTIwJy4lMkZzcXVhcmUuanMnJTNCJTVDbiU1Q25leHBvcnQlMjBmdW5jdGlvbiUyMGN1YmUlMjAoeCUyMCklMjAlN0IlNUNuJTVDdHJldHVybiUyMHNxdWFyZSh4KSUyMColMjB4JTNCJTVDbiU3RCUyMiUyQyUyMmlzRW50cnklMjIlM0FmYWxzZSU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjJzcXVhcmUuanMlMjIlMkMlMjJjb2RlJTIyJTNBJTIyZXhwb3J0JTIwZGVmYXVsdCUyMGZ1bmN0aW9uJTIwc3F1YXJlJTIwKCUyMHglMjApJTIwJTdCJTVDbiU1Q3RyZXR1cm4lMjB4JTIwKiUyMHglM0IlNUNuJTdEJTIyJTJDJTIyaXNFbnRyeSUyMiUzQWZhbHNlJTdEJTVEJTJDJTIyb3B0aW9ucyUyMiUzQSU3QiUyMmZvcm1hdCUyMiUzQSUyMmNqcyUyMiUyQyUyMm5hbWUlMjIlM0ElMjJteUJ1bmRsZSUyMiUyQyUyMmFtZCUyMiUzQSU3QiUyMmlkJTIyJTNBJTIyJTIyJTdEJTJDJTIyZ2xvYmFscyUyMiUzQSU3QiU3RCU3RCUyQyUyMmV4YW1wbGUlMjIlM0FudWxsJTdE" target="_blank" rel="noopener">æ­¤å¤„æœ‰ä¸€ä¸ªå®˜æ–¹çš„ä¾‹å­ï¼Œå†æ¸…æ¥šä¸è¿‡äº†</a></li>
<li>å¯¹äºä»£ç åˆ†å‰²ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥é€šè¿‡  output.manualChunks  é€‰é¡¹æ˜¾å¼å‘Šè¯‰ Rollup å“ªäº›æ¨¡å—è¦åˆ†å‰²æˆå•ç‹¬çš„å—ã€‚</li>
</ul>
</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="webpack-1"><a href="#webpack-1" class="headerlink" title="webpack"></a>webpack</h3><blockquote>
<p><code>webpack</code> è¯ç”Ÿåœ¨ <code>esm</code> æ ‡å‡†å‡ºæ¥å‰ï¼Œ<code>commonjs</code> å‡ºæ¥å</p>
</blockquote>
<ul>
<li><p>å½“æ—¶çš„æµè§ˆå™¨åªèƒ½é€šè¿‡ script æ ‡ç­¾åŠ è½½æ¨¡å—</p>
<ul>
<li><strong>script æ ‡ç­¾åŠ è½½ä»£ç æ˜¯æ²¡æœ‰ä½œç”¨åŸŸçš„ï¼Œåªèƒ½åœ¨ä»£ç å†… ç”¨ iife çš„æ–¹å¼ å®ç°ä½œç”¨åŸŸæ•ˆæœ</strong><ul>
<li>è¿™å°±æ˜¯ webpack æ‰“åŒ…å‡ºæ¥çš„ä»£ç  å¤§ç»“æ„éƒ½æ˜¯ iife çš„åŸå› </li>
<li>å¹¶ä¸”<strong>æ¯ä¸ªæ¨¡å—éƒ½è¦è£…åˆ° function é‡Œé¢</strong>ï¼Œæ‰èƒ½ä¿è¯äº’ç›¸ä¹‹é—´ä½œç”¨åŸŸä¸å¹²æ‰°ã€‚</li>
<li>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ webpack æ‰“åŒ…çš„ä»£ç ä¸ºä»€ä¹ˆä¹çœ‹ä¼šæ„Ÿè§‰ä¹±ï¼Œæ‰¾ä¸åˆ°è‡ªå·±å†™çš„ä»£ç çš„çœŸæ­£åŸå› </li>
</ul>
</li>
</ul>
</li>
<li><p>å…³äº webpack çš„ä»£ç æ³¨å…¥é—®é¢˜ï¼Œæ˜¯å› ä¸º<strong>æµè§ˆå™¨ä¸æ”¯æŒ cjs</strong>ï¼Œæ‰€ä»¥ webpack è¦å»<strong>è‡ªå·±å®ç° require å’Œ module.exports æ–¹æ³•</strong>ï¼ˆæ‰æœ‰å¾ˆå¤šæ³¨å…¥ï¼‰</p>
<ul>
<li>è¿™ä¹ˆå¤šå¹´äº†ï¼Œç”šè‡³åˆ°ç°åœ¨ 2022 å¹´ï¼Œ<strong>æµè§ˆå™¨ä¸ºä»€ä¹ˆä¸æ”¯æŒ cjs</strong>ï¼Ÿ<ul>
<li><strong>cjs æ˜¯åŒæ­¥çš„ï¼Œè¿è¡Œæ—¶çš„ï¼Œnode ç¯å¢ƒç”¨ cjsï¼Œnode æœ¬èº«è¿è¡Œåœ¨æœåŠ¡å™¨ï¼Œæ— éœ€ç­‰å¾…ç½‘ç»œæ¡æ‰‹ï¼Œæ‰€ä»¥åŒæ­¥å¤„ç†æ˜¯å¾ˆå¿«çš„</strong></li>
<li><strong>æµè§ˆå™¨æ˜¯ å®¢æˆ·ç«¯ï¼Œè®¿é—®çš„æ˜¯æœåŠ¡ç«¯èµ„æºï¼Œä¸­é—´éœ€è¦ç­‰å¾…ç½‘ç»œæ¡æ‰‹ï¼Œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥ä¸èƒ½ åŒæ­¥çš„ å¡åœ¨é‚£é‡Œç­‰æœåŠ¡å™¨è¿”å›çš„ï¼Œä½“éªŒå¤ªå·®</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>åç»­å‡ºæ¥ esm åï¼Œwebpack ä¸ºäº†å…¼å®¹ä»¥å‰å‘åœ¨ npm ä¸Šçš„è€åŒ…</strong>ï¼ˆå¹¶ä¸”å½“æ—¶å¿ƒè¿˜ä¸å¤Ÿå†³ç»ï¼Œå¯¼è‡´è¿™ç§â€œä¸‘ç»“æ„çš„åŒ…â€è¶Šæ¥è¶Šå¤šï¼Œä»¥åå°±æ›´ä¸å¯èƒ½æ”¹è¿™ç§â€œä¸‘ç»“æ„äº†â€ï¼‰ï¼Œæ‰€ä»¥ä¿ç•™è¿™ä¸ª iife çš„ç»“æ„å’Œä»£ç æ³¨å…¥ï¼Œ<strong>å¯¼è‡´ç°åœ¨çœ‹ webpack æ‰“åŒ…çš„äº§ç‰©ï¼Œä¹çœ‹ç»“æ„æ¯”è¾ƒä¹±ä¸”æœ‰å¾ˆå¤šçš„ä»£ç æ³¨å…¥ï¼Œè‡ªå·±å†™çš„ä»£ç éƒ½æ‰¾ä¸åˆ°</strong></p>
</li>
</ul>
<h3 id="rollup-1"><a href="#rollup-1" class="headerlink" title="rollup"></a>rollup</h3><blockquote>
<p>rollup è¯ç”Ÿåœ¨ esm æ ‡å‡†å‡ºæ¥å</p>
</blockquote>
<ul>
<li><strong>å‡ºå‘ç‚¹å°±æ˜¯å¸Œæœ›å¼€å‘è€…å»å†™ esm æ¨¡å—</strong>ï¼Œè¿™æ ·é€‚åˆåšä»£ç é™æ€åˆ†æï¼Œå¯ä»¥åš tree shaking å‡å°‘ä»£ç ä½“ç§¯ï¼Œä¹Ÿæ˜¯æµè§ˆå™¨é™¤äº† script æ ‡ç­¾å¤–ï¼ŒçœŸæ­£è®© JavaScript æ‹¥æœ‰æ¨¡å—åŒ–èƒ½åŠ›ã€‚æ˜¯ js è¯­è¨€çš„æœªæ¥</li>
<li><strong>rollup å®Œå…¨ä¾èµ–é«˜ç‰ˆæœ¬æµè§ˆå™¨åŸç”Ÿå»æ”¯æŒ esm æ¨¡å—ï¼Œæ‰€ä»¥æ— é¢å¤–ä»£ç æ³¨å…¥ï¼Œæ‰“åŒ…åçš„ä»£ç ç»“æ„ä¹Ÿæ˜¯æ¸…æ™°çš„</strong>ï¼ˆä¸ç”¨åƒ webpack é‚£æ · iifeï¼‰<ul>
<li>ç›®å‰æµè§ˆå™¨æ”¯æŒæ¨¡å—åŒ–åªæœ‰ 3 ç§æ–¹æ³•ï¼š<ul>
<li>script æ ‡ç­¾ï¼ˆç¼ºç‚¹æ²¡æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µ</li>
<li>script æ ‡ç­¾ + iife + window + å‡½æ•°ä½œç”¨åŸŸï¼ˆå¯ä»¥è§£å†³ä½œç”¨åŸŸé—®é¢˜ã€‚webpack çš„æ‰“åŒ…çš„äº§ç‰©å°±è¿™æ ·</li>
<li>esm ï¼ˆä»€ä¹ˆéƒ½å¥½ï¼Œå”¯ä¸€ç¼ºç‚¹ éœ€è¦é«˜ç‰ˆæœ¬æµè§ˆå™¨ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="æœ€ç»ˆä½¿ç”¨æ¨è"><a href="#æœ€ç»ˆä½¿ç”¨æ¨è" class="headerlink" title="æœ€ç»ˆä½¿ç”¨æ¨è"></a>æœ€ç»ˆä½¿ç”¨æ¨è</h2><ol>
<li>æ‰“åŒ…<strong>å¼€æºåº“</strong>ï¼šrollup ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©</li>
<li>æ‰“åŒ…åº”ç”¨ç¨‹åºï¼šçœ‹æ˜¯å¦éœ€è¦<strong>å…¼å®¹è€æµè§ˆå™¨</strong><br>å¦‚æœä¸è€ƒè™‘å…¼å®¹è€æµè§ˆå™¨ï¼Œå»ºè®®ç”¨ <code>vite</code> å¼€å‘åº”ç”¨ç¨‹åºï¼Œ<code>vite</code>æ‰“åŒ…å®é™…ä½¿ç”¨çš„å°±æ˜¯<code>rollup</code>ï¼Œå¼€å‘ä½“éªŒå¾ˆæ£’ï¼Œæ‰“çš„ç”Ÿäº§åŒ…æ¯”ç”¨<code>webpack</code>å°å¾ˆå¤šï¼Œæœ‰ä¸é”™çš„æ€§èƒ½æå‡<br>å¦‚æœéœ€è¦è€ƒè™‘å…¼å®¹ï¼Œåˆ™é€‰æ‹©<code>webpack</code></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/tsconfig.json%E6%96%87%E4%BB%B6%E5%85%A8%E8%A7%A3%E6%9E%90.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/tsconfig.json%E6%96%87%E4%BB%B6%E5%85%A8%E8%A7%A3%E6%9E%90.html" class="post-title-link" itemprop="url">tsconfig.jsonæ–‡ä»¶è§£æ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-03-10 00:00:00" itemprop="dateCreated datePublished" datetime="2023-03-10T00:00:00+08:00">2023-03-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><code>TypeScript</code>å¸¦æ¥çš„ç±»å‹ç³»ç»Ÿä»¥åŠå¼ºå¤§çš„<code>IDE</code>æ”¯æŒï¼Œè®©å‰ç«¯å¼€å‘ä¹Ÿå˜å¾—ä¸¥è°¨è€Œæµç•…ã€‚ä½†<code>TypeScript</code>ä¸æ˜¯åŸç”Ÿçš„<code>Javascript</code>ä»£ç ï¼Œéœ€è¦è¿›è¡Œç¼–è¯‘æ‰èƒ½è½¬æ¢ä¸º<code>Javascript</code>ä»£ç ã€‚</p>
<p><code>tsconfig.json</code>æ˜¯ç¼–è¯‘<code>TypeScript</code>çš„é…ç½®æ–‡ä»¶ï¼Œå¯¹ä¹¦å†™<code>TypeScript</code>ä»£ç ååˆ†é‡è¦ã€‚æ¥ä¸‹æ¥ä¼šä»‹ç»ä¸€äº›å¸¸ç”¨çš„ç¼–è¯‘é€‰é¡¹å’Œæ‰€æœ‰<code>tsconfig.json</code>é€‰é¡¹çš„è§£é‡Šã€‚</p>
<h2 id="å¸¸ç”¨å±æ€§"><a href="#å¸¸ç”¨å±æ€§" class="headerlink" title="å¸¸ç”¨å±æ€§"></a>å¸¸ç”¨å±æ€§</h2><h4 id="1-experimentalDecorators"><a href="#1-experimentalDecorators" class="headerlink" title="1.experimentalDecorators"></a>1.experimentalDecorators</h4><p><code>æ˜¯å¦å¯ç”¨å®éªŒæ€§çš„ESè£…é¥°å™¨</code>ã€‚ é»˜è®¤å€¼ï¼š<strong>false</strong>, <a href="https://www.typescriptlang.org/docs/handbook/decorators.html" target="_blank" rel="noopener">å®˜æ–¹è§£é‡Š</a></p>
<p>TypeScript å’Œ ES6 ä¸­å¼•å…¥äº† Class çš„æ¦‚å¿µï¼ŒåŒæ—¶åœ¨ stage 2 proposal (opens new window)æå‡ºäº† Java ç­‰æœåŠ¡å™¨ç«¯è¯­è¨€æ—©å°±æœ‰çš„è£…é¥°å™¨æ¨¡å¼ã€‚é€šè¿‡å¼•å…¥è£…é¥°å™¨æ¨¡å¼ï¼Œèƒ½æå¤§ç®€åŒ–ä¹¦å†™ä»£ç ï¼ŒæŠŠä¸€äº›é€šç”¨é€»è¾‘å°è£…åˆ°è£…é¥°å™¨ä¸­ã€‚</p>
<h4 id="2-strictPropertyInitialization"><a href="#2-strictPropertyInitialization" class="headerlink" title="2.strictPropertyInitialization"></a>2.strictPropertyInitialization</h4><p><code>æ˜¯å¦ç±»çš„éundefinedå±æ€§å·²ç»åœ¨æ„é€ å‡½æ•°é‡Œåˆå§‹åŒ–</code>ã€‚ é»˜è®¤å€¼ï¼š<strong>false</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Home</span> </span>&#123;</span><br><span class="line">  id: string <span class="comment">// å¦‚æœå¼€å¯strictPropertyInitializationï¼Œåˆ™è¿™é‡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰èµ‹å€¼é»˜è®¤å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-noImplicitAny"><a href="#3-noImplicitAny" class="headerlink" title="3.noImplicitAny"></a>3.noImplicitAny</h4><p><code>æœ‰éšå«çš„ anyç±»å‹æ—¶æ˜¯å¦æŠ¥é”™</code>ã€‚ é»˜è®¤å€¼ï¼š<strong>false</strong></p>
<p>ts æ˜¯æœ‰é»˜è®¤æ¨å¯¼çš„ï¼ŒåŒæ—¶è¿˜æœ‰ any ç±»å‹ï¼Œæ‰€ä»¥ä¸æ˜¯æ¯ä¸ªå˜é‡æˆ–å‚æ•°å®šä¹‰éœ€è¦æ˜ç¡®å‘ŠçŸ¥ç±»å‹æ˜¯ä»€ä¹ˆã€‚å¦‚æœå¼€å¯è¯¥å€¼ï¼Œå½“æœ‰éšå« any ç±»å‹æ—¶ï¼Œä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å¼€å¯noImplicitAnyæ—¶ï¼Œéœ€è¦éšå«å½“anyéœ€è¦æ˜ç¡®æŒ‡å‡º</span></span><br><span class="line">arr.find(<span class="function">(<span class="params">item</span>) =&gt;</span> item.name === name) <span class="comment">// error</span></span><br><span class="line">arr.find(<span class="function">(<span class="params">item: <span class="built_in">any</span></span>) =&gt;</span> item.name === name) <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<h4 id="4-target"><a href="#4-target" class="headerlink" title="4.target"></a>4.target</h4><p><code>æŒ‡å®šç¼–è¯‘çš„ECMAScriptç›®æ ‡ç‰ˆæœ¬</code>ã€‚é»˜è®¤å€¼: â€œES3â€<a href="https://www.typescriptlang.org/tsconfig#target" target="_blank" rel="noopener">å®˜æ–¹è§£é‡Š</a><br>æšä¸¾å€¼ï¼šâ€ES3â€ï¼Œ â€œES5â€ï¼Œ â€œES6â€/ â€œES2015â€ï¼Œ â€œES2016â€ï¼Œ â€œES2017â€ï¼Œâ€ES2018â€ï¼Œâ€ES2019â€ï¼Œâ€ES2020â€ï¼Œâ€ES2021â€ï¼Œâ€ES2022â€ï¼Œâ€ESNextâ€</p>
<blockquote>
<p>target: â€œESNextâ€ æ˜¯æŒ‡ tc39 æœ€æ–°çš„<a href="https://github.com/tc39/proposals" target="_blank" rel="noopener">ECMAScript proposals</a></p>
</blockquote>
<p>å½“ç¼–è¯‘ ts ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠ ts è½¬ä¸º ES5 æˆ–æ›´æ—©çš„ js ä»£ç ã€‚æ‰€ä»¥éœ€è¦é€‰æ‹©ä¸€ä¸ªç¼–è¯‘çš„ç›®æ ‡ç‰ˆæœ¬ã€‚</p>
<h4 id="5-module"><a href="#5-module" class="headerlink" title="5.module"></a>5.module</h4><p><code>æŒ‡å®šç”Ÿæˆå“ªä¸ªæ¨¡å—ç³»ç»Ÿä»£ç </code> <a href="https://www.typescriptlang.org/tsconfig#module" target="_blank" rel="noopener">å®˜æ–¹è§£é‡Š</a></p>
<p>æšä¸¾å€¼ï¼šâ€Noneâ€ï¼Œ â€œCommonJSâ€ï¼Œ â€œAMDâ€ï¼Œ â€œSystemâ€ï¼Œ â€œUMDâ€ï¼Œ â€œES6â€ï¼Œ â€œES2015â€ï¼Œâ€ES2020â€, â€œES2022â€, â€œESNextâ€, â€œnode16â€, â€œnodenextâ€,</p>
<p>é»˜è®¤å€¼æ ¹æ®â€“target é€‰é¡¹ä¸åŒè€Œä¸åŒï¼Œå½“ target è®¾ç½®ä¸º ES6 æ—¶ï¼Œé»˜è®¤ module ä¸ºâ€œES6â€ï¼Œå¦åˆ™ä¸ºâ€œcommonjsâ€</p>
<h4 id="6-lib"><a href="#6-lib" class="headerlink" title="6.lib"></a>6.lib</h4><p><code>ç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦å¼•å…¥çš„åº“æ–‡ä»¶çš„åˆ—è¡¨</code></p>
<ul>
<li><a href="https://www.typescriptlang.org/tsconfig#lib" target="_blank" rel="noopener">å®˜æ–¹è§£é‡Š</a></li>
<li><a href="https://jkchao.github.io/typescript-book-chinese/typings/lib.html#%E4%BD%BF%E7%94%A8%E4%BE%8B%E5%AD%90" target="_blank" rel="noopener">å®é™…åœºæ™¯ä¸‹çš„è§£é‡Š</a></li>
</ul>
<p>string[]ç±»å‹ï¼Œå¯é€‰çš„å€¼æœ‰å¾ˆå¤šï¼Œå¸¸ç”¨çš„æœ‰ ES5ï¼ŒES6ï¼ŒESNextï¼ŒDOMï¼ŒDOM.Iterableã€WebWorkerã€ScriptHost ç­‰ã€‚</p>
<p>è¯¥å€¼é»˜è®¤å€¼æ˜¯æ ¹æ®â€“target é€‰é¡¹ä¸åŒè€Œä¸åŒã€‚<br>å½“ target ä¸º ES5 æ—¶ï¼Œé»˜è®¤å€¼ä¸º[â€˜DOM â€˜, â€˜ES5â€™, â€˜ScriptHostâ€™];<br>å½“ target ä¸º ES6 æ—¶ï¼Œé»˜è®¤å€¼ä¸º[â€˜DOMâ€™, â€˜ES6â€™, â€˜DOM.Iterableâ€™, â€˜ScriptHostâ€™]</p>
<h4 id="7-moduleResolution"><a href="#7-moduleResolution" class="headerlink" title="7.moduleResolution"></a>7.moduleResolution</h4><p><code>å†³å®šå¦‚ä½•å¤„ç†æ¨¡å—</code> <a href="https://www.typescriptlang.org/docs/handbook/module-resolution.html" target="_blank" rel="noopener">å®˜æ–¹è§£é‡Š</a></p>
<p>è¯´ç›´ç™½ç‚¹ï¼Œä¹Ÿå°±æ˜¯é‡åˆ° import { AAA } from â€˜./aaaâ€™è¯¥å¦‚ä½•å»æ‰¾å¯¹åº”æ–‡ä»¶æ¨¡å—è§£æã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; åœ¨æºæ–‡ä»¶&#x2F;root&#x2F;src&#x2F;A.tsä¸­import &#123; b &#125; from &quot;.&#x2F;moduleB&quot;</span><br><span class="line">&#x2F;&#x2F; ä¸¤ç§è§£ææ–¹å¼æŸ¥æ‰¾æ–‡ä»¶æ–¹å¼ä¸åŒ</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; classicæ¨¡å—è§£ææ–¹å¼</span><br><span class="line">1. &#x2F;root&#x2F;src&#x2F;moduleB.ts</span><br><span class="line">2. &#x2F;root&#x2F;src&#x2F;moduleB.d.ts</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; nodeæ¨¡å—è§£ææ–¹å¼</span><br><span class="line">1. &#x2F;root&#x2F;src&#x2F;moduleB.ts</span><br><span class="line">2. &#x2F;root&#x2F;src&#x2F;moduleB.tsx</span><br><span class="line">3. &#x2F;root&#x2F;src&#x2F;moduleB.d.ts</span><br><span class="line">4. &#x2F;root&#x2F;src&#x2F;moduleB&#x2F;package.json (if it specifies a &quot;types&quot; property)</span><br><span class="line">5. &#x2F;root&#x2F;src&#x2F;moduleB&#x2F;index.ts</span><br><span class="line">6. &#x2F;root&#x2F;src&#x2F;moduleB&#x2F;index.tsx</span><br><span class="line">7. &#x2F;root&#x2F;src&#x2F;moduleB&#x2F;index.d.ts</span><br></pre></td></tr></table></figure>

<h4 id="8-paths"><a href="#8-paths" class="headerlink" title="8.paths"></a>8.paths</h4><p><code>æ¨¡å—åæˆ–è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</code></p>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„é€‰é¡¹ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨â€˜@/util/helpâ€™æ¥ä»£æ›¿â€™./src/util/helpâ€™ï¼Œçœçš„æ¯æ¬¡åœ¨ä¸åŒå±‚çº§æ–‡ä»¶ import æ¨¡å—æ—¶,éƒ½çº ç»“äºæ˜¯â€™./â€˜è¿˜æ˜¯â€™../â€˜ã€‚è¯¥é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨é‡åˆ°åŒ¹é…çš„å€¼æ—¶ï¼Œå»æ˜ å°„çš„è·¯å¾„ä¸‹åŠ è½½æ¨¡å—ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"baseUrl"</span>: <span class="string">"."</span>, <span class="comment">// æ³¨æ„ï¼šbaseUrlä¸å¯å°‘</span></span><br><span class="line">    <span class="string">"paths"</span>: &#123;</span><br><span class="line">      <span class="comment">// æ˜ å°„åˆ—è¡¨</span></span><br><span class="line">      <span class="string">"@/*"</span>: [</span><br><span class="line">        <span class="string">"src/*"</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">"moduleA"</span>: [</span><br><span class="line">        <span class="string">"src/libs/moduleA"</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// in ts code</span></span><br><span class="line"><span class="keyword">import</span> Setting <span class="keyword">from</span> <span class="string">'@/components/Setting.vue'</span> <span class="comment">// æ¨¡å—å®é™…ä½ç½®: src/components/Setting.vue</span></span><br><span class="line"><span class="keyword">import</span> TestModule <span class="keyword">from</span> <span class="string">'moduleA/index.js'</span> <span class="comment">// æ¨¡å—å®é™…ä½ç½®: src/libs/moduleA/index.js</span></span><br></pre></td></tr></table></figure>

<h4 id="9-strictNullChecks"><a href="#9-strictNullChecks" class="headerlink" title="9.strictNullChecks"></a>9.strictNullChecks</h4><p><code>æ˜¯å¦å¯ç”¨ä¸¥æ ¼çš„ nullæ£€æŸ¥æ¨¡å¼</code> é»˜è®¤å€¼: <strong>false</strong> å»ºè®®å¼€å¯è¯¥é€‰é¡¹</p>
<p>æœªå¤„ç†çš„ null å’Œ undefined ç»å¸¸ä¼šå¯¼è‡´ BUG çš„äº§ç”Ÿï¼Œæ‰€ä»¥ TypeScript åŒ…å«äº† strictNullChecks é€‰é¡¹æ¥å¸®åŠ©æˆ‘ä»¬å‡å°‘å¯¹è¿™ç§æƒ…å†µçš„æ‹…å¿§ã€‚å½“å¯ç”¨äº† strictNullChecksï¼Œnull å’Œ undefined è·å¾—äº†å®ƒä»¬è‡ªå·±å„è‡ªçš„ç±»å‹ null å’Œ undefinedã€‚å¼€å¯è¯¥æ¨¡å¼æœ‰åŠ©äºå‘ç°å¹¶å¤„ç†å¯èƒ½ä¸º undefined çš„èµ‹å€¼ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœªå¼€å¯strictNullChecksï¼Œnumberç±»å‹åŒ…å«äº†nullå’Œundefinedç±»å‹</span></span><br><span class="line"><span class="keyword">let</span> foo: <span class="built_in">number</span> = <span class="number">123</span></span><br><span class="line">foo = <span class="literal">null</span> <span class="comment">// Okay</span></span><br><span class="line">foo = <span class="literal">undefined</span> <span class="comment">// Okay</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯strictNullChecks</span></span><br><span class="line"><span class="keyword">let</span> foo: <span class="built_in">string</span>[] | <span class="literal">undefined</span> = arr.find(<span class="function">(<span class="params">key</span>) =&gt;</span> key === <span class="string">'test'</span>)</span><br><span class="line"><span class="comment">// foo.push('1') // error - 'foo' is possibly 'undefined'</span></span><br><span class="line">foo &amp;&amp; foo.push(<span class="string">'1'</span>) <span class="comment">// okay</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šå¯ç”¨ â€“strict ç›¸å½“äºå¯ç”¨ â€“noImplicitAny, â€“noImplicitThis, â€“alwaysStrict, â€“strictNullChecks, â€“strictFunctionTypes å’Œâ€“strictPropertyInitialization</p>
</blockquote>
<h4 id="10-noUnusedLocals"><a href="#10-noUnusedLocals" class="headerlink" title="10.noUnusedLocals"></a>10.noUnusedLocals</h4><p><code>æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼Œæ˜¯å¦æŠ›å‡ºé”™è¯¯</code> é»˜è®¤å€¼: <strong>false</strong></p>
<p>å½“å‘ç°å˜é‡å®šä¹‰ä½†æ²¡æœ‰ä½¿ç”¨æ—¶ï¼Œç¼–è¯‘ä¸æŠ¥é”™ã€‚eslint çš„ rule ä¸­ä¹Ÿæœ‰è¯¥æ¡ï¼Œå»ºè®®æ­£å¼é¡¹ç›®å°†è¯¥é€‰é¡¹å¼€å¯ï¼Œè®¾ç½®ä¸º trueï¼Œä½¿å¾—ä»£ç å¹²å‡€æ•´æ´</p>
<h4 id="11-noUnusedParameters"><a href="#11-noUnusedParameters" class="headerlink" title="11.noUnusedParameters"></a>11.noUnusedParameters</h4><p><code>æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼Œæ˜¯å¦æŠ›å‡ºé”™è¯¯</code> é»˜è®¤å€¼: <strong>false</strong></p>
<p>å»ºè®®å¼€å¯ï¼Œç†ç”±åŒä¸Šã€‚</p>
<h4 id="12-allowJs"><a href="#12-allowJs" class="headerlink" title="12.allowJs"></a>12.allowJs</h4><p><code>æ˜¯å¦å…è®¸ç¼–è¯‘javascriptæ–‡ä»¶</code> é»˜è®¤å€¼: <strong>false</strong></p>
<p>å¦‚æœè®¾ç½®ä¸º trueï¼Œjs åç¼€çš„æ–‡ä»¶ä¹Ÿä¼šè¢« typescript è¿›è¡Œç¼–è¯‘ã€‚</p>
<h4 id="13-typeRoots-å’Œ-types"><a href="#13-typeRoots-å’Œ-types" class="headerlink" title="13.typeRoots å’Œ types"></a>13.typeRoots å’Œ types</h4><p>é»˜è®¤æ‰€æœ‰å¯è§çš„â€@typesâ€åŒ…ä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¢«åŒ…å«è¿›æ¥ã€‚å¦‚æœæŒ‡å®šäº† typeRootsï¼Œåªæœ‰ typeRoots ä¸‹é¢çš„åŒ…æ‰ä¼šè¢«åŒ…å«è¿›æ¥ã€‚å¦‚æœæŒ‡å®šäº† typesï¼Œåªæœ‰è¢«åˆ—å‡ºæ¥çš„ npm åŒ…æ‰ä¼šè¢«åŒ…å«è¿›æ¥ã€‚<a href="https://www.tslang.cn/docs/handbook/tsconfig-json.html#types-typeroots-and-types" target="_blank" rel="noopener">è¯¦ç»†è§£é‡Š</a></p>
<blockquote>
<p>å¯ä»¥æŒ‡å®šâ€typesâ€: []æ¥ç¦ç”¨è‡ªåŠ¨å¼•å…¥@types åŒ…#14. filesã€include å’Œ exclude</p>
</blockquote>
<h4 id="14-filesã€include-å’Œ-exclude"><a href="#14-filesã€include-å’Œ-exclude" class="headerlink" title="14.filesã€include å’Œ exclude"></a>14.filesã€include å’Œ exclude</h4><p><code>ç¼–è¯‘æ–‡ä»¶åŒ…å«å“ªäº›æ–‡ä»¶ä»¥åŠæ’é™¤å“ªäº›æ–‡ä»¶</code></p>
<p>æœªè®¾ç½® include æ—¶ï¼Œç¼–è¯‘å™¨é»˜è®¤åŒ…å«å½“å‰ç›®å½•å’Œå­ç›®å½•ä¸‹æ‰€æœ‰çš„ TypeScript æ–‡ä»¶ï¼ˆ.ts, .d.ts å’Œ .tsxï¼‰ã€‚å¦‚æœ allowJs è¢«è®¾ç½®æˆ trueï¼ŒJS æ–‡ä»¶ï¼ˆ.js å’Œ.jsxï¼‰ä¹Ÿè¢«åŒ…å«è¿›æ¥ã€‚exclude æ’é™¤é‚£äº›ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"compilerOptions"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"include"</span>: [</span><br><span class="line">        <span class="string">"src/**/*"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"exclude"</span>: [</span><br><span class="line">        <span class="string">"node_modules"</span>,</span><br><span class="line">        <span class="string">"**/*.spec.ts"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…¨è§£æ"><a href="#å…¨è§£æ" class="headerlink" title="å…¨è§£æ"></a>å…¨è§£æ</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="comment">/* åŸºæœ¬é€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"target"</span>: <span class="string">"es5"</span>,                       <span class="comment">// æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'ï¼ˆ"ESNext"è¡¨ç¤ºæœ€æ–°çš„ESè¯­æ³•ï¼ŒåŒ…æ‹¬è¿˜å¤„åœ¨stage Xé˜¶æ®µï¼‰</span></span><br><span class="line">    <span class="string">"module"</span>: <span class="string">"commonjs"</span>,                  <span class="comment">// æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'</span></span><br><span class="line">    <span class="string">"lib"</span>: [],                             <span class="comment">// æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"allowJs"</span>: <span class="literal">true</span>,                       <span class="comment">// å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"checkJs"</span>: <span class="literal">true</span>,                       <span class="comment">// æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯</span></span><br><span class="line">    <span class="string">"jsx"</span>: <span class="string">"preserve"</span>,                     <span class="comment">// æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'</span></span><br><span class="line">    <span class="string">"declaration"</span>: <span class="literal">true</span>,                   <span class="comment">// ç”Ÿæˆç›¸åº”çš„ '.d.ts' æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"sourceMap"</span>: <span class="literal">true</span>,                     <span class="comment">// ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"outFile"</span>: <span class="string">"./"</span>,                       <span class="comment">// å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">    <span class="string">"outDir"</span>: <span class="string">"./"</span>,                        <span class="comment">// æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="string">"rootDir"</span>: <span class="string">"./"</span>,                       <span class="comment">// ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.</span></span><br><span class="line">    <span class="string">"removeComments"</span>: <span class="literal">true</span>,                <span class="comment">// åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š</span></span><br><span class="line">    <span class="string">"noEmit"</span>: <span class="literal">true</span>,                        <span class="comment">// ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">    <span class="string">"importHelpers"</span>: <span class="literal">true</span>,                 <span class="comment">// ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°</span></span><br><span class="line">    <span class="string">"isolatedModules"</span>: <span class="literal">true</span>,               <span class="comment">// å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"strict"</span>: <span class="literal">true</span>,                        <span class="comment">// å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span></span><br><span class="line">    <span class="string">"noImplicitAny"</span>: <span class="literal">true</span>,                 <span class="comment">// åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™</span></span><br><span class="line">    <span class="string">"strictNullChecks"</span>: <span class="literal">true</span>,              <span class="comment">// å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥</span></span><br><span class="line">    <span class="string">"noImplicitThis"</span>: <span class="literal">true</span>,                <span class="comment">// å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯</span></span><br><span class="line">    <span class="string">"alwaysStrict"</span>: <span class="literal">true</span>,                  <span class="comment">// ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ 'use strict'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é¢å¤–çš„æ£€æŸ¥ */</span></span><br><span class="line">    <span class="string">"noUnusedLocals"</span>: <span class="literal">true</span>,                <span class="comment">// æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="string">"noUnusedParameters"</span>: <span class="literal">true</span>,            <span class="comment">// æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="string">"noImplicitReturns"</span>: <span class="literal">true</span>,             <span class="comment">// å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="string">"noFallthroughCasesInSwitch"</span>: <span class="literal">true</span>,    <span class="comment">// æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* æ¨¡å—è§£æé€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"moduleResolution"</span>: <span class="string">"node"</span>,            <span class="comment">// é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)ã€‚é»˜è®¤æ˜¯classic</span></span><br><span class="line">    <span class="string">"baseUrl"</span>: <span class="string">"./"</span>,                       <span class="comment">// ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•</span></span><br><span class="line">    <span class="string">"paths"</span>: &#123;&#125;,                           <span class="comment">// æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</span></span><br><span class="line">    <span class="string">"rootDirs"</span>: [],                        <span class="comment">// æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹</span></span><br><span class="line">    <span class="string">"typeRoots"</span>: [],                       <span class="comment">// åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line">    <span class="string">"types"</span>: [],                           <span class="comment">// éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨</span></span><br><span class="line">    <span class="string">"allowSyntheticDefaultImports"</span>: <span class="literal">true</span>,  <span class="comment">// å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Source Map Options */</span></span><br><span class="line">    <span class="string">"sourceRoot"</span>: <span class="string">"./"</span>,                    <span class="comment">// æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">    <span class="string">"mapRoot"</span>: <span class="string">"./"</span>,                       <span class="comment">// æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">    <span class="string">"inlineSourceMap"</span>: <span class="literal">true</span>,               <span class="comment">// ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"inlineSources"</span>: <span class="literal">true</span>,                 <span class="comment">// å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å…¶ä»–é€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"experimentalDecorators"</span>: <span class="literal">true</span>,        <span class="comment">// å¯ç”¨è£…é¥°å™¨</span></span><br><span class="line">    <span class="string">"emitDecoratorMetadata"</span>: <span class="literal">true</span>,         <span class="comment">// ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ</span></span><br><span class="line">    <span class="string">"strictFunctionTypes"</span>: <span class="literal">false</span>           <span class="comment">// ç¦ç”¨å‡½æ•°å‚æ•°åŒå‘åå˜æ£€æŸ¥ã€‚</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* æŒ‡å®šç¼–è¯‘æ–‡ä»¶æˆ–æ’é™¤æŒ‡å®šç¼–è¯‘æ–‡ä»¶ */</span></span><br><span class="line">  <span class="string">"include"</span>: [</span><br><span class="line">      <span class="string">"src/**/*"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"exclude"</span>: [</span><br><span class="line">      <span class="string">"node_modules"</span>,</span><br><span class="line">      <span class="string">"**/*.spec.ts"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"files"</span>: [</span><br><span class="line">    <span class="string">"core.ts"</span>,</span><br><span class="line">    <span class="string">"sys.ts"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// ä»å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œç»§æ‰¿é…ç½®</span></span><br><span class="line">  <span class="string">"extends"</span>: <span class="string">"./config/base"</span>,</span><br><span class="line">  <span class="comment">// è®©IDEåœ¨ä¿å­˜æ–‡ä»¶çš„æ—¶å€™æ ¹æ®tsconfig.jsoné‡æ–°ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line">  <span class="string">"compileOnSave"</span>: <span class="literal">true</span> <span class="comment">// æ”¯æŒè¿™ä¸ªç‰¹æ€§éœ€è¦Visual Studio 2015ï¼Œ TypeScript1.8.4ä»¥ä¸Šå¹¶ä¸”å®‰è£…atom-typescriptæ’ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/%E8%A7%84%E8%8C%83%E5%9B%A2%E9%98%9FGitCommitMessage.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/%E8%A7%84%E8%8C%83%E5%9B%A2%E9%98%9FGitCommitMessage.html" class="post-title-link" itemprop="url">è§„èŒƒå›¢é˜Ÿ Git Commit Message</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-02-06 00:00:00" itemprop="dateCreated datePublished" datetime="2023-02-06T00:00:00+08:00">2023-02-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>ç›®å‰æ­£åœ¨æ¨åŠ¨å›¢é˜ŸåšæŒç»­éƒ¨ç½²ï¼ŒåŒ…æ‹¬è‡ªåŠ¨æäº¤ npm åŒ…åˆ°å…¬å¸ç§åº“å’Œè‡ªåŠ¨ç”Ÿæˆ CHANGELOGï¼Œé‡ä¸­ä¹‹é‡æ˜¯æ ¹æ® commit æ¥è‡ªåŠ¨åˆ¤æ–­ç‰ˆæœ¬å·ï¼Œæ‰€ä»¥è§„èŒƒ git commit message åŠ¿åœ¨å¿…è¡Œã€‚<br>æœ¬æ–‡å°±ä»‹ç»ä¸‹å›¢é˜Ÿæ˜¯å¦‚ä½•åšçš„ commit message çš„è§„èŒƒå’Œæ ¼å¼åŒ–ã€‚</p>
<h2 id="Commit-Message-æ ¼å¼"><a href="#Commit-Message-æ ¼å¼" class="headerlink" title="Commit Message æ ¼å¼"></a>Commit Message æ ¼å¼</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br></pre></td></tr></table></figure>

<h4 id="type-å¿…é¡»"><a href="#type-å¿…é¡»" class="headerlink" title="type(å¿…é¡»)"></a>type(å¿…é¡»)</h4><ul>
<li>feat: æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</li>
<li>fix: ä¿®å¤ bug</li>
<li>perf: ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ</li>
<li>refactor: é‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰</li>
<li>docs: æ–‡æ¡£ï¼ˆdocumentationï¼‰</li>
<li>style: æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨, ä¸æ˜¯ css æ ·å¼ï¼‰</li>
<li>test: å¢åŠ æµ‹è¯•</li>
</ul>
<h4 id="scope-å¯é€‰"><a href="#scope-å¯é€‰" class="headerlink" title="scope(å¯é€‰)"></a>scope(å¯é€‰)</h4><ul>
<li>scope ç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´</li>
</ul>
<h4 id="subject-å¿…é¡»"><a href="#subject-å¿…é¡»" class="headerlink" title="subject(å¿…é¡»)"></a>subject(å¿…é¡»)</h4><ul>
<li>subject æ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡ 50 ä¸ªå­—ç¬¦ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e.g.</span><br><span class="line">fix: ä¿®å¤xxxé—®é¢˜</span><br><span class="line">feat: æ–°å¢xxxåŠŸèƒ½</span><br></pre></td></tr></table></figure>

<h2 id="Commintlint-æ ¡éªŒä½ çš„-Message"><a href="#Commintlint-æ ¡éªŒä½ çš„-Message" class="headerlink" title="Commintlint æ ¡éªŒä½ çš„ Message"></a>Commintlint æ ¡éªŒä½ çš„ Message</h2><p>commitlint å¯ä»¥å¸®åŠ©æˆ‘ä»¬ lint commit messages, å¦‚æœæˆ‘ä»¬æäº¤çš„ä¸ç¬¦åˆé¢„è®¾çš„è§„èŒƒ, ç›´æ¥æ‹’ç»æäº¤ã€‚</p>
<p>ç›®å‰å›¢é˜Ÿä½¿ç”¨çš„æ˜¯<a href="https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional" target="_blank" rel="noopener"><br>@commitlint/config-conventional</a>ï¼Œå› ä¸ºå›¢é˜Ÿåé¢è¦ä½¿ç”¨<br><a href="https://github.com/semantic-release/commit-analyzer/tree/master" target="_blank" rel="noopener">@semantic-release/commit-analyzer</a>è¿›è¡Œä¸€ç³»åˆ—è‡ªåŠ¨åŒ–æ“ä½œï¼Œ</p>
<p>ï¼ŒäºŒè€…åº•å±‚å‡ä¾èµ–<a href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-conventionalcommits" target="_blank" rel="noopener">conventional-changelog-conventionalcommits</a>ï¼Œå±äºå®Œç¾é€‚é…ã€‚</p>
<h2 id="ç»“åˆ-Husky"><a href="#ç»“åˆ-Husky" class="headerlink" title="ç»“åˆ Husky"></a>ç»“åˆ Husky</h2><p>æœ¬åœ°æ ¡éªŒ commit message çš„æœ€ä½³æ–¹å¼æ˜¯ç»“åˆ git hook, æ‰€ä»¥éœ€è¦é…åˆ Huskyã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install husky --save-dev</span><br><span class="line"></span><br><span class="line">npx husky install</span><br><span class="line"></span><br><span class="line">npm set-script prepare &quot;husky install&quot;</span><br></pre></td></tr></table></figure>

<h5 id="æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤å°†å¸¦æ¥ä»¥ä¸‹å‡ ä¸ªå˜åŒ–"><a href="#æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤å°†å¸¦æ¥ä»¥ä¸‹å‡ ä¸ªå˜åŒ–" class="headerlink" title="æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤å°†å¸¦æ¥ä»¥ä¸‹å‡ ä¸ªå˜åŒ–"></a>æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤å°†å¸¦æ¥ä»¥ä¸‹å‡ ä¸ªå˜åŒ–</h5><ul>
<li>åœ¨.git åŒçº§ç›®å½•ç”Ÿæˆ.husky æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ªå¯ä»¥ç¼–è¾‘çš„ç¤ºä¾‹ pre-commit é’©å­</li>
<li>åœ¨ package.json ä¸­çš„ scripts ä¸­æ·»åŠ äº†â€prepareâ€: â€œhusky installâ€</li>
<li>æ›´æ”¹ git é…ç½®é¡¹ core.hooksPath ä¸º.husky</li>
</ul>
<h5 id="package-json-é…ç½®"><a href="#package-json-é…ç½®" class="headerlink" title="package.json é…ç½®:"></a>package.json é…ç½®:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;husky&quot;: &#123;</span><br><span class="line">Â  Â  Â  Â  &quot;hooks&quot;: &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  &quot;commit-msg&quot;: &quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="shell-è„šæœ¬"><a href="#shell-è„šæœ¬" class="headerlink" title="shell è„šæœ¬"></a>shell è„šæœ¬</h2><p>ä¸Šæ–‡çš„æ“ä½œä¸­ä¼šæœ‰ä¸€ä¸ªå° bugï¼Œå°±æ˜¯åœ¨æœ¬åœ°ç»•è¿‡ git hook æ ¡éªŒçš„æƒ…å†µï¼Œå½“é€šè¿‡ gitlab åšæŒç»­éƒ¨ç½²æ—¶ï¼Œä¼šå¯¼è‡´è‡ªåŠ¨è®¡ç®—ç‰ˆæœ¬å·ç­‰æ“ä½œå‡ºé”™ï¼Œæ‰€ä»¥åœ¨æŒç»­éƒ¨ç½²è„šæœ¬å¯åŠ¨å‰ï¼Œé€šè¿‡ commit lint shell è„šæœ¬æ¥é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿã€‚</p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>commit message çš„è§„èŒƒæ€§å¾ˆé‡è¦, ä½†æ˜¯æ˜¯å¦éœ€è¦åƒæœ¬æ–‡è¿™æ ·å¼ºåˆ¶é™åˆ¶, æ¯ä¸ªå›¢é˜Ÿå’Œä¸ªäººéƒ½æœ‰è‡ªå·±çš„æƒ³æ³•, ä½†æ˜¯ä¸ªäººè®¤ä¸º: å¥½çš„ä¹ æƒ¯, å—ç›Šç»ˆèº«.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rile14929.github.io/zh-CN/%E4%BD%BF%E7%94%A8verdaccio%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89npm%E4%BB%93%E5%BA%93.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Trevor.jpeg">
      <meta itemprop="name" content="rile">
      <meta itemprop="description" content="FE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å³è€³å¬é£">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/zh-CN/%E4%BD%BF%E7%94%A8verdaccio%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89npm%E4%BB%93%E5%BA%93.html" class="post-title-link" itemprop="url">ä½¿ç”¨verdaccioæ­å»ºç§æœ‰npmä»“åº“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-27 00:00:00" itemprop="dateCreated datePublished" datetime="2022-12-27T00:00:00+08:00">2022-12-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><ul>
<li>å…¬å¸å†…éƒ¨å¼€å‘çš„ç§æœ‰åŒ…,ç»Ÿä¸€ç®¡ç†,æ–¹ä¾¿å¼€å‘å’Œä½¿ç”¨ï¼Œå°¤å…¶ç‰ˆæœ¬ç®¡ç†éœ€è¦ç»Ÿä¸€ï¼›</li>
<li>å®‰å…¨æ€§ï¼Œæ—¢è¦ä¿è¯ç»„ä»¶çš„ä½¿ç”¨æ–¹ä¾¿ä¹Ÿè¦ä¿è¯ç»„ä»¶çš„ç§æœ‰æ€§ã€‚</li>
</ul>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>ä¸ºä»€ä¹ˆé€‰æ‹© verdaccioï¼Ÿ <strong>å…è´¹</strong>ï¼</p>
<p>å¸‚é¢ä¸Šä»˜è´¹çš„è½¯ä»¶å¤§æ¦‚æœ‰ä¸‹é¢å‡ ç§ï¼š</p>
<ul>
<li>ä»˜è´¹é€‰æ‹©ï¼šMyGet (<a href="http://www.myget.org" target="_blank" rel="noopener">www.myget.org</a>) å›¢é˜Ÿç‰ˆ 40 ç¾å…ƒ/æœˆï¼Œä¸”åªèƒ½æœ‰äº”ä¸ªè´¦å·å’Œ 2GB çš„å­˜å‚¨ç©ºé—´ã€‚</li>
<li>NPM Org (<a href="http://www.npmjs.com" target="_blank" rel="noopener">www.npmjs.com</a>) æ¯ä¸ªè´¦å·æ¯æœˆ 7 ç¾å…ƒä»˜è´¹çš„æˆ‘ä»¬å°±ä¸è€ƒè™‘äº†ï¼Œæ²¡è¿™ä¸ªå¿…è¦ï¼Œè€Œä¸”ä»˜è´¹çš„ä¹Ÿä¸æ˜¯å°±æ›´å¥½ã€‚</li>
</ul>
<p>sinopia æ­å»ºååˆ†ç®€å•å‹å¥½ï¼Œä¸è¿‡è¿™ç©æ„å„¿å·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œæœ€è¿‘çš„æ›´æ–°åœ¨å‡ å¹´å‰ï¼Œä½†æœ‰ä¸€ç¾¤äººå‡ºäº† sinopia çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œèµ·äº†ä¸ªåå­—å« verdaccioï¼Œè¿™ä¸ªå°±æ˜¯è¿™æ¬¡ä¸»è¦æ¨èçš„æ–¹æ¡ˆï¼Œè¿™ä¸ªåº“ä¸€ç›´åœ¨ç§¯æç»´æŠ¤ä¸­ï¼Œgithub start 13000+ï¼Œçœ‹æ¥è¿˜æ˜¯æ¯”è¾ƒé è°±çš„ï¼Œè€Œä¸”å›½å†…å¤–å„ç§èµ„æ–™å‚è€ƒä¸‹æ¥ï¼Œè¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯å—åˆ°æåŠ›æ¨èçš„ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>è¯¦ç»†çš„<a href="https://verdaccio.org/docs/installation/" target="_blank" rel="noopener">å®‰è£…æ•™ç¨‹</a>ã€‚å¦‚æœæ˜¯æœ¬åœ°å®‰è£…, å¯ä»¥ä½¿ç”¨ npmã€yarn æˆ– pnpm å…¨å±€å®‰è£…å³å¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install --g verdaccio</span><br><span class="line">æˆ–</span><br><span class="line">yarn global add verdaccio</span><br><span class="line">æˆ–</span><br><span class="line">pnpm install -g verdaccio</span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä¸‹æ–¹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">verdaccio</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨åä¼šè¾“å‡ºé…ç½®æ–‡ä»¶åœ°å€å’Œæµè§ˆå™¨è®¿é—®åœ°å€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">warn --- config file  - xxx&#x2F;xxx&#x2F;config.yaml</span><br><span class="line">warn --- http address - http:&#x2F;&#x2F;localhost:4873&#x2F; - verdaccio&#x2F;5.14.0</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h4 id="nrm"><a href="#nrm" class="headerlink" title="nrm"></a>nrm</h4><p>nrm æ˜¯ä¸€ä¸ª NPM æºç®¡ç†å™¨ï¼Œå¯ä»¥ä½¿ç”¨ nrm åœ¨ä¸åŒçš„æºåˆ‡æ¢ã€‚</p>
<ul>
<li>å®‰è£… nrm</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥çœ‹æº</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm ls</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  npm ---------- https:&#x2F;&#x2F;registry.npmjs.org&#x2F;</span><br><span class="line">  yarn --------- https:&#x2F;&#x2F;registry.yarnpkg.com&#x2F;</span><br><span class="line">  tencent ------ https:&#x2F;&#x2F;mirrors.cloud.tencent.com&#x2F;npm&#x2F;</span><br><span class="line">  cnpm --------- https:&#x2F;&#x2F;r.cnpmjs.org&#x2F;</span><br><span class="line">  taobao ------- https:&#x2F;&#x2F;registry.npmmirror.com&#x2F;</span><br><span class="line">  npmMirror ---- https:&#x2F;&#x2F;skimdb.npmjs.com&#x2F;registry&#x2F;</span><br><span class="line">* fc ----------- http:&#x2F;&#x2F;localhost:4873&#x2F;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ·»åŠ æˆ–åˆ é™¤ç§æœ‰æº</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">nrm add registry_name registry_url #æ·»åŠ æºï¼Œregistry_nameä¸ºæºçš„åç§°ï¼Œregistry_urlä¸ºæºçš„åœ°å€</span><br><span class="line">nrm del registry_name #åˆ é™¤æº</span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨ç§æœ‰æº</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm use registry_name</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="ç™»å½•ç§æœ‰æº"><a href="#ç™»å½•ç§æœ‰æº" class="headerlink" title="ç™»å½•ç§æœ‰æº"></a>ç™»å½•ç§æœ‰æº</h4><ul>
<li>æ·»åŠ ç”¨æˆ·</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm adduser</span><br></pre></td></tr></table></figure>

<ul>
<li>ç™»å½•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm login</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="å‘å¸ƒåŒ…"><a href="#å‘å¸ƒåŒ…" class="headerlink" title="å‘å¸ƒåŒ…"></a>å‘å¸ƒåŒ…</h4><p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ npm publish å°±å¯ä»¥å°†åŒ…å‘å¸ƒåˆ°ç§æœ‰æº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h3><h4 id="æƒé™é…ç½®"><a href="#æƒé™é…ç½®" class="headerlink" title="æƒé™é…ç½®"></a>æƒé™é…ç½®</h4><p>ä¸€èˆ¬å›¢é˜Ÿæˆ–è€…å…¬å¸çš„ç§æœ‰é¡¹ç›®ï¼Œä¼šé‡‡ç”¨ä¸åŒçš„æƒé™æ§åˆ¶ï¼Œé…ç½®æ–‡ä»¶çš„ packages æ˜¯é…ç½®åŒ…çš„æƒé™çš„</p>
<ul>
<li>åŒ¹é…åŒ…å<ul>
<li>â€˜@/â€˜ è¡¨ç¤ºå¸¦æœ‰@<em>/</em>çš„ä½œç”¨åŸŸåŒ…</li>
<li>** è¡¨ç¤ºå…¶ä»–çš„æ‰€æœ‰åŒ…</li>
<li>å¯ä»¥é…ç½®è‡ªå·±çš„åŒ…æ¯”å¦‚ï¼šâ€™private-â€˜, â€˜my-â€˜ç­‰ç­‰</li>
</ul>
</li>
<li>æ“ä½œæƒé™<ul>
<li>access è¡¨ç¤ºå“ªä¸€ç±»ç”¨æˆ·å¯ä»¥å¯¹åŒ¹é…çš„é¡¹ç›®è¿›è¡Œå®‰è£…(install)</li>
<li>publish è¡¨ç¤ºå“ªä¸€ç±»ç”¨æˆ·å¯ä»¥å¯¹åŒ¹é…çš„é¡¹ç›®è¿›è¡Œå‘å¸ƒ(publish)</li>
<li>proxy è¡¨ç¤ºå¦‚æœåº“ä¸­æ²¡æœ‰æ­¤åŒ…ï¼Œæ­¤èƒ½è¿‡ä¸Šé¢é…ç½®çš„ npmjs å»è·å–</li>
</ul>
</li>
<li>ç”¨æˆ·æƒé™ï¼š<ul>
<li>$all è¡¨ç¤ºæ‰€æœ‰äººéƒ½å¯ä»¥æ‰§è¡Œå¯¹åº”çš„æ“ä½œ</li>
<li>$authenticated è¡¨ç¤ºåªæœ‰é€šè¿‡éªŒè¯çš„äººå¯ä»¥æ‰§è¡Œå¯¹åº”æ“ä½œ</li>
<li>$anonymous è¡¨ç¤ºåªæœ‰åŒ¿åè€…å¯ä»¥è¿›è¡Œå¯¹åº”æ“ä½œï¼ˆé€šå¸¸æ— ç”¨ï¼‰</li>
<li>è¿™é‡Œå¯ä»¥å†™å·²ç»æ³¨å†Œçš„ç”¨æˆ·åï¼Œåšåˆ°ç²¾ç»†åŒ–æ§åˆ¶</li>
</ul>
</li>
</ul>
<hr>
<h4 id="å®é™…é…ç½®åœºæ™¯"><a href="#å®é™…é…ç½®åœºæ™¯" class="headerlink" title="å®é™…é…ç½®åœºæ™¯"></a>å®é™…é…ç½®åœºæ™¯</h4><p>å…¬å¸é‡Œæœ‰ä¸¤ä¸ªå‰ç«¯å›¢é˜Ÿ teamA å’Œ teamBï¼Œç§æœ‰æºä¸Šçš„æ‰€æœ‰åŒ…éƒ½å¯ä»¥å®‰è£…ï¼Œä½†æ˜¯æ¯ä¸ªå›¢é˜Ÿåªèƒ½å‘å¸ƒæˆ–ç§»é™¤è‡ªå·±å›¢é˜Ÿçš„åŒ…ã€‚åˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># config.yaml</span></span><br><span class="line"><span class="attr">packages:</span></span><br><span class="line">  <span class="comment"># teamA</span></span><br><span class="line">  <span class="string">'@teamA/*'</span><span class="string">:</span></span><br><span class="line">    <span class="attr">access:</span> <span class="string">$all</span></span><br><span class="line">    <span class="attr">publish:</span> <span class="string">teamA-user1</span> <span class="string">teamA-user2</span> <span class="string">teamA-user3</span></span><br><span class="line">    <span class="attr">unpublish:</span> <span class="string">teamA-user1</span> <span class="string">teamA-user2</span> <span class="string">teamA-user3</span></span><br><span class="line">    <span class="attr">proxy:</span> <span class="string">npmjs</span></span><br><span class="line">  <span class="comment"># teamB</span></span><br><span class="line">  <span class="string">'@teamB/*'</span><span class="string">:</span></span><br><span class="line">    <span class="attr">access:</span> <span class="string">$all</span></span><br><span class="line">    <span class="attr">publish:</span> <span class="string">teamB-user1</span> <span class="string">teamB-user2</span> <span class="string">teamB-user3</span></span><br><span class="line">    <span class="attr">unpublish:</span> <span class="string">teamB-user1</span> <span class="string">teamB-user2</span> <span class="string">teamB-user3</span></span><br><span class="line">    <span class="attr">proxy:</span> <span class="string">npmjs</span></span><br><span class="line">  <span class="comment"># å…¶ä»–æ‰€æœ‰åŒ…</span></span><br><span class="line">  <span class="string">'**'</span><span class="string">:</span></span><br><span class="line">    <span class="attr">access:</span> <span class="string">$all</span></span><br><span class="line">    <span class="attr">publish:</span> <span class="string">$authenticated</span></span><br><span class="line">    <span class="attr">unpublish:</span> <span class="string">$authenticated</span></span><br><span class="line">    <span class="attr">proxy:</span> <span class="string">npmjs</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å¥½ packages åï¼Œæˆ‘ä»¬è¿˜å¾—æ›´æ”¹ auth çš„å€¼ï¼Œå› ä¸ºæ­¤æ—¶æ³¨å†Œç”¨æˆ·æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ç§æœ‰ npm åº“éƒ¨ç½²åœ¨å¤–ç½‘ç¯å¢ƒçš„è¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡ npm adduser å‘½ä»¤æ³¨å†Œç”¨æˆ·ã€‚</p>
<p>æ˜¾ç„¶ï¼Œè¿™æ˜¯ä¸å…è®¸å‡ºç°çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦è®¾ç½® auth çš„ max_users ä¸º -1ï¼Œå®ƒä»£è¡¨çš„æ˜¯ç¦ç”¨æ³¨å†Œç”¨æˆ·ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">auth:</span></span><br><span class="line">  <span class="attr">max_users:</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœéœ€è¦æ·»åŠ ç”¨æˆ·è¿™é‡Œä»‹ç»ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>å¯ä»¥é€šè¿‡å®‰è£… htpasswd-for-sinopia æ¥æ·»åŠ è´¦å·</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install htpasswd-for-sinopia -g #å…¨å±€å®‰è£…htpasswd-for-sinopia</span><br><span class="line">sinopia-adduser # åœ¨ htpasswd ç›®å½•ä¸‹æ‰§è¡Œ</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯ä»¥é€šè¿‡å®˜æ–¹æä¾›çš„å·¥å…·æ¥ç”Ÿæˆ  <a href="https://hostingcanada.org/htpasswd-generator/" target="_blank" rel="noopener">htpasswd-generator</a> ï¼Œå°†ç”Ÿæˆçš„æ®µå­—ç¬¦ä¸²æ·»åŠ åˆ° htpasswd ä¸­å³å¯ã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="rile"
      src="/images/Trevor.jpeg">
  <p class="site-author-name" itemprop="name">rile</p>
  <div class="site-description" itemprop="description">FE</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Rile14929" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Rile14929" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:rile14929@163.com" title="E-Mail â†’ mailto:rile14929@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020 â€“ 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-rocket"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rile</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
